{"ast":null,"code":"import React from'react';import suCrypt from'../../helpers/suCrypt';// Base URL from environment variable\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BASE_URL=process.env.REACT_APP_IMAGE_URL||\"https://testfabrics.com/\";const downloadFile=(fileId,fileName,fileExt)=>{const encodedId=suCrypt(fileId);const fileUrl=\"\".concat(BASE_URL,\"downloadfiles/\").concat(encodedId,\".\").concat(fileExt);// Direct file URL\nfetch(fileUrl,{method:\"GET\"}).then(response=>response.blob()).then(blob=>{const url=window.URL.createObjectURL(blob);const link=document.createElement(\"a\");link.href=url;link.setAttribute(\"download\",\"\".concat(fileName.replace(/ /g,\"_\"),\".\").concat(fileExt));document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(url);}).catch(error=>console.error(\"Download failed:\",error));};// Function to get preview URL\nconst getPreviewUrl=(fileName,fileExt)=>{return\"\".concat(BASE_URL,\"download.php?filename=\").concat(fileName,\"&ext=\").concat(fileExt);};function DownloadItem(_ref){let{id,thumb,description,index_description,file_name,file_ext}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-4 col-md-6 col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"single-news-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"featured-thumb bg-cover\",style:{backgroundImage:\"url(\".concat(thumb,\")\")}}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"post-meta d-flex\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"post-author mr-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fal fa-user\"}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:e=>e.preventDefault(),children:index_description})]})}),/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"a\",{href:getPreviewUrl(file_name,file_ext),target:\"_blank\",rel:\"noopener noreferrer\",children:description})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary cursor-pointer mt-3\",onClick:()=>downloadFile(id,file_name,file_ext),children:\"Download Now\"})]})]})});}export default DownloadItem;","map":{"version":3,"names":["React","suCrypt","jsx","_jsx","jsxs","_jsxs","BASE_URL","process","env","REACT_APP_IMAGE_URL","downloadFile","fileId","fileName","fileExt","encodedId","fileUrl","concat","fetch","method","then","response","blob","url","window","URL","createObjectURL","link","document","createElement","href","setAttribute","replace","body","appendChild","click","removeChild","revokeObjectURL","catch","error","console","getPreviewUrl","DownloadItem","_ref","id","thumb","description","index_description","file_name","file_ext","className","children","style","backgroundImage","onClick","e","preventDefault","target","rel"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/src/components/Downloads/DownloadItem.jsx"],"sourcesContent":["import React from 'react';\r\nimport suCrypt from '../../helpers/suCrypt';\r\n\r\n// Base URL from environment variable\r\nconst BASE_URL = process.env.REACT_APP_IMAGE_URL || \"https://testfabrics.com/\";\r\n\r\n\r\nconst downloadFile = (fileId, fileName, fileExt) => {\r\n    const encodedId = suCrypt(fileId);\r\n    const fileUrl = `${BASE_URL}downloadfiles/${encodedId}.${fileExt}`; // Direct file URL\r\n\r\n    fetch(fileUrl, { method: \"GET\" })\r\n        .then(response => response.blob())\r\n        .then(blob => {\r\n            const url = window.URL.createObjectURL(blob);\r\n            const link = document.createElement(\"a\");\r\n            link.href = url;\r\n            link.setAttribute(\"download\", `${fileName.replace(/ /g, \"_\")}.${fileExt}`);\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            document.body.removeChild(link);\r\n            window.URL.revokeObjectURL(url);\r\n        })\r\n        .catch(error => console.error(\"Download failed:\", error));\r\n};\r\n\r\n\r\n\r\n// Function to get preview URL\r\nconst getPreviewUrl = (fileName, fileExt) => {\r\n    return `${BASE_URL}download.php?filename=${fileName}&ext=${fileExt}`;\r\n};\r\n\r\nfunction DownloadItem({ \r\n    id,\r\n    thumb,\r\n    description,\r\n    index_description,\r\n    file_name,\r\n    file_ext\r\n}) {\r\n    return (\r\n        <div className=\"col-xl-4 col-md-6 col-12\">\r\n            <div className=\"single-news-card\">\r\n                <div\r\n                    className=\"featured-thumb bg-cover\"\r\n                    style={{ backgroundImage: `url(${thumb})` }}\r\n                />\r\n                <div className=\"post-content\">\r\n                    <div className=\"post-meta d-flex\">\r\n                        <div className=\"post-author mr-2\">\r\n                            <i className=\"fal fa-user\" />\r\n                            <a href=\"#\" onClick={(e) => e.preventDefault()}>{index_description}</a>\r\n                        </div>\r\n                    </div>\r\n                    <h3>\r\n                        {/* Open preview in new tab (direct file link) */}\r\n                        <a \r\n                            href={getPreviewUrl(file_name, file_ext)}\r\n                            target=\"_blank\" \r\n                            rel=\"noopener noreferrer\"\r\n                        >\r\n                            {description}\r\n                        </a>\r\n                    </h3>\r\n                    {/* Download button */}\r\n                    <button \r\n                        className=\"btn btn-primary cursor-pointer mt-3\"\r\n                        onClick={() => downloadFile(id,file_name, file_ext)}\r\n                    >\r\n                        Download Now\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DownloadItem;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}