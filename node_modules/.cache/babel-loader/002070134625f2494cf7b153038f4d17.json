{"ast":null,"code":"import React,{useRef,useState}from'react';import FormInput from'./FormInput';import{ToastContainer,toast}from'react-toastify';import{useHistory}from'react-router-dom';import{PostApi}from'../../middleware/postMiddleware';import ReCAPTCHA from\"react-google-recaptcha\";import Header3 from'../Header3';import Footer3 from'../Footer3';import PageBanner from'../PageBanner';import{useApi}from'../../middleware/middleware';// Assuming your `useApi` hook is here\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function BuyForm(_ref){let{bannerHeading,formTitle,formHeading,url,productName}=_ref;const history=useHistory();const[verified,setVerified]=useState(false);// Fetch user's IP details\nconst{data:location,error:locationError,isLoading:locationLoading}=useApi(\"get_ip_details\",{});// Update endpoint as needed\nconst formRef=useRef();const validateForm=()=>{const inputs=formRef.current.querySelectorAll('.form-group input');return Array.from(inputs).every(input=>input.value.trim()!=='');};const onSubmitHandler=async event=>{var _event$target,_event$target$contact,_event$target2,_event$target2$email;event.preventDefault();if(!validateForm()){toast.error('Please fill in all required fields.',{position:\"top-center\",autoClose:3000,hideProgressBar:true,closeOnClick:true,pauseOnHover:false,draggable:false,progress:undefined,theme:\"colored\"});return;}const data={Country:(location===null||location===void 0?void 0:location.country)||\"Unknown\",// Add country from fetched IP details\nContact_Person:(_event$target=event.target)===null||_event$target===void 0?void 0:(_event$target$contact=_event$target.contactPerson)===null||_event$target$contact===void 0?void 0:_event$target$contact.value,Email:(_event$target2=event.target)===null||_event$target2===void 0?void 0:(_event$target2$email=_event$target2.email)===null||_event$target2$email===void 0?void 0:_event$target2$email.value,Product_Name:productName};const res=await PostApi('product-buy',data);if(res===200){toast.success('Order Sent Successfully',{position:\"top-center\",autoClose:3000,hideProgressBar:true,closeOnClick:true,pauseOnHover:false,draggable:false,progress:undefined,theme:\"colored\"});setTimeout(()=>{history.push('/');},2500);}else{toast.error('Failed to send order. Please fill all required data.',{position:\"top-center\",autoClose:3000,hideProgressBar:true,closeOnClick:true,pauseOnHover:false,draggable:false,progress:undefined,theme:\"colored\"});}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header3,{}),/*#__PURE__*/_jsx(PageBanner,{currentPage:\"Buy Now\",breadCrumb:true,category:\"Category Name\",subcategory:\"Subcategory Name\"}),/*#__PURE__*/_jsx(ToastContainer,{position:\"top-center\",autoClose:3000,hideProgressBar:true,newestOnTop:false,closeOnClick:true,rtl:false,pauseOnFocusLoss:false,draggable:false,pauseOnHover:false,theme:\"colored\"}),/*#__PURE__*/_jsx(\"section\",{className:\"contact-form-wrapper section-padding pt-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 text-left mb-20\",children:[/*#__PURE__*/_jsx(\"span\",{children:formTitle}),/*#__PURE__*/_jsx(\"h1\",{children:formHeading}),/*#__PURE__*/_jsx(\"h2\",{children:productName&&\"Buy: \".concat(productName)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-12 pb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"contact-form\",ref:formRef,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmitHandler,className:\"row contact-form\",children:[/*#__PURE__*/_jsx(FormInput,{type:\"text\",labelFor:\"contactPerson\",label:\"* Name\",placeholder:\"Enter Your Name\",id:\"contactPerson\",name:\"contactPerson\"}),/*#__PURE__*/_jsx(FormInput,{type:\"email\",labelFor:\"email\",label:\"* Email\",placeholder:\"Enter Your Email\",id:\"email\",name:\"email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"country\",value:(location===null||location===void 0?void 0:location.country)||\"Unknown\"}),locationLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading location...\"}),locationError&&/*#__PURE__*/_jsx(\"p\",{children:\"Error fetching location\"}),/*#__PURE__*/_jsx(ReCAPTCHA,{sitekey:process.env.REACT_APP_RECAPTCHA_KEY,onChange:()=>setVerified(true)}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12 col-12 text-center pt-2\",children:/*#__PURE__*/_jsx(\"input\",{className:\"submit-btn\",type:\"submit\",value:\"Submit\",disabled:!verified})})]})})})]})})}),/*#__PURE__*/_jsx(Footer3,{})]});}export default BuyForm;","map":{"version":3,"names":["React","useRef","useState","FormInput","ToastContainer","toast","useHistory","PostApi","ReCAPTCHA","Header3","Footer3","PageBanner","useApi","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BuyForm","_ref","bannerHeading","formTitle","formHeading","url","productName","history","verified","setVerified","data","location","error","locationError","isLoading","locationLoading","formRef","validateForm","inputs","current","querySelectorAll","Array","from","every","input","value","trim","onSubmitHandler","event","_event$target","_event$target$contact","_event$target2","_event$target2$email","preventDefault","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","Country","country","Contact_Person","target","contactPerson","Email","email","Product_Name","res","success","setTimeout","push","children","currentPage","breadCrumb","category","subcategory","newestOnTop","rtl","pauseOnFocusLoss","className","concat","ref","onSubmit","type","labelFor","label","placeholder","id","name","sitekey","process","env","REACT_APP_RECAPTCHA_KEY","onChange","disabled"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/src/components/ContactForm/BuyForm.jsx"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport FormInput from './FormInput';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { useHistory } from 'react-router-dom';\nimport { PostApi } from '../../middleware/postMiddleware';\nimport ReCAPTCHA from \"react-google-recaptcha\";\nimport Header3 from '../Header3';\nimport Footer3 from '../Footer3';\nimport PageBanner from '../PageBanner';\nimport { useApi } from '../../middleware/middleware'; // Assuming your `useApi` hook is here\n\nfunction BuyForm({ \n    bannerHeading,\n    formTitle,\n    formHeading,\n    url,\n    productName,\n}) {\n    const history = useHistory();\n    const [verified, setVerified] = useState(false);\n\n    // Fetch user's IP details\n    const {\n        data: location,\n        error: locationError,\n        isLoading: locationLoading,\n    } = useApi(\"get_ip_details\", {}); // Update endpoint as needed\n\n    const formRef = useRef();\n\n    const validateForm = () => {\n        const inputs = formRef.current.querySelectorAll('.form-group input');\n        return Array.from(inputs).every(input => input.value.trim() !== '');\n    };\n\n    const onSubmitHandler = async (event) => {\n        event.preventDefault();\n\n        if (!validateForm()) {\n            toast.error('Please fill in all required fields.', {\n                position: \"top-center\",\n                autoClose: 3000,\n                hideProgressBar: true,\n                closeOnClick: true,\n                pauseOnHover: false,\n                draggable: false,\n                progress: undefined,\n                theme: \"colored\",\n            });\n            return;\n        }\n\n        const data = {\n            Country: location?.country || \"Unknown\", // Add country from fetched IP details\n            Contact_Person: event.target?.contactPerson?.value,\n            Email: event.target?.email?.value,\n            Product_Name: productName,\n        };\n        \n        const res = await PostApi('product-buy', data);\n\n        if (res === 200) {\n            toast.success('Order Sent Successfully', {\n                position: \"top-center\",\n                autoClose: 3000,\n                hideProgressBar: true,\n                closeOnClick: true,\n                pauseOnHover: false,\n                draggable: false,\n                progress: undefined,\n                theme: \"colored\",\n            });\n            setTimeout(() => {\n                history.push('/');\n            }, 2500);\n        } else {\n            toast.error('Failed to send order. Please fill all required data.', {\n                position: \"top-center\",\n                autoClose: 3000,\n                hideProgressBar: true,\n                closeOnClick: true,\n                pauseOnHover: false,\n                draggable: false,\n                progress: undefined,\n                theme: \"colored\",\n            });\n        }\n    };\n\n    return (\n        <>\n            <Header3 />\n            <PageBanner \n                currentPage='Buy Now' \n                breadCrumb={true}\n                category=\"Category Name\" \n                subcategory=\"Subcategory Name\" \n            />\n            <ToastContainer\n                position=\"top-center\"\n                autoClose={3000}\n                hideProgressBar\n                newestOnTop={false}\n                closeOnClick\n                rtl={false}\n                pauseOnFocusLoss={false}\n                draggable={false}\n                pauseOnHover={false}\n                theme=\"colored\"\n            />\n            <section className=\"contact-form-wrapper section-padding pt-0\">\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col-12 text-left mb-20\">\n                            <span>{formTitle}</span>\n                            <h1>{formHeading}</h1>\n                            <h2>{productName && `Buy: ${productName}`}</h2>\n                        </div>\n                        <div className=\"col-12 col-lg-12 pb-4\">\n                            <div className=\"contact-form\" ref={formRef}>\n                                <form onSubmit={onSubmitHandler} className=\"row contact-form\">\n                                    <FormInput\n                                        type=\"text\"\n                                        labelFor=\"contactPerson\"\n                                        label=\"* Name\"\n                                        placeholder=\"Enter Your Name\"\n                                        id=\"contactPerson\"\n                                        name=\"contactPerson\"\n                                    />\n                                    <FormInput\n                                        type=\"email\"\n                                        labelFor=\"email\"\n                                        label=\"* Email\"\n                                        placeholder=\"Enter Your Email\"\n                                        id=\"email\"\n                                        name=\"email\"\n                                    />\n                                    {/* Hidden input for Country */}\n                                    <input\n                                        type=\"hidden\"\n                                        name=\"country\"\n                                        value={location?.country || \"Unknown\"}\n                                    />\n                                    {/* Loading or Error States */}\n                                    {locationLoading && <p>Loading location...</p>}\n                                    {locationError && <p>Error fetching location</p>}\n\n                                    <ReCAPTCHA\n                                        sitekey={process.env.REACT_APP_RECAPTCHA_KEY}\n                                        onChange={() => setVerified(true)}\n                                    />\n                                    <div className=\"col-md-12 col-12 text-center pt-2\">\n                                        <input\n                                            className=\"submit-btn\"\n                                            type=\"submit\"\n                                            value=\"Submit\"\n                                            disabled={!verified}\n                                        />\n                                    </div>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </section>\n            <Footer3 />\n        </>\n    );\n}\n\nexport default BuyForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}