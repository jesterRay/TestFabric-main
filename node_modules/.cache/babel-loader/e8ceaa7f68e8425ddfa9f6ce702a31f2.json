{"ast":null,"code":"'use strict';\n\nvar Fx = require('../../components/fx');\nvar Lib = require('../../lib');\nvar isArrayOrTypedArray = Lib.isArrayOrTypedArray;\nvar Axes = require('../../plots/cartesian/axes');\nvar extractOpts = require('../../components/colorscale').extractOpts;\nmodule.exports = function hoverPoints(pointData, xval, yval, hovermode, opts) {\n  if (!opts) opts = {};\n  var isContour = opts.isContour;\n  var cd0 = pointData.cd[0];\n  var trace = cd0.trace;\n  var xa = pointData.xa;\n  var ya = pointData.ya;\n  var x = cd0.x;\n  var y = cd0.y;\n  var z = cd0.z;\n  var xc = cd0.xCenter;\n  var yc = cd0.yCenter;\n  var zmask = cd0.zmask;\n  var zhoverformat = trace.zhoverformat;\n  var x2 = x;\n  var y2 = y;\n  var xl, yl, nx, ny;\n  if (pointData.index !== false) {\n    try {\n      nx = Math.round(pointData.index[1]);\n      ny = Math.round(pointData.index[0]);\n    } catch (e) {\n      Lib.error('Error hovering on heatmap, ' + 'pointNumber must be [row,col], found:', pointData.index);\n      return;\n    }\n    if (nx < 0 || nx >= z[0].length || ny < 0 || ny > z.length) {\n      return;\n    }\n  } else if (Fx.inbox(xval - x[0], xval - x[x.length - 1], 0) > 0 || Fx.inbox(yval - y[0], yval - y[y.length - 1], 0) > 0) {\n    return;\n  } else {\n    if (isContour) {\n      var i2;\n      x2 = [2 * x[0] - x[1]];\n      for (i2 = 1; i2 < x.length; i2++) {\n        x2.push((x[i2] + x[i2 - 1]) / 2);\n      }\n      x2.push([2 * x[x.length - 1] - x[x.length - 2]]);\n      y2 = [2 * y[0] - y[1]];\n      for (i2 = 1; i2 < y.length; i2++) {\n        y2.push((y[i2] + y[i2 - 1]) / 2);\n      }\n      y2.push([2 * y[y.length - 1] - y[y.length - 2]]);\n    }\n    nx = Math.max(0, Math.min(x2.length - 2, Lib.findBin(xval, x2)));\n    ny = Math.max(0, Math.min(y2.length - 2, Lib.findBin(yval, y2)));\n  }\n  var x0 = xa.c2p(x[nx]);\n  var x1 = xa.c2p(x[nx + 1]);\n  var y0 = ya.c2p(y[ny]);\n  var y1 = ya.c2p(y[ny + 1]);\n  var _x, _y;\n  if (isContour) {\n    _x = cd0.orig_x || x;\n    _y = cd0.orig_y || y;\n    x1 = x0;\n    xl = _x[nx];\n    y1 = y0;\n    yl = _y[ny];\n  } else {\n    _x = cd0.orig_x || xc || x;\n    _y = cd0.orig_y || yc || y;\n    xl = xc ? _x[nx] : (_x[nx] + _x[nx + 1]) / 2;\n    yl = yc ? _y[ny] : (_y[ny] + _y[ny + 1]) / 2;\n    if (xa && xa.type === 'category') xl = x[nx];\n    if (ya && ya.type === 'category') yl = y[ny];\n    if (trace.zsmooth) {\n      x0 = x1 = xa.c2p(xl);\n      y0 = y1 = ya.c2p(yl);\n    }\n  }\n  var zVal = z[ny][nx];\n  if (zmask && !zmask[ny][nx]) zVal = undefined;\n  if (zVal === undefined && !trace.hoverongaps) return;\n  var text;\n  if (isArrayOrTypedArray(cd0.hovertext) && isArrayOrTypedArray(cd0.hovertext[ny])) {\n    text = cd0.hovertext[ny][nx];\n  } else if (isArrayOrTypedArray(cd0.text) && isArrayOrTypedArray(cd0.text[ny])) {\n    text = cd0.text[ny][nx];\n  }\n\n  // dummy axis for formatting the z value\n  var cOpts = extractOpts(trace);\n  var dummyAx = {\n    type: 'linear',\n    range: [cOpts.min, cOpts.max],\n    hoverformat: zhoverformat,\n    _separators: xa._separators,\n    _numFormat: xa._numFormat\n  };\n  var zLabel = Axes.tickText(dummyAx, zVal, 'hover').text;\n  return [Lib.extendFlat(pointData, {\n    index: trace._after2before ? trace._after2before[ny][nx] : [ny, nx],\n    // never let a 2D override 1D type as closest point\n    distance: pointData.maxHoverDistance,\n    spikeDistance: pointData.maxSpikeDistance,\n    x0: x0,\n    x1: x1,\n    y0: y0,\n    y1: y1,\n    xLabelVal: xl,\n    yLabelVal: yl,\n    zLabelVal: zVal,\n    zLabel: zLabel,\n    text: text\n  })];\n};","map":{"version":3,"names":["Fx","require","Lib","isArrayOrTypedArray","Axes","extractOpts","module","exports","hoverPoints","pointData","xval","yval","hovermode","opts","isContour","cd0","cd","trace","xa","ya","x","y","z","xc","xCenter","yc","yCenter","zmask","zhoverformat","x2","y2","xl","yl","nx","ny","index","Math","round","e","error","length","inbox","i2","push","max","min","findBin","x0","c2p","x1","y0","y1","_x","_y","orig_x","orig_y","type","zsmooth","zVal","undefined","hoverongaps","text","hovertext","cOpts","dummyAx","range","hoverformat","_separators","_numFormat","zLabel","tickText","extendFlat","_after2before","distance","maxHoverDistance","spikeDistance","maxSpikeDistance","xLabelVal","yLabelVal","zLabelVal"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/traces/heatmap/hover.js"],"sourcesContent":["'use strict';\n\nvar Fx = require('../../components/fx');\nvar Lib = require('../../lib');\nvar isArrayOrTypedArray = Lib.isArrayOrTypedArray;\nvar Axes = require('../../plots/cartesian/axes');\nvar extractOpts = require('../../components/colorscale').extractOpts;\n\nmodule.exports = function hoverPoints(pointData, xval, yval, hovermode, opts) {\n    if(!opts) opts = {};\n    var isContour = opts.isContour;\n\n    var cd0 = pointData.cd[0];\n    var trace = cd0.trace;\n    var xa = pointData.xa;\n    var ya = pointData.ya;\n    var x = cd0.x;\n    var y = cd0.y;\n    var z = cd0.z;\n    var xc = cd0.xCenter;\n    var yc = cd0.yCenter;\n    var zmask = cd0.zmask;\n    var zhoverformat = trace.zhoverformat;\n    var x2 = x;\n    var y2 = y;\n\n    var xl, yl, nx, ny;\n\n    if(pointData.index !== false) {\n        try {\n            nx = Math.round(pointData.index[1]);\n            ny = Math.round(pointData.index[0]);\n        } catch(e) {\n            Lib.error('Error hovering on heatmap, ' +\n                'pointNumber must be [row,col], found:', pointData.index);\n            return;\n        }\n        if(nx < 0 || nx >= z[0].length || ny < 0 || ny > z.length) {\n            return;\n        }\n    } else if(Fx.inbox(xval - x[0], xval - x[x.length - 1], 0) > 0 ||\n            Fx.inbox(yval - y[0], yval - y[y.length - 1], 0) > 0) {\n        return;\n    } else {\n        if(isContour) {\n            var i2;\n            x2 = [2 * x[0] - x[1]];\n\n            for(i2 = 1; i2 < x.length; i2++) {\n                x2.push((x[i2] + x[i2 - 1]) / 2);\n            }\n            x2.push([2 * x[x.length - 1] - x[x.length - 2]]);\n\n            y2 = [2 * y[0] - y[1]];\n            for(i2 = 1; i2 < y.length; i2++) {\n                y2.push((y[i2] + y[i2 - 1]) / 2);\n            }\n            y2.push([2 * y[y.length - 1] - y[y.length - 2]]);\n        }\n        nx = Math.max(0, Math.min(x2.length - 2, Lib.findBin(xval, x2)));\n        ny = Math.max(0, Math.min(y2.length - 2, Lib.findBin(yval, y2)));\n    }\n\n    var x0 = xa.c2p(x[nx]);\n    var x1 = xa.c2p(x[nx + 1]);\n    var y0 = ya.c2p(y[ny]);\n    var y1 = ya.c2p(y[ny + 1]);\n\n    var _x, _y;\n    if(isContour) {\n        _x = cd0.orig_x || x;\n        _y = cd0.orig_y || y;\n\n        x1 = x0;\n        xl = _x[nx];\n        y1 = y0;\n        yl = _y[ny];\n    } else {\n        _x = cd0.orig_x || xc || x;\n        _y = cd0.orig_y || yc || y;\n\n        xl = xc ? _x[nx] : ((_x[nx] + _x[nx + 1]) / 2);\n        yl = yc ? _y[ny] : ((_y[ny] + _y[ny + 1]) / 2);\n\n        if(xa && xa.type === 'category') xl = x[nx];\n        if(ya && ya.type === 'category') yl = y[ny];\n\n        if(trace.zsmooth) {\n            x0 = x1 = xa.c2p(xl);\n            y0 = y1 = ya.c2p(yl);\n        }\n    }\n\n    var zVal = z[ny][nx];\n    if(zmask && !zmask[ny][nx]) zVal = undefined;\n\n    if(zVal === undefined && !trace.hoverongaps) return;\n\n    var text;\n    if(isArrayOrTypedArray(cd0.hovertext) && isArrayOrTypedArray(cd0.hovertext[ny])) {\n        text = cd0.hovertext[ny][nx];\n    } else if(isArrayOrTypedArray(cd0.text) && isArrayOrTypedArray(cd0.text[ny])) {\n        text = cd0.text[ny][nx];\n    }\n\n    // dummy axis for formatting the z value\n    var cOpts = extractOpts(trace);\n    var dummyAx = {\n        type: 'linear',\n        range: [cOpts.min, cOpts.max],\n        hoverformat: zhoverformat,\n        _separators: xa._separators,\n        _numFormat: xa._numFormat\n    };\n    var zLabel = Axes.tickText(dummyAx, zVal, 'hover').text;\n\n    return [Lib.extendFlat(pointData, {\n        index: trace._after2before ? trace._after2before[ny][nx] : [ny, nx],\n        // never let a 2D override 1D type as closest point\n        distance: pointData.maxHoverDistance,\n        spikeDistance: pointData.maxSpikeDistance,\n        x0: x0,\n        x1: x1,\n        y0: y0,\n        y1: y1,\n        xLabelVal: xl,\n        yLabelVal: yl,\n        zLabelVal: zVal,\n        zLabel: zLabel,\n        text: text\n    })];\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}