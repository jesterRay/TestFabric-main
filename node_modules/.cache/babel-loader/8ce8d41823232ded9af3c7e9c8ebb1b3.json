{"ast":null,"code":"'use strict';\n\nvar isNumeric = require('fast-isnumeric');\nvar Lib = require('../../lib');\nmodule.exports = function handlePositionDefaults(containerIn, containerOut, coerce, options) {\n  var counterAxes = options.counterAxes || [];\n  var overlayableAxes = options.overlayableAxes || [];\n  var letter = options.letter;\n  var grid = options.grid;\n  var overlayingDomain = options.overlayingDomain;\n  var dfltAnchor, dfltDomain, dfltSide, dfltPosition, dfltShift, dfltAutomargin;\n  if (grid) {\n    dfltDomain = grid._domains[letter][grid._axisMap[containerOut._id]];\n    dfltAnchor = grid._anchors[containerOut._id];\n    if (dfltDomain) {\n      dfltSide = grid[letter + 'side'].split(' ')[0];\n      dfltPosition = grid.domain[letter][dfltSide === 'right' || dfltSide === 'top' ? 1 : 0];\n    }\n  }\n\n  // Even if there's a grid, this axis may not be in it - fall back on non-grid defaults\n  dfltDomain = dfltDomain || [0, 1];\n  dfltAnchor = dfltAnchor || (isNumeric(containerIn.position) ? 'free' : counterAxes[0] || 'free');\n  dfltSide = dfltSide || (letter === 'x' ? 'bottom' : 'left');\n  dfltPosition = dfltPosition || 0;\n  dfltShift = 0;\n  dfltAutomargin = false;\n  var anchor = Lib.coerce(containerIn, containerOut, {\n    anchor: {\n      valType: 'enumerated',\n      values: ['free'].concat(counterAxes),\n      dflt: dfltAnchor\n    }\n  }, 'anchor');\n  var side = Lib.coerce(containerIn, containerOut, {\n    side: {\n      valType: 'enumerated',\n      values: letter === 'x' ? ['bottom', 'top'] : ['left', 'right'],\n      dflt: dfltSide\n    }\n  }, 'side');\n  if (anchor === 'free') {\n    if (letter === 'y') {\n      var autoshift = coerce('autoshift');\n      if (autoshift) {\n        dfltPosition = side === 'left' ? overlayingDomain[0] : overlayingDomain[1];\n        dfltAutomargin = containerOut.automargin ? containerOut.automargin : true;\n        dfltShift = side === 'left' ? -3 : 3;\n      }\n      coerce('shift', dfltShift);\n    }\n    coerce('position', dfltPosition);\n  }\n  coerce('automargin', dfltAutomargin);\n  var overlaying = false;\n  if (overlayableAxes.length) {\n    overlaying = Lib.coerce(containerIn, containerOut, {\n      overlaying: {\n        valType: 'enumerated',\n        values: [false].concat(overlayableAxes),\n        dflt: false\n      }\n    }, 'overlaying');\n  }\n  if (!overlaying) {\n    // TODO: right now I'm copying this domain over to overlaying axes\n    // in ax.setscale()... but this means we still need (imperfect) logic\n    // in the axes popover to hide domain for the overlaying axis.\n    // perhaps I should make a private version _domain that all axes get???\n    var domain = coerce('domain', dfltDomain);\n\n    // according to https://www.npmjs.com/package/canvas-size\n    // the minimum value of max canvas width across browsers and devices is 4096\n    // which applied in the calculation below:\n    if (domain[0] > domain[1] - 1 / 4096) containerOut.domain = dfltDomain;\n    Lib.noneOrAll(containerIn.domain, containerOut.domain, dfltDomain);\n\n    // tickmode sync needs an overlaying axis, otherwise\n    // we should default it to 'auto'\n    if (containerOut.tickmode === 'sync') {\n      containerOut.tickmode = 'auto';\n    }\n  }\n  coerce('layer');\n  return containerOut;\n};","map":{"version":3,"names":["isNumeric","require","Lib","module","exports","handlePositionDefaults","containerIn","containerOut","coerce","options","counterAxes","overlayableAxes","letter","grid","overlayingDomain","dfltAnchor","dfltDomain","dfltSide","dfltPosition","dfltShift","dfltAutomargin","_domains","_axisMap","_id","_anchors","split","domain","position","anchor","valType","values","concat","dflt","side","autoshift","automargin","overlaying","length","noneOrAll","tickmode"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/plots/cartesian/position_defaults.js"],"sourcesContent":["'use strict';\n\nvar isNumeric = require('fast-isnumeric');\n\nvar Lib = require('../../lib');\n\n\nmodule.exports = function handlePositionDefaults(containerIn, containerOut, coerce, options) {\n    var counterAxes = options.counterAxes || [];\n    var overlayableAxes = options.overlayableAxes || [];\n    var letter = options.letter;\n    var grid = options.grid;\n    var overlayingDomain = options.overlayingDomain;\n    var dfltAnchor, dfltDomain, dfltSide, dfltPosition, dfltShift, dfltAutomargin;\n\n    if(grid) {\n        dfltDomain = grid._domains[letter][grid._axisMap[containerOut._id]];\n        dfltAnchor = grid._anchors[containerOut._id];\n        if(dfltDomain) {\n            dfltSide = grid[letter + 'side'].split(' ')[0];\n            dfltPosition = grid.domain[letter][dfltSide === 'right' || dfltSide === 'top' ? 1 : 0];\n        }\n    }\n\n    // Even if there's a grid, this axis may not be in it - fall back on non-grid defaults\n    dfltDomain = dfltDomain || [0, 1];\n    dfltAnchor = dfltAnchor || (isNumeric(containerIn.position) ? 'free' : (counterAxes[0] || 'free'));\n    dfltSide = dfltSide || (letter === 'x' ? 'bottom' : 'left');\n    dfltPosition = dfltPosition || 0;\n    dfltShift = 0;\n    dfltAutomargin = false;\n\n    var anchor = Lib.coerce(containerIn, containerOut, {\n        anchor: {\n            valType: 'enumerated',\n            values: ['free'].concat(counterAxes),\n            dflt: dfltAnchor\n        }\n    }, 'anchor');\n\n    var side = Lib.coerce(containerIn, containerOut, {\n        side: {\n            valType: 'enumerated',\n            values: letter === 'x' ? ['bottom', 'top'] : ['left', 'right'],\n            dflt: dfltSide\n        }\n    }, 'side');\n\n    if(anchor === 'free') {\n        if(letter === 'y') {\n            var autoshift = coerce('autoshift');\n            if(autoshift) {\n                dfltPosition = side === 'left' ? overlayingDomain[0] : overlayingDomain[1];\n                dfltAutomargin = containerOut.automargin ? containerOut.automargin : true;\n                dfltShift = side === 'left' ? -3 : 3;\n            }\n            coerce('shift', dfltShift);\n        }\n        coerce('position', dfltPosition);\n    }\n    coerce('automargin', dfltAutomargin);\n\n    var overlaying = false;\n    if(overlayableAxes.length) {\n        overlaying = Lib.coerce(containerIn, containerOut, {\n            overlaying: {\n                valType: 'enumerated',\n                values: [false].concat(overlayableAxes),\n                dflt: false\n            }\n        }, 'overlaying');\n    }\n\n    if(!overlaying) {\n        // TODO: right now I'm copying this domain over to overlaying axes\n        // in ax.setscale()... but this means we still need (imperfect) logic\n        // in the axes popover to hide domain for the overlaying axis.\n        // perhaps I should make a private version _domain that all axes get???\n        var domain = coerce('domain', dfltDomain);\n\n        // according to https://www.npmjs.com/package/canvas-size\n        // the minimum value of max canvas width across browsers and devices is 4096\n        // which applied in the calculation below:\n        if(domain[0] > domain[1] - 1 / 4096) containerOut.domain = dfltDomain;\n        Lib.noneOrAll(containerIn.domain, containerOut.domain, dfltDomain);\n\n        // tickmode sync needs an overlaying axis, otherwise\n        // we should default it to 'auto'\n        if(containerOut.tickmode === 'sync') {\n            containerOut.tickmode = 'auto';\n        }\n    }\n\n    coerce('layer');\n\n    return containerOut;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}