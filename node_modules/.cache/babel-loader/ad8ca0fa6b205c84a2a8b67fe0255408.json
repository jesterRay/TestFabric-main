{"ast":null,"code":"'use strict';\n\nvar hoverLabelText = require('../../plots/cartesian/axes').hoverLabelText;\nvar opacity = require('../../components/color').opacity;\nvar hoverOnBars = require('../bar/hover').hoverOnBars;\nvar delta = require('../../constants/delta.js');\nvar DIRSYMBOL = {\n  increasing: delta.INCREASING.SYMBOL,\n  decreasing: delta.DECREASING.SYMBOL\n};\nmodule.exports = function hoverPoints(pointData, xval, yval, hovermode, opts) {\n  var point = hoverOnBars(pointData, xval, yval, hovermode, opts);\n  if (!point) return;\n  var cd = point.cd;\n  var trace = cd[0].trace;\n  var isHorizontal = trace.orientation === 'h';\n  var vLetter = isHorizontal ? 'x' : 'y';\n  var vAxis = isHorizontal ? pointData.xa : pointData.ya;\n  function formatNumber(a) {\n    return hoverLabelText(vAxis, a, trace[vLetter + 'hoverformat']);\n  }\n\n  // the closest data point\n  var index = point.index;\n  var di = cd[index];\n  var size = di.isSum ? di.b + di.s : di.rawS;\n  point.initial = di.b + di.s - size;\n  point.delta = size;\n  point.final = point.initial + point.delta;\n  var v = formatNumber(Math.abs(point.delta));\n  point.deltaLabel = size < 0 ? '(' + v + ')' : v;\n  point.finalLabel = formatNumber(point.final);\n  point.initialLabel = formatNumber(point.initial);\n  var hoverinfo = di.hi || trace.hoverinfo;\n  var text = [];\n  if (hoverinfo && hoverinfo !== 'none' && hoverinfo !== 'skip') {\n    var isAll = hoverinfo === 'all';\n    var parts = hoverinfo.split('+');\n    var hasFlag = function (flag) {\n      return isAll || parts.indexOf(flag) !== -1;\n    };\n    if (!di.isSum) {\n      if (hasFlag('final') && (isHorizontal ? !hasFlag('x') : !hasFlag('y')) // don't display redundant info.\n      ) {\n        text.push(point.finalLabel);\n      }\n      if (hasFlag('delta')) {\n        if (size < 0) {\n          text.push(point.deltaLabel + ' ' + DIRSYMBOL.decreasing);\n        } else {\n          text.push(point.deltaLabel + ' ' + DIRSYMBOL.increasing);\n        }\n      }\n      if (hasFlag('initial')) {\n        text.push('Initial: ' + point.initialLabel);\n      }\n    }\n  }\n  if (text.length) point.extraText = text.join('<br>');\n  point.color = getTraceColor(trace, di);\n  return [point];\n};\nfunction getTraceColor(trace, di) {\n  var cont = trace[di.dir].marker;\n  var mc = cont.color;\n  var mlc = cont.line.color;\n  var mlw = cont.line.width;\n  if (opacity(mc)) return mc;else if (opacity(mlc) && mlw) return mlc;\n}","map":{"version":3,"names":["hoverLabelText","require","opacity","hoverOnBars","delta","DIRSYMBOL","increasing","INCREASING","SYMBOL","decreasing","DECREASING","module","exports","hoverPoints","pointData","xval","yval","hovermode","opts","point","cd","trace","isHorizontal","orientation","vLetter","vAxis","xa","ya","formatNumber","a","index","di","size","isSum","b","s","rawS","initial","final","v","Math","abs","deltaLabel","finalLabel","initialLabel","hoverinfo","hi","text","isAll","parts","split","hasFlag","flag","indexOf","push","length","extraText","join","color","getTraceColor","cont","dir","marker","mc","mlc","line","mlw","width"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/traces/waterfall/hover.js"],"sourcesContent":["'use strict';\n\nvar hoverLabelText = require('../../plots/cartesian/axes').hoverLabelText;\nvar opacity = require('../../components/color').opacity;\nvar hoverOnBars = require('../bar/hover').hoverOnBars;\nvar delta = require('../../constants/delta.js');\n\nvar DIRSYMBOL = {\n    increasing: delta.INCREASING.SYMBOL,\n    decreasing: delta.DECREASING.SYMBOL\n};\n\nmodule.exports = function hoverPoints(pointData, xval, yval, hovermode, opts) {\n    var point = hoverOnBars(pointData, xval, yval, hovermode, opts);\n    if(!point) return;\n\n    var cd = point.cd;\n    var trace = cd[0].trace;\n    var isHorizontal = (trace.orientation === 'h');\n\n    var vLetter = isHorizontal ? 'x' : 'y';\n    var vAxis = isHorizontal ? pointData.xa : pointData.ya;\n\n    function formatNumber(a) {\n        return hoverLabelText(vAxis, a, trace[vLetter + 'hoverformat']);\n    }\n\n    // the closest data point\n    var index = point.index;\n    var di = cd[index];\n\n    var size = (di.isSum) ? di.b + di.s : di.rawS;\n\n    point.initial = di.b + di.s - size;\n    point.delta = size;\n    point.final = point.initial + point.delta;\n\n    var v = formatNumber(Math.abs(point.delta));\n    point.deltaLabel = size < 0 ? '(' + v + ')' : v;\n    point.finalLabel = formatNumber(point.final);\n    point.initialLabel = formatNumber(point.initial);\n\n    var hoverinfo = di.hi || trace.hoverinfo;\n    var text = [];\n    if(hoverinfo && hoverinfo !== 'none' && hoverinfo !== 'skip') {\n        var isAll = (hoverinfo === 'all');\n        var parts = hoverinfo.split('+');\n\n        var hasFlag = function(flag) { return isAll || parts.indexOf(flag) !== -1; };\n\n        if(!di.isSum) {\n            if(hasFlag('final') &&\n                (isHorizontal ? !hasFlag('x') : !hasFlag('y')) // don't display redundant info.\n            ) {\n                text.push(point.finalLabel);\n            }\n            if(hasFlag('delta')) {\n                if(size < 0) {\n                    text.push(point.deltaLabel + ' ' + DIRSYMBOL.decreasing);\n                } else {\n                    text.push(point.deltaLabel + ' ' + DIRSYMBOL.increasing);\n                }\n            }\n            if(hasFlag('initial')) {\n                text.push('Initial: ' + point.initialLabel);\n            }\n        }\n    }\n\n    if(text.length) point.extraText = text.join('<br>');\n\n    point.color = getTraceColor(trace, di);\n\n    return [point];\n};\n\nfunction getTraceColor(trace, di) {\n    var cont = trace[di.dir].marker;\n    var mc = cont.color;\n    var mlc = cont.line.color;\n    var mlw = cont.line.width;\n    if(opacity(mc)) return mc;\n    else if(opacity(mlc) && mlw) return mlc;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}