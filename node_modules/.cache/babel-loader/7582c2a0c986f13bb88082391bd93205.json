{"ast":null,"code":"'use strict';\n\nvar Lib = require('../../lib');\nvar Axes = require('../../plots/cartesian/axes');\nvar handleArrayContainerDefaults = require('../../plots/array_container_defaults');\nvar attributes = require('./attributes');\nvar helpers = require('../shapes/helpers');\nmodule.exports = function supplyLayoutDefaults(layoutIn, layoutOut) {\n  handleArrayContainerDefaults(layoutIn, layoutOut, {\n    name: 'selections',\n    handleItemDefaults: handleSelectionDefaults\n  });\n\n  // Drop rect selections with undefined x0, y0, x1, x1 values.\n  // In future we may accept partially defined rects e.g.\n  // a case with only x0 and x1 may be used to define\n  // [-Infinity, +Infinity] range on the y axis, etc.\n  var selections = layoutOut.selections;\n  for (var i = 0; i < selections.length; i++) {\n    var selection = selections[i];\n    if (!selection) continue;\n    if (selection.path === undefined) {\n      if (selection.x0 === undefined || selection.x1 === undefined || selection.y0 === undefined || selection.y1 === undefined) {\n        layoutOut.selections[i] = null;\n      }\n    }\n  }\n};\nfunction handleSelectionDefaults(selectionIn, selectionOut, fullLayout) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(selectionIn, selectionOut, attributes, attr, dflt);\n  }\n  var path = coerce('path');\n  var dfltType = path ? 'path' : 'rect';\n  var selectionType = coerce('type', dfltType);\n  var noPath = selectionType !== 'path';\n  if (noPath) delete selectionOut.path;\n  coerce('opacity');\n  coerce('line.color');\n  coerce('line.width');\n  coerce('line.dash');\n\n  // positioning\n  var axLetters = ['x', 'y'];\n  for (var i = 0; i < 2; i++) {\n    var axLetter = axLetters[i];\n    var gdMock = {\n      _fullLayout: fullLayout\n    };\n    var ax;\n    var pos2r;\n    var r2pos;\n\n    // xref, yref\n    var axRef = Axes.coerceRef(selectionIn, selectionOut, gdMock, axLetter);\n\n    // axRefType is 'range' for selections\n    ax = Axes.getFromId(gdMock, axRef);\n    ax._selectionIndices.push(selectionOut._index);\n    r2pos = helpers.rangeToShapePosition(ax);\n    pos2r = helpers.shapePositionToRange(ax);\n\n    // Coerce x0, x1, y0, y1\n    if (noPath) {\n      // hack until V3.0 when log has regular range behavior - make it look like other\n      // ranges to send to coerce, then put it back after\n      // this is all to give reasonable default position behavior on log axes, which is\n      // a pretty unimportant edge case so we could just ignore this.\n      var attr0 = axLetter + '0';\n      var attr1 = axLetter + '1';\n      var in0 = selectionIn[attr0];\n      var in1 = selectionIn[attr1];\n      selectionIn[attr0] = pos2r(selectionIn[attr0], true);\n      selectionIn[attr1] = pos2r(selectionIn[attr1], true);\n      Axes.coercePosition(selectionOut, gdMock, coerce, axRef, attr0);\n      Axes.coercePosition(selectionOut, gdMock, coerce, axRef, attr1);\n      var p0 = selectionOut[attr0];\n      var p1 = selectionOut[attr1];\n      if (p0 !== undefined && p1 !== undefined) {\n        // hack part 2\n        selectionOut[attr0] = r2pos(p0);\n        selectionOut[attr1] = r2pos(p1);\n        selectionIn[attr0] = in0;\n        selectionIn[attr1] = in1;\n      }\n    }\n  }\n  if (noPath) {\n    Lib.noneOrAll(selectionIn, selectionOut, ['x0', 'x1', 'y0', 'y1']);\n  }\n}","map":{"version":3,"names":["Lib","require","Axes","handleArrayContainerDefaults","attributes","helpers","module","exports","supplyLayoutDefaults","layoutIn","layoutOut","name","handleItemDefaults","handleSelectionDefaults","selections","i","length","selection","path","undefined","x0","x1","y0","y1","selectionIn","selectionOut","fullLayout","coerce","attr","dflt","dfltType","selectionType","noPath","axLetters","axLetter","gdMock","_fullLayout","ax","pos2r","r2pos","axRef","coerceRef","getFromId","_selectionIndices","push","_index","rangeToShapePosition","shapePositionToRange","attr0","attr1","in0","in1","coercePosition","p0","p1","noneOrAll"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/components/selections/defaults.js"],"sourcesContent":["'use strict';\n\nvar Lib = require('../../lib');\nvar Axes = require('../../plots/cartesian/axes');\nvar handleArrayContainerDefaults = require('../../plots/array_container_defaults');\n\nvar attributes = require('./attributes');\nvar helpers = require('../shapes/helpers');\n\nmodule.exports = function supplyLayoutDefaults(layoutIn, layoutOut) {\n    handleArrayContainerDefaults(layoutIn, layoutOut, {\n        name: 'selections',\n        handleItemDefaults: handleSelectionDefaults\n    });\n\n    // Drop rect selections with undefined x0, y0, x1, x1 values.\n    // In future we may accept partially defined rects e.g.\n    // a case with only x0 and x1 may be used to define\n    // [-Infinity, +Infinity] range on the y axis, etc.\n    var selections = layoutOut.selections;\n    for(var i = 0; i < selections.length; i++) {\n        var selection = selections[i];\n        if(!selection) continue;\n        if(selection.path === undefined) {\n            if(\n                selection.x0 === undefined ||\n                selection.x1 === undefined ||\n                selection.y0 === undefined ||\n                selection.y1 === undefined\n            ) {\n                layoutOut.selections[i] = null;\n            }\n        }\n    }\n};\n\nfunction handleSelectionDefaults(selectionIn, selectionOut, fullLayout) {\n    function coerce(attr, dflt) {\n        return Lib.coerce(selectionIn, selectionOut, attributes, attr, dflt);\n    }\n\n    var path = coerce('path');\n    var dfltType = path ? 'path' : 'rect';\n    var selectionType = coerce('type', dfltType);\n    var noPath = selectionType !== 'path';\n    if(noPath) delete selectionOut.path;\n\n    coerce('opacity');\n    coerce('line.color');\n    coerce('line.width');\n    coerce('line.dash');\n\n    // positioning\n    var axLetters = ['x', 'y'];\n    for(var i = 0; i < 2; i++) {\n        var axLetter = axLetters[i];\n        var gdMock = {_fullLayout: fullLayout};\n        var ax;\n        var pos2r;\n        var r2pos;\n\n        // xref, yref\n        var axRef = Axes.coerceRef(selectionIn, selectionOut, gdMock, axLetter);\n\n        // axRefType is 'range' for selections\n        ax = Axes.getFromId(gdMock, axRef);\n        ax._selectionIndices.push(selectionOut._index);\n        r2pos = helpers.rangeToShapePosition(ax);\n        pos2r = helpers.shapePositionToRange(ax);\n\n        // Coerce x0, x1, y0, y1\n        if(noPath) {\n            // hack until V3.0 when log has regular range behavior - make it look like other\n            // ranges to send to coerce, then put it back after\n            // this is all to give reasonable default position behavior on log axes, which is\n            // a pretty unimportant edge case so we could just ignore this.\n            var attr0 = axLetter + '0';\n            var attr1 = axLetter + '1';\n            var in0 = selectionIn[attr0];\n            var in1 = selectionIn[attr1];\n            selectionIn[attr0] = pos2r(selectionIn[attr0], true);\n            selectionIn[attr1] = pos2r(selectionIn[attr1], true);\n\n            Axes.coercePosition(selectionOut, gdMock, coerce, axRef, attr0);\n            Axes.coercePosition(selectionOut, gdMock, coerce, axRef, attr1);\n\n            var p0 = selectionOut[attr0];\n            var p1 = selectionOut[attr1];\n\n            if(p0 !== undefined && p1 !== undefined) {\n                // hack part 2\n                selectionOut[attr0] = r2pos(p0);\n                selectionOut[attr1] = r2pos(p1);\n                selectionIn[attr0] = in0;\n                selectionIn[attr1] = in1;\n            }\n        }\n    }\n\n    if(noPath) {\n        Lib.noneOrAll(selectionIn, selectionOut, ['x0', 'x1', 'y0', 'y1']);\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}