{"ast":null,"code":"'use strict';\n\nvar mapboxgl = require('@plotly/mapbox-gl/dist/mapbox-gl-unminified');\nvar Lib = require('../../lib');\nvar strTranslate = Lib.strTranslate;\nvar strScale = Lib.strScale;\nvar getSubplotCalcData = require('../../plots/get_data').getSubplotCalcData;\nvar xmlnsNamespaces = require('../../constants/xmlns_namespaces');\nvar d3 = require('@plotly/d3');\nvar Drawing = require('../../components/drawing');\nvar svgTextUtils = require('../../lib/svg_text_utils');\nvar Mapbox = require('./mapbox');\nvar MAPBOX = 'mapbox';\nvar constants = exports.constants = require('./constants');\nexports.name = MAPBOX;\nexports.attr = 'subplot';\nexports.idRoot = MAPBOX;\nexports.idRegex = exports.attrRegex = Lib.counterRegex(MAPBOX);\nvar deprecationWarning = ['mapbox subplots and traces are deprecated!', 'Please consider switching to `map` subplots and traces.', 'Learn more at: https://plotly.com/javascript/maplibre-migration/'].join(' ');\nexports.attributes = {\n  subplot: {\n    valType: 'subplotid',\n    dflt: 'mapbox',\n    editType: 'calc',\n    description: [deprecationWarning, 'Sets a reference between this trace\\'s data coordinates and', 'a mapbox subplot.', 'If *mapbox* (the default value), the data refer to `layout.mapbox`.', 'If *mapbox2*, the data refer to `layout.mapbox2`, and so on.'].join(' ')\n  }\n};\nexports.layoutAttributes = require('./layout_attributes');\nexports.supplyLayoutDefaults = require('./layout_defaults');\nvar firstPlot = true;\nexports.plot = function plot(gd) {\n  if (firstPlot) {\n    firstPlot = false;\n    Lib.warn(deprecationWarning);\n  }\n  var fullLayout = gd._fullLayout;\n  var calcData = gd.calcdata;\n  var mapboxIds = fullLayout._subplots[MAPBOX];\n  if (mapboxgl.version !== constants.requiredVersion) {\n    throw new Error(constants.wrongVersionErrorMsg);\n  }\n  var accessToken = findAccessToken(gd, mapboxIds);\n  mapboxgl.accessToken = accessToken;\n  for (var i = 0; i < mapboxIds.length; i++) {\n    var id = mapboxIds[i];\n    var subplotCalcData = getSubplotCalcData(calcData, MAPBOX, id);\n    var opts = fullLayout[id];\n    var mapbox = opts._subplot;\n    if (!mapbox) {\n      mapbox = new Mapbox(gd, id);\n      fullLayout[id]._subplot = mapbox;\n    }\n    if (!mapbox.viewInitial) {\n      mapbox.viewInitial = {\n        center: Lib.extendFlat({}, opts.center),\n        zoom: opts.zoom,\n        bearing: opts.bearing,\n        pitch: opts.pitch\n      };\n    }\n    mapbox.plot(subplotCalcData, fullLayout, gd._promises);\n  }\n};\nexports.clean = function (newFullData, newFullLayout, oldFullData, oldFullLayout) {\n  var oldMapboxKeys = oldFullLayout._subplots[MAPBOX] || [];\n  for (var i = 0; i < oldMapboxKeys.length; i++) {\n    var oldMapboxKey = oldMapboxKeys[i];\n    if (!newFullLayout[oldMapboxKey] && !!oldFullLayout[oldMapboxKey]._subplot) {\n      oldFullLayout[oldMapboxKey]._subplot.destroy();\n    }\n  }\n};\nexports.toSVG = function (gd) {\n  var fullLayout = gd._fullLayout;\n  var subplotIds = fullLayout._subplots[MAPBOX];\n  var size = fullLayout._size;\n  for (var i = 0; i < subplotIds.length; i++) {\n    var opts = fullLayout[subplotIds[i]];\n    var domain = opts.domain;\n    var mapbox = opts._subplot;\n    var imageData = mapbox.toImage('png');\n    var image = fullLayout._glimages.append('svg:image');\n    image.attr({\n      xmlns: xmlnsNamespaces.svg,\n      'xlink:href': imageData,\n      x: size.l + size.w * domain.x[0],\n      y: size.t + size.h * (1 - domain.y[1]),\n      width: size.w * (domain.x[1] - domain.x[0]),\n      height: size.h * (domain.y[1] - domain.y[0]),\n      preserveAspectRatio: 'none'\n    });\n    var subplotDiv = d3.select(opts._subplot.div);\n\n    // Append logo if visible\n    var hidden = subplotDiv.select('.mapboxgl-ctrl-logo').node().offsetParent === null;\n    if (!hidden) {\n      var logo = fullLayout._glimages.append('g');\n      logo.attr('transform', strTranslate(size.l + size.w * domain.x[0] + 10, size.t + size.h * (1 - domain.y[0]) - 31));\n      logo.append('path').attr('d', constants.mapboxLogo.path0).style({\n        opacity: 0.9,\n        fill: '#ffffff',\n        'enable-background': 'new'\n      });\n      logo.append('path').attr('d', constants.mapboxLogo.path1).style('opacity', 0.35).style('enable-background', 'new');\n      logo.append('path').attr('d', constants.mapboxLogo.path2).style('opacity', 0.35).style('enable-background', 'new');\n      logo.append('polygon').attr('points', constants.mapboxLogo.polygon).style({\n        opacity: 0.9,\n        fill: '#ffffff',\n        'enable-background': 'new'\n      });\n    }\n\n    // Add attributions\n    var attributions = subplotDiv.select('.mapboxgl-ctrl-attrib').text().replace('Improve this map', '');\n    var attributionGroup = fullLayout._glimages.append('g');\n    var attributionText = attributionGroup.append('text');\n    attributionText.text(attributions).classed('static-attribution', true).attr({\n      'font-size': 12,\n      'font-family': 'Arial',\n      color: 'rgba(0, 0, 0, 0.75)',\n      'text-anchor': 'end',\n      'data-unformatted': attributions\n    });\n    var bBox = Drawing.bBox(attributionText.node());\n\n    // Break into multiple lines twice larger than domain\n    var maxWidth = size.w * (domain.x[1] - domain.x[0]);\n    if (bBox.width > maxWidth / 2) {\n      var multilineAttributions = attributions.split('|').join('<br>');\n      attributionText.text(multilineAttributions).attr('data-unformatted', multilineAttributions).call(svgTextUtils.convertToTspans, gd);\n      bBox = Drawing.bBox(attributionText.node());\n    }\n    attributionText.attr('transform', strTranslate(-3, -bBox.height + 8));\n\n    // Draw white rectangle behind text\n    attributionGroup.insert('rect', '.static-attribution').attr({\n      x: -bBox.width - 6,\n      y: -bBox.height - 3,\n      width: bBox.width + 6,\n      height: bBox.height + 3,\n      fill: 'rgba(255, 255, 255, 0.75)'\n    });\n\n    // Scale down if larger than domain\n    var scaleRatio = 1;\n    if (bBox.width + 6 > maxWidth) scaleRatio = maxWidth / (bBox.width + 6);\n    var offset = [size.l + size.w * domain.x[1], size.t + size.h * (1 - domain.y[0])];\n    attributionGroup.attr('transform', strTranslate(offset[0], offset[1]) + strScale(scaleRatio));\n  }\n};\n\n// N.B. mapbox-gl only allows one accessToken to be set per page:\n// https://github.com/mapbox/mapbox-gl-js/issues/6331\nfunction findAccessToken(gd, mapboxIds) {\n  var fullLayout = gd._fullLayout;\n  var context = gd._context;\n\n  // special case for Mapbox Atlas users\n  if (context.mapboxAccessToken === '') return '';\n  var tokensUseful = [];\n  var tokensListed = [];\n  var hasOneSetMapboxStyle = false;\n  var wontWork = false;\n\n  // Take the first token we find in a mapbox subplot.\n  // These default to the context value but may be overridden.\n  for (var i = 0; i < mapboxIds.length; i++) {\n    var opts = fullLayout[mapboxIds[i]];\n    var token = opts.accesstoken;\n    if (isStyleRequireAccessToken(opts.style)) {\n      if (token) {\n        Lib.pushUnique(tokensUseful, token);\n      } else {\n        if (isStyleRequireAccessToken(opts._input.style)) {\n          Lib.error('Uses Mapbox map style, but did not set an access token.');\n          hasOneSetMapboxStyle = true;\n        }\n        wontWork = true;\n      }\n    }\n    if (token) {\n      Lib.pushUnique(tokensListed, token);\n    }\n  }\n  if (wontWork) {\n    var msg = hasOneSetMapboxStyle ? constants.noAccessTokenErrorMsg : constants.missingStyleErrorMsg;\n    Lib.error(msg);\n    throw new Error(msg);\n  }\n  if (tokensUseful.length) {\n    if (tokensUseful.length > 1) {\n      Lib.warn(constants.multipleTokensErrorMsg);\n    }\n    return tokensUseful[0];\n  } else {\n    if (tokensListed.length) {\n      Lib.log(['Listed mapbox access token(s)', tokensListed.join(','), 'but did not use a Mapbox map style, ignoring token(s).'].join(' '));\n    }\n    return '';\n  }\n}\nfunction isStyleRequireAccessToken(s) {\n  return typeof s === 'string' && (constants.styleValuesMapbox.indexOf(s) !== -1 || s.indexOf('mapbox://') === 0 || s.indexOf('stamen') === 0);\n}\nexports.updateFx = function (gd) {\n  var fullLayout = gd._fullLayout;\n  var subplotIds = fullLayout._subplots[MAPBOX];\n  for (var i = 0; i < subplotIds.length; i++) {\n    var subplotObj = fullLayout[subplotIds[i]]._subplot;\n    subplotObj.updateFx(fullLayout);\n  }\n};","map":{"version":3,"names":["mapboxgl","require","Lib","strTranslate","strScale","getSubplotCalcData","xmlnsNamespaces","d3","Drawing","svgTextUtils","Mapbox","MAPBOX","constants","exports","name","attr","idRoot","idRegex","attrRegex","counterRegex","deprecationWarning","join","attributes","subplot","valType","dflt","editType","description","layoutAttributes","supplyLayoutDefaults","firstPlot","plot","gd","warn","fullLayout","_fullLayout","calcData","calcdata","mapboxIds","_subplots","version","requiredVersion","Error","wrongVersionErrorMsg","accessToken","findAccessToken","i","length","id","subplotCalcData","opts","mapbox","_subplot","viewInitial","center","extendFlat","zoom","bearing","pitch","_promises","clean","newFullData","newFullLayout","oldFullData","oldFullLayout","oldMapboxKeys","oldMapboxKey","destroy","toSVG","subplotIds","size","_size","domain","imageData","toImage","image","_glimages","append","xmlns","svg","x","l","w","y","t","h","width","height","preserveAspectRatio","subplotDiv","select","div","hidden","node","offsetParent","logo","mapboxLogo","path0","style","opacity","fill","path1","path2","polygon","attributions","text","replace","attributionGroup","attributionText","classed","color","bBox","maxWidth","multilineAttributions","split","call","convertToTspans","insert","scaleRatio","offset","context","_context","mapboxAccessToken","tokensUseful","tokensListed","hasOneSetMapboxStyle","wontWork","token","accesstoken","isStyleRequireAccessToken","pushUnique","_input","error","msg","noAccessTokenErrorMsg","missingStyleErrorMsg","multipleTokensErrorMsg","log","s","styleValuesMapbox","indexOf","updateFx","subplotObj"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/plots/mapbox/index.js"],"sourcesContent":["'use strict';\n\nvar mapboxgl = require('@plotly/mapbox-gl/dist/mapbox-gl-unminified');\n\nvar Lib = require('../../lib');\nvar strTranslate = Lib.strTranslate;\nvar strScale = Lib.strScale;\nvar getSubplotCalcData = require('../../plots/get_data').getSubplotCalcData;\nvar xmlnsNamespaces = require('../../constants/xmlns_namespaces');\nvar d3 = require('@plotly/d3');\nvar Drawing = require('../../components/drawing');\nvar svgTextUtils = require('../../lib/svg_text_utils');\n\nvar Mapbox = require('./mapbox');\n\nvar MAPBOX = 'mapbox';\n\nvar constants = exports.constants = require('./constants');\n\nexports.name = MAPBOX;\n\nexports.attr = 'subplot';\n\nexports.idRoot = MAPBOX;\n\nexports.idRegex = exports.attrRegex = Lib.counterRegex(MAPBOX);\n\nvar deprecationWarning = [\n    'mapbox subplots and traces are deprecated!',\n    'Please consider switching to `map` subplots and traces.',\n    'Learn more at: https://plotly.com/javascript/maplibre-migration/'\n].join(' ');\n\nexports.attributes = {\n    subplot: {\n        valType: 'subplotid',\n        dflt: 'mapbox',\n        editType: 'calc',\n        description: [\n            deprecationWarning,\n            'Sets a reference between this trace\\'s data coordinates and',\n            'a mapbox subplot.',\n            'If *mapbox* (the default value), the data refer to `layout.mapbox`.',\n            'If *mapbox2*, the data refer to `layout.mapbox2`, and so on.'\n        ].join(' ')\n    }\n};\n\nexports.layoutAttributes = require('./layout_attributes');\n\nexports.supplyLayoutDefaults = require('./layout_defaults');\n\nvar firstPlot = true;\n\nexports.plot = function plot(gd) {\n    if(firstPlot) {\n        firstPlot = false;\n        Lib.warn(deprecationWarning);\n    }\n\n    var fullLayout = gd._fullLayout;\n    var calcData = gd.calcdata;\n    var mapboxIds = fullLayout._subplots[MAPBOX];\n\n    if(mapboxgl.version !== constants.requiredVersion) {\n        throw new Error(constants.wrongVersionErrorMsg);\n    }\n\n    var accessToken = findAccessToken(gd, mapboxIds);\n    mapboxgl.accessToken = accessToken;\n\n    for(var i = 0; i < mapboxIds.length; i++) {\n        var id = mapboxIds[i];\n        var subplotCalcData = getSubplotCalcData(calcData, MAPBOX, id);\n        var opts = fullLayout[id];\n        var mapbox = opts._subplot;\n\n        if(!mapbox) {\n            mapbox = new Mapbox(gd, id);\n            fullLayout[id]._subplot = mapbox;\n        }\n\n        if(!mapbox.viewInitial) {\n            mapbox.viewInitial = {\n                center: Lib.extendFlat({}, opts.center),\n                zoom: opts.zoom,\n                bearing: opts.bearing,\n                pitch: opts.pitch\n            };\n        }\n\n        mapbox.plot(subplotCalcData, fullLayout, gd._promises);\n    }\n};\n\nexports.clean = function(newFullData, newFullLayout, oldFullData, oldFullLayout) {\n    var oldMapboxKeys = oldFullLayout._subplots[MAPBOX] || [];\n\n    for(var i = 0; i < oldMapboxKeys.length; i++) {\n        var oldMapboxKey = oldMapboxKeys[i];\n\n        if(!newFullLayout[oldMapboxKey] && !!oldFullLayout[oldMapboxKey]._subplot) {\n            oldFullLayout[oldMapboxKey]._subplot.destroy();\n        }\n    }\n};\n\nexports.toSVG = function(gd) {\n    var fullLayout = gd._fullLayout;\n    var subplotIds = fullLayout._subplots[MAPBOX];\n    var size = fullLayout._size;\n\n    for(var i = 0; i < subplotIds.length; i++) {\n        var opts = fullLayout[subplotIds[i]];\n        var domain = opts.domain;\n        var mapbox = opts._subplot;\n\n        var imageData = mapbox.toImage('png');\n        var image = fullLayout._glimages.append('svg:image');\n\n        image.attr({\n            xmlns: xmlnsNamespaces.svg,\n            'xlink:href': imageData,\n            x: size.l + size.w * domain.x[0],\n            y: size.t + size.h * (1 - domain.y[1]),\n            width: size.w * (domain.x[1] - domain.x[0]),\n            height: size.h * (domain.y[1] - domain.y[0]),\n            preserveAspectRatio: 'none'\n        });\n\n        var subplotDiv = d3.select(opts._subplot.div);\n\n        // Append logo if visible\n        var hidden = subplotDiv.select('.mapboxgl-ctrl-logo').node().offsetParent === null;\n        if(!hidden) {\n            var logo = fullLayout._glimages.append('g');\n            logo.attr('transform', strTranslate(size.l + size.w * domain.x[0] + 10, size.t + size.h * (1 - domain.y[0]) - 31));\n            logo.append('path')\n                .attr('d', constants.mapboxLogo.path0)\n                .style({\n                    opacity: 0.9,\n                    fill: '#ffffff',\n                    'enable-background': 'new'\n                });\n\n            logo.append('path')\n                .attr('d', constants.mapboxLogo.path1)\n                .style('opacity', 0.35)\n                .style('enable-background', 'new');\n\n            logo.append('path')\n                .attr('d', constants.mapboxLogo.path2)\n                .style('opacity', 0.35)\n                .style('enable-background', 'new');\n\n            logo.append('polygon')\n                .attr('points', constants.mapboxLogo.polygon)\n                .style({\n                    opacity: 0.9,\n                    fill: '#ffffff',\n                    'enable-background': 'new'\n                });\n        }\n\n        // Add attributions\n        var attributions = subplotDiv\n            .select('.mapboxgl-ctrl-attrib').text()\n            .replace('Improve this map', '');\n\n        var attributionGroup = fullLayout._glimages.append('g');\n\n        var attributionText = attributionGroup.append('text');\n        attributionText\n            .text(attributions)\n            .classed('static-attribution', true)\n            .attr({\n                'font-size': 12,\n                'font-family': 'Arial',\n                color: 'rgba(0, 0, 0, 0.75)',\n                'text-anchor': 'end',\n                'data-unformatted': attributions\n            });\n\n        var bBox = Drawing.bBox(attributionText.node());\n\n        // Break into multiple lines twice larger than domain\n        var maxWidth = size.w * (domain.x[1] - domain.x[0]);\n        if((bBox.width > maxWidth / 2)) {\n            var multilineAttributions = attributions.split('|').join('<br>');\n            attributionText\n                .text(multilineAttributions)\n                .attr('data-unformatted', multilineAttributions)\n                .call(svgTextUtils.convertToTspans, gd);\n\n            bBox = Drawing.bBox(attributionText.node());\n        }\n        attributionText.attr('transform', strTranslate(-3, -bBox.height + 8));\n\n        // Draw white rectangle behind text\n        attributionGroup\n            .insert('rect', '.static-attribution')\n            .attr({\n                x: -bBox.width - 6,\n                y: -bBox.height - 3,\n                width: bBox.width + 6,\n                height: bBox.height + 3,\n                fill: 'rgba(255, 255, 255, 0.75)'\n            });\n\n        // Scale down if larger than domain\n        var scaleRatio = 1;\n        if((bBox.width + 6) > maxWidth) scaleRatio = maxWidth / (bBox.width + 6);\n\n        var offset = [(size.l + size.w * domain.x[1]), (size.t + size.h * (1 - domain.y[0]))];\n        attributionGroup.attr('transform', strTranslate(offset[0], offset[1]) + strScale(scaleRatio));\n    }\n};\n\n// N.B. mapbox-gl only allows one accessToken to be set per page:\n// https://github.com/mapbox/mapbox-gl-js/issues/6331\nfunction findAccessToken(gd, mapboxIds) {\n    var fullLayout = gd._fullLayout;\n    var context = gd._context;\n\n    // special case for Mapbox Atlas users\n    if(context.mapboxAccessToken === '') return '';\n\n    var tokensUseful = [];\n    var tokensListed = [];\n    var hasOneSetMapboxStyle = false;\n    var wontWork = false;\n\n    // Take the first token we find in a mapbox subplot.\n    // These default to the context value but may be overridden.\n    for(var i = 0; i < mapboxIds.length; i++) {\n        var opts = fullLayout[mapboxIds[i]];\n        var token = opts.accesstoken;\n\n        if(isStyleRequireAccessToken(opts.style)) {\n            if(token) {\n                Lib.pushUnique(tokensUseful, token);\n            } else {\n                if(isStyleRequireAccessToken(opts._input.style)) {\n                    Lib.error('Uses Mapbox map style, but did not set an access token.');\n                    hasOneSetMapboxStyle = true;\n                }\n                wontWork = true;\n            }\n        }\n\n        if(token) {\n            Lib.pushUnique(tokensListed, token);\n        }\n    }\n\n    if(wontWork) {\n        var msg = hasOneSetMapboxStyle ?\n            constants.noAccessTokenErrorMsg :\n            constants.missingStyleErrorMsg;\n        Lib.error(msg);\n        throw new Error(msg);\n    }\n\n    if(tokensUseful.length) {\n        if(tokensUseful.length > 1) {\n            Lib.warn(constants.multipleTokensErrorMsg);\n        }\n        return tokensUseful[0];\n    } else {\n        if(tokensListed.length) {\n            Lib.log([\n                'Listed mapbox access token(s)', tokensListed.join(','),\n                'but did not use a Mapbox map style, ignoring token(s).'\n            ].join(' '));\n        }\n        return '';\n    }\n}\n\nfunction isStyleRequireAccessToken(s) {\n    return typeof s === 'string' && (\n        constants.styleValuesMapbox.indexOf(s) !== -1 ||\n        s.indexOf('mapbox://') === 0 ||\n        s.indexOf('stamen') === 0\n    );\n}\n\nexports.updateFx = function(gd) {\n    var fullLayout = gd._fullLayout;\n    var subplotIds = fullLayout._subplots[MAPBOX];\n\n    for(var i = 0; i < subplotIds.length; i++) {\n        var subplotObj = fullLayout[subplotIds[i]]._subplot;\n        subplotObj.updateFx(fullLayout);\n    }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}