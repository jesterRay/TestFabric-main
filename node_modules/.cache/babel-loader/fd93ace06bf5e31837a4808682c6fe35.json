{"ast":null,"code":"'use strict';\n\nvar getSubplotCalcData = require('../../plots/get_data').getSubplotCalcData;\nvar counterRegex = require('../../lib').counterRegex;\nvar createGeo = require('./geo');\nvar GEO = 'geo';\nvar counter = counterRegex(GEO);\nvar attributes = {};\nattributes[GEO] = {\n  valType: 'subplotid',\n  dflt: GEO,\n  editType: 'calc',\n  description: ['Sets a reference between this trace\\'s geospatial coordinates and', 'a geographic map.', 'If *geo* (the default value), the geospatial coordinates refer to', '`layout.geo`.', 'If *geo2*, the geospatial coordinates refer to `layout.geo2`,', 'and so on.'].join(' ')\n};\nfunction plotGeo(gd) {\n  var fullLayout = gd._fullLayout;\n  var calcData = gd.calcdata;\n  var geoIds = fullLayout._subplots[GEO];\n  for (var i = 0; i < geoIds.length; i++) {\n    var geoId = geoIds[i];\n    var geoCalcData = getSubplotCalcData(calcData, GEO, geoId);\n    var geoLayout = fullLayout[geoId];\n    var geo = geoLayout._subplot;\n    if (!geo) {\n      geo = createGeo({\n        id: geoId,\n        graphDiv: gd,\n        container: fullLayout._geolayer.node(),\n        topojsonURL: gd._context.topojsonURL,\n        staticPlot: gd._context.staticPlot\n      });\n      fullLayout[geoId]._subplot = geo;\n    }\n    geo.plot(geoCalcData, fullLayout, gd._promises);\n  }\n}\nfunction clean(newFullData, newFullLayout, oldFullData, oldFullLayout) {\n  var oldGeoKeys = oldFullLayout._subplots[GEO] || [];\n  for (var i = 0; i < oldGeoKeys.length; i++) {\n    var oldGeoKey = oldGeoKeys[i];\n    var oldGeo = oldFullLayout[oldGeoKey]._subplot;\n    if (!newFullLayout[oldGeoKey] && !!oldGeo) {\n      oldGeo.framework.remove();\n      oldGeo.clipDef.remove();\n    }\n  }\n}\nfunction updateFx(gd) {\n  var fullLayout = gd._fullLayout;\n  var subplotIds = fullLayout._subplots[GEO];\n  for (var i = 0; i < subplotIds.length; i++) {\n    var subplotLayout = fullLayout[subplotIds[i]];\n    var subplotObj = subplotLayout._subplot;\n    subplotObj.updateFx(fullLayout, subplotLayout);\n  }\n}\nmodule.exports = {\n  attr: GEO,\n  name: GEO,\n  idRoot: GEO,\n  idRegex: counter,\n  attrRegex: counter,\n  attributes: attributes,\n  layoutAttributes: require('./layout_attributes'),\n  supplyLayoutDefaults: require('./layout_defaults'),\n  plot: plotGeo,\n  updateFx: updateFx,\n  clean: clean\n};","map":{"version":3,"names":["getSubplotCalcData","require","counterRegex","createGeo","GEO","counter","attributes","valType","dflt","editType","description","join","plotGeo","gd","fullLayout","_fullLayout","calcData","calcdata","geoIds","_subplots","i","length","geoId","geoCalcData","geoLayout","geo","_subplot","id","graphDiv","container","_geolayer","node","topojsonURL","_context","staticPlot","plot","_promises","clean","newFullData","newFullLayout","oldFullData","oldFullLayout","oldGeoKeys","oldGeoKey","oldGeo","framework","remove","clipDef","updateFx","subplotIds","subplotLayout","subplotObj","module","exports","attr","name","idRoot","idRegex","attrRegex","layoutAttributes","supplyLayoutDefaults"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/plots/geo/index.js"],"sourcesContent":["'use strict';\n\nvar getSubplotCalcData = require('../../plots/get_data').getSubplotCalcData;\nvar counterRegex = require('../../lib').counterRegex;\n\nvar createGeo = require('./geo');\n\nvar GEO = 'geo';\nvar counter = counterRegex(GEO);\n\nvar attributes = {};\nattributes[GEO] = {\n    valType: 'subplotid',\n    dflt: GEO,\n    editType: 'calc',\n    description: [\n        'Sets a reference between this trace\\'s geospatial coordinates and',\n        'a geographic map.',\n        'If *geo* (the default value), the geospatial coordinates refer to',\n        '`layout.geo`.',\n        'If *geo2*, the geospatial coordinates refer to `layout.geo2`,',\n        'and so on.'\n    ].join(' ')\n};\n\nfunction plotGeo(gd) {\n    var fullLayout = gd._fullLayout;\n    var calcData = gd.calcdata;\n    var geoIds = fullLayout._subplots[GEO];\n\n    for(var i = 0; i < geoIds.length; i++) {\n        var geoId = geoIds[i];\n        var geoCalcData = getSubplotCalcData(calcData, GEO, geoId);\n        var geoLayout = fullLayout[geoId];\n        var geo = geoLayout._subplot;\n\n        if(!geo) {\n            geo = createGeo({\n                id: geoId,\n                graphDiv: gd,\n                container: fullLayout._geolayer.node(),\n                topojsonURL: gd._context.topojsonURL,\n                staticPlot: gd._context.staticPlot\n            });\n\n            fullLayout[geoId]._subplot = geo;\n        }\n\n        geo.plot(geoCalcData, fullLayout, gd._promises);\n    }\n}\n\nfunction clean(newFullData, newFullLayout, oldFullData, oldFullLayout) {\n    var oldGeoKeys = oldFullLayout._subplots[GEO] || [];\n\n    for(var i = 0; i < oldGeoKeys.length; i++) {\n        var oldGeoKey = oldGeoKeys[i];\n        var oldGeo = oldFullLayout[oldGeoKey]._subplot;\n\n        if(!newFullLayout[oldGeoKey] && !!oldGeo) {\n            oldGeo.framework.remove();\n            oldGeo.clipDef.remove();\n        }\n    }\n}\n\nfunction updateFx(gd) {\n    var fullLayout = gd._fullLayout;\n    var subplotIds = fullLayout._subplots[GEO];\n\n    for(var i = 0; i < subplotIds.length; i++) {\n        var subplotLayout = fullLayout[subplotIds[i]];\n        var subplotObj = subplotLayout._subplot;\n        subplotObj.updateFx(fullLayout, subplotLayout);\n    }\n}\n\nmodule.exports = {\n    attr: GEO,\n    name: GEO,\n    idRoot: GEO,\n    idRegex: counter,\n    attrRegex: counter,\n    attributes: attributes,\n    layoutAttributes: require('./layout_attributes'),\n    supplyLayoutDefaults: require('./layout_defaults'),\n    plot: plotGeo,\n    updateFx: updateFx,\n    clean: clean\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}