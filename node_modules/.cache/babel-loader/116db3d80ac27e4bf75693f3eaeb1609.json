{"ast":null,"code":"'use strict';\n\nvar d3 = require('@plotly/d3');\nvar Drawing = require('../../components/drawing');\nvar map1dArray = require('./map_1d_array');\nvar makepath = require('./makepath');\nvar orientText = require('./orient_text');\nvar svgTextUtils = require('../../lib/svg_text_utils');\nvar Lib = require('../../lib');\nvar strRotate = Lib.strRotate;\nvar strTranslate = Lib.strTranslate;\nvar alignmentConstants = require('../../constants/alignment');\nmodule.exports = function plot(gd, plotinfo, cdcarpet, carpetLayer) {\n  var isStatic = gd._context.staticPlot;\n  var xa = plotinfo.xaxis;\n  var ya = plotinfo.yaxis;\n  var fullLayout = gd._fullLayout;\n  var clipLayer = fullLayout._clips;\n  Lib.makeTraceGroups(carpetLayer, cdcarpet, 'trace').each(function (cd) {\n    var axisLayer = d3.select(this);\n    var cd0 = cd[0];\n    var trace = cd0.trace;\n    var aax = trace.aaxis;\n    var bax = trace.baxis;\n    var minorLayer = Lib.ensureSingle(axisLayer, 'g', 'minorlayer');\n    var majorLayer = Lib.ensureSingle(axisLayer, 'g', 'majorlayer');\n    var boundaryLayer = Lib.ensureSingle(axisLayer, 'g', 'boundarylayer');\n    var labelLayer = Lib.ensureSingle(axisLayer, 'g', 'labellayer');\n    axisLayer.style('opacity', trace.opacity);\n    drawGridLines(xa, ya, majorLayer, aax, 'a', aax._gridlines, true, isStatic);\n    drawGridLines(xa, ya, majorLayer, bax, 'b', bax._gridlines, true, isStatic);\n    drawGridLines(xa, ya, minorLayer, aax, 'a', aax._minorgridlines, true, isStatic);\n    drawGridLines(xa, ya, minorLayer, bax, 'b', bax._minorgridlines, true, isStatic);\n\n    // NB: These are not omitted if the lines are not active. The joins must be executed\n    // in order for them to get cleaned up without a full redraw\n    drawGridLines(xa, ya, boundaryLayer, aax, 'a-boundary', aax._boundarylines, isStatic);\n    drawGridLines(xa, ya, boundaryLayer, bax, 'b-boundary', bax._boundarylines, isStatic);\n    var labelOrientationA = drawAxisLabels(gd, xa, ya, trace, cd0, labelLayer, aax._labels, 'a-label');\n    var labelOrientationB = drawAxisLabels(gd, xa, ya, trace, cd0, labelLayer, bax._labels, 'b-label');\n    drawAxisTitles(gd, labelLayer, trace, cd0, xa, ya, labelOrientationA, labelOrientationB);\n    drawClipPath(trace, cd0, clipLayer, xa, ya);\n  });\n};\nfunction drawClipPath(trace, t, layer, xaxis, yaxis) {\n  var seg, xp, yp, i;\n  var clip = layer.select('#' + trace._clipPathId);\n  if (!clip.size()) {\n    clip = layer.append('clipPath').classed('carpetclip', true);\n  }\n  var path = Lib.ensureSingle(clip, 'path', 'carpetboundary');\n  var segments = t.clipsegments;\n  var segs = [];\n  for (i = 0; i < segments.length; i++) {\n    seg = segments[i];\n    xp = map1dArray([], seg.x, xaxis.c2p);\n    yp = map1dArray([], seg.y, yaxis.c2p);\n    segs.push(makepath(xp, yp, seg.bicubic));\n  }\n\n  // This could be optimized ever so slightly to avoid no-op L segments\n  // at the corners, but it's so negligible that I don't think it's worth\n  // the extra complexity\n  var clipPathData = 'M' + segs.join('L') + 'Z';\n  clip.attr('id', trace._clipPathId);\n  path.attr('d', clipPathData);\n}\nfunction drawGridLines(xaxis, yaxis, layer, axis, axisLetter, gridlines, isStatic) {\n  var lineClass = 'const-' + axisLetter + '-lines';\n  var gridJoin = layer.selectAll('.' + lineClass).data(gridlines);\n  gridJoin.enter().append('path').classed(lineClass, true).style('vector-effect', isStatic ? 'none' : 'non-scaling-stroke');\n  gridJoin.each(function (d) {\n    var gridline = d;\n    var x = gridline.x;\n    var y = gridline.y;\n    var xp = map1dArray([], x, xaxis.c2p);\n    var yp = map1dArray([], y, yaxis.c2p);\n    var path = 'M' + makepath(xp, yp, gridline.smoothing);\n    var el = d3.select(this);\n    el.attr('d', path).style('stroke-width', gridline.width).style('stroke', gridline.color).style('stroke-dasharray', Drawing.dashStyle(gridline.dash, gridline.width)).style('fill', 'none');\n  });\n  gridJoin.exit().remove();\n}\nfunction drawAxisLabels(gd, xaxis, yaxis, trace, t, layer, labels, labelClass) {\n  var labelJoin = layer.selectAll('text.' + labelClass).data(labels);\n  labelJoin.enter().append('text').classed(labelClass, true);\n  var maxExtent = 0;\n  var labelOrientation = {};\n  labelJoin.each(function (label, i) {\n    // Most of the positioning is done in calc_labels. Only the parts that depend upon\n    // the screen space representation of the x and y axes are here:\n    var orientation;\n    if (label.axis.tickangle === 'auto') {\n      orientation = orientText(trace, xaxis, yaxis, label.xy, label.dxy);\n    } else {\n      var angle = (label.axis.tickangle + 180.0) * Math.PI / 180.0;\n      orientation = orientText(trace, xaxis, yaxis, label.xy, [Math.cos(angle), Math.sin(angle)]);\n    }\n    if (!i) {\n      // TODO: offsetMultiplier? Not currently used anywhere...\n      labelOrientation = {\n        angle: orientation.angle,\n        flip: orientation.flip\n      };\n    }\n    var direction = (label.endAnchor ? -1 : 1) * orientation.flip;\n    var labelEl = d3.select(this).attr({\n      'text-anchor': direction > 0 ? 'start' : 'end',\n      'data-notex': 1\n    }).call(Drawing.font, label.font).text(label.text).call(svgTextUtils.convertToTspans, gd);\n    var bbox = Drawing.bBox(this);\n    labelEl.attr('transform',\n    // Translate to the correct point:\n    strTranslate(orientation.p[0], orientation.p[1]) +\n    // Rotate to line up with grid line tangent:\n    strRotate(orientation.angle) +\n    // Adjust the baseline and indentation:\n    strTranslate(label.axis.labelpadding * direction, bbox.height * 0.3));\n    maxExtent = Math.max(maxExtent, bbox.width + label.axis.labelpadding);\n  });\n  labelJoin.exit().remove();\n  labelOrientation.maxExtent = maxExtent;\n  return labelOrientation;\n}\nfunction drawAxisTitles(gd, layer, trace, t, xa, ya, labelOrientationA, labelOrientationB) {\n  var a, b, xy, dxy;\n  var aMin = Lib.aggNums(Math.min, null, trace.a);\n  var aMax = Lib.aggNums(Math.max, null, trace.a);\n  var bMin = Lib.aggNums(Math.min, null, trace.b);\n  var bMax = Lib.aggNums(Math.max, null, trace.b);\n  a = 0.5 * (aMin + aMax);\n  b = bMin;\n  xy = trace.ab2xy(a, b, true);\n  dxy = trace.dxyda_rough(a, b);\n  if (labelOrientationA.angle === undefined) {\n    Lib.extendFlat(labelOrientationA, orientText(trace, xa, ya, xy, trace.dxydb_rough(a, b)));\n  }\n  drawAxisTitle(gd, layer, trace, t, xy, dxy, trace.aaxis, xa, ya, labelOrientationA, 'a-title');\n  a = aMin;\n  b = 0.5 * (bMin + bMax);\n  xy = trace.ab2xy(a, b, true);\n  dxy = trace.dxydb_rough(a, b);\n  if (labelOrientationB.angle === undefined) {\n    Lib.extendFlat(labelOrientationB, orientText(trace, xa, ya, xy, trace.dxyda_rough(a, b)));\n  }\n  drawAxisTitle(gd, layer, trace, t, xy, dxy, trace.baxis, xa, ya, labelOrientationB, 'b-title');\n}\nvar lineSpacing = alignmentConstants.LINE_SPACING;\nvar midShift = (1 - alignmentConstants.MID_SHIFT) / lineSpacing + 1;\nfunction drawAxisTitle(gd, layer, trace, t, xy, dxy, axis, xa, ya, labelOrientation, labelClass) {\n  var data = [];\n  if (axis.title.text) data.push(axis.title.text);\n  var titleJoin = layer.selectAll('text.' + labelClass).data(data);\n  var offset = labelOrientation.maxExtent;\n  titleJoin.enter().append('text').classed(labelClass, true);\n\n  // There's only one, but we'll do it as a join so it's updated nicely:\n  titleJoin.each(function () {\n    var orientation = orientText(trace, xa, ya, xy, dxy);\n    if (['start', 'both'].indexOf(axis.showticklabels) === -1) {\n      offset = 0;\n    }\n\n    // In addition to the size of the labels, add on some extra padding:\n    var titleSize = axis.title.font.size;\n    offset += titleSize + axis.title.offset;\n    var labelNorm = labelOrientation.angle + (labelOrientation.flip < 0 ? 180 : 0);\n    var angleDiff = (labelNorm - orientation.angle + 450) % 360;\n    var reverseTitle = angleDiff > 90 && angleDiff < 270;\n    var el = d3.select(this);\n    el.text(axis.title.text).call(svgTextUtils.convertToTspans, gd);\n    if (reverseTitle) {\n      offset = (-svgTextUtils.lineCount(el) + midShift) * lineSpacing * titleSize - offset;\n    }\n    el.attr('transform', strTranslate(orientation.p[0], orientation.p[1]) + strRotate(orientation.angle) + strTranslate(0, offset)).attr('text-anchor', 'middle').call(Drawing.font, axis.title.font);\n  });\n  titleJoin.exit().remove();\n}","map":{"version":3,"names":["d3","require","Drawing","map1dArray","makepath","orientText","svgTextUtils","Lib","strRotate","strTranslate","alignmentConstants","module","exports","plot","gd","plotinfo","cdcarpet","carpetLayer","isStatic","_context","staticPlot","xa","xaxis","ya","yaxis","fullLayout","_fullLayout","clipLayer","_clips","makeTraceGroups","each","cd","axisLayer","select","cd0","trace","aax","aaxis","bax","baxis","minorLayer","ensureSingle","majorLayer","boundaryLayer","labelLayer","style","opacity","drawGridLines","_gridlines","_minorgridlines","_boundarylines","labelOrientationA","drawAxisLabels","_labels","labelOrientationB","drawAxisTitles","drawClipPath","t","layer","seg","xp","yp","i","clip","_clipPathId","size","append","classed","path","segments","clipsegments","segs","length","x","c2p","y","push","bicubic","clipPathData","join","attr","axis","axisLetter","gridlines","lineClass","gridJoin","selectAll","data","enter","d","gridline","smoothing","el","width","color","dashStyle","dash","exit","remove","labels","labelClass","labelJoin","maxExtent","labelOrientation","label","orientation","tickangle","xy","dxy","angle","Math","PI","cos","sin","flip","direction","endAnchor","labelEl","call","font","text","convertToTspans","bbox","bBox","p","labelpadding","height","max","a","b","aMin","aggNums","min","aMax","bMin","bMax","ab2xy","dxyda_rough","undefined","extendFlat","dxydb_rough","drawAxisTitle","lineSpacing","LINE_SPACING","midShift","MID_SHIFT","title","titleJoin","offset","indexOf","showticklabels","titleSize","labelNorm","angleDiff","reverseTitle","lineCount"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/traces/carpet/plot.js"],"sourcesContent":["'use strict';\n\nvar d3 = require('@plotly/d3');\nvar Drawing = require('../../components/drawing');\nvar map1dArray = require('./map_1d_array');\nvar makepath = require('./makepath');\nvar orientText = require('./orient_text');\nvar svgTextUtils = require('../../lib/svg_text_utils');\nvar Lib = require('../../lib');\nvar strRotate = Lib.strRotate;\nvar strTranslate = Lib.strTranslate;\nvar alignmentConstants = require('../../constants/alignment');\n\nmodule.exports = function plot(gd, plotinfo, cdcarpet, carpetLayer) {\n    var isStatic = gd._context.staticPlot;\n    var xa = plotinfo.xaxis;\n    var ya = plotinfo.yaxis;\n    var fullLayout = gd._fullLayout;\n    var clipLayer = fullLayout._clips;\n\n    Lib.makeTraceGroups(carpetLayer, cdcarpet, 'trace').each(function(cd) {\n        var axisLayer = d3.select(this);\n        var cd0 = cd[0];\n        var trace = cd0.trace;\n        var aax = trace.aaxis;\n        var bax = trace.baxis;\n\n        var minorLayer = Lib.ensureSingle(axisLayer, 'g', 'minorlayer');\n        var majorLayer = Lib.ensureSingle(axisLayer, 'g', 'majorlayer');\n        var boundaryLayer = Lib.ensureSingle(axisLayer, 'g', 'boundarylayer');\n        var labelLayer = Lib.ensureSingle(axisLayer, 'g', 'labellayer');\n\n        axisLayer.style('opacity', trace.opacity);\n\n        drawGridLines(xa, ya, majorLayer, aax, 'a', aax._gridlines, true, isStatic);\n        drawGridLines(xa, ya, majorLayer, bax, 'b', bax._gridlines, true, isStatic);\n        drawGridLines(xa, ya, minorLayer, aax, 'a', aax._minorgridlines, true, isStatic);\n        drawGridLines(xa, ya, minorLayer, bax, 'b', bax._minorgridlines, true, isStatic);\n\n        // NB: These are not omitted if the lines are not active. The joins must be executed\n        // in order for them to get cleaned up without a full redraw\n        drawGridLines(xa, ya, boundaryLayer, aax, 'a-boundary', aax._boundarylines, isStatic);\n        drawGridLines(xa, ya, boundaryLayer, bax, 'b-boundary', bax._boundarylines, isStatic);\n\n        var labelOrientationA = drawAxisLabels(gd, xa, ya, trace, cd0, labelLayer, aax._labels, 'a-label');\n        var labelOrientationB = drawAxisLabels(gd, xa, ya, trace, cd0, labelLayer, bax._labels, 'b-label');\n\n        drawAxisTitles(gd, labelLayer, trace, cd0, xa, ya, labelOrientationA, labelOrientationB);\n\n        drawClipPath(trace, cd0, clipLayer, xa, ya);\n    });\n};\n\nfunction drawClipPath(trace, t, layer, xaxis, yaxis) {\n    var seg, xp, yp, i;\n\n    var clip = layer.select('#' + trace._clipPathId);\n\n    if(!clip.size()) {\n        clip = layer.append('clipPath')\n            .classed('carpetclip', true);\n    }\n\n    var path = Lib.ensureSingle(clip, 'path', 'carpetboundary');\n    var segments = t.clipsegments;\n    var segs = [];\n\n    for(i = 0; i < segments.length; i++) {\n        seg = segments[i];\n        xp = map1dArray([], seg.x, xaxis.c2p);\n        yp = map1dArray([], seg.y, yaxis.c2p);\n        segs.push(makepath(xp, yp, seg.bicubic));\n    }\n\n    // This could be optimized ever so slightly to avoid no-op L segments\n    // at the corners, but it's so negligible that I don't think it's worth\n    // the extra complexity\n    var clipPathData = 'M' + segs.join('L') + 'Z';\n    clip.attr('id', trace._clipPathId);\n    path.attr('d', clipPathData);\n}\n\nfunction drawGridLines(xaxis, yaxis, layer, axis, axisLetter, gridlines, isStatic) {\n    var lineClass = 'const-' + axisLetter + '-lines';\n    var gridJoin = layer.selectAll('.' + lineClass).data(gridlines);\n\n    gridJoin.enter().append('path')\n        .classed(lineClass, true)\n        .style('vector-effect', isStatic ? 'none' : 'non-scaling-stroke');\n\n    gridJoin.each(function(d) {\n        var gridline = d;\n        var x = gridline.x;\n        var y = gridline.y;\n\n        var xp = map1dArray([], x, xaxis.c2p);\n        var yp = map1dArray([], y, yaxis.c2p);\n\n        var path = 'M' + makepath(xp, yp, gridline.smoothing);\n\n        var el = d3.select(this);\n\n        el.attr('d', path)\n            .style('stroke-width', gridline.width)\n            .style('stroke', gridline.color)\n            .style('stroke-dasharray', Drawing.dashStyle(gridline.dash, gridline.width))\n            .style('fill', 'none');\n    });\n\n    gridJoin.exit().remove();\n}\n\nfunction drawAxisLabels(gd, xaxis, yaxis, trace, t, layer, labels, labelClass) {\n    var labelJoin = layer.selectAll('text.' + labelClass).data(labels);\n\n    labelJoin.enter().append('text')\n        .classed(labelClass, true);\n\n    var maxExtent = 0;\n    var labelOrientation = {};\n\n    labelJoin.each(function(label, i) {\n        // Most of the positioning is done in calc_labels. Only the parts that depend upon\n        // the screen space representation of the x and y axes are here:\n        var orientation;\n        if(label.axis.tickangle === 'auto') {\n            orientation = orientText(trace, xaxis, yaxis, label.xy, label.dxy);\n        } else {\n            var angle = (label.axis.tickangle + 180.0) * Math.PI / 180.0;\n            orientation = orientText(trace, xaxis, yaxis, label.xy, [Math.cos(angle), Math.sin(angle)]);\n        }\n\n        if(!i) {\n            // TODO: offsetMultiplier? Not currently used anywhere...\n            labelOrientation = {angle: orientation.angle, flip: orientation.flip};\n        }\n        var direction = (label.endAnchor ? -1 : 1) * orientation.flip;\n\n        var labelEl = d3.select(this)\n            .attr({\n                'text-anchor': direction > 0 ? 'start' : 'end',\n                'data-notex': 1\n            })\n            .call(Drawing.font, label.font)\n            .text(label.text)\n            .call(svgTextUtils.convertToTspans, gd);\n\n        var bbox = Drawing.bBox(this);\n\n        labelEl.attr('transform',\n                // Translate to the correct point:\n                strTranslate(orientation.p[0], orientation.p[1]) +\n                // Rotate to line up with grid line tangent:\n                strRotate(orientation.angle) +\n                // Adjust the baseline and indentation:\n                strTranslate(label.axis.labelpadding * direction, bbox.height * 0.3)\n            );\n\n        maxExtent = Math.max(maxExtent, bbox.width + label.axis.labelpadding);\n    });\n\n    labelJoin.exit().remove();\n\n    labelOrientation.maxExtent = maxExtent;\n    return labelOrientation;\n}\n\nfunction drawAxisTitles(gd, layer, trace, t, xa, ya, labelOrientationA, labelOrientationB) {\n    var a, b, xy, dxy;\n\n    var aMin = Lib.aggNums(Math.min, null, trace.a);\n    var aMax = Lib.aggNums(Math.max, null, trace.a);\n    var bMin = Lib.aggNums(Math.min, null, trace.b);\n    var bMax = Lib.aggNums(Math.max, null, trace.b);\n\n    a = 0.5 * (aMin + aMax);\n    b = bMin;\n    xy = trace.ab2xy(a, b, true);\n    dxy = trace.dxyda_rough(a, b);\n    if(labelOrientationA.angle === undefined) {\n        Lib.extendFlat(labelOrientationA, orientText(trace, xa, ya, xy, trace.dxydb_rough(a, b)));\n    }\n    drawAxisTitle(gd, layer, trace, t, xy, dxy, trace.aaxis, xa, ya, labelOrientationA, 'a-title');\n\n    a = aMin;\n    b = 0.5 * (bMin + bMax);\n    xy = trace.ab2xy(a, b, true);\n    dxy = trace.dxydb_rough(a, b);\n    if(labelOrientationB.angle === undefined) {\n        Lib.extendFlat(labelOrientationB, orientText(trace, xa, ya, xy, trace.dxyda_rough(a, b)));\n    }\n    drawAxisTitle(gd, layer, trace, t, xy, dxy, trace.baxis, xa, ya, labelOrientationB, 'b-title');\n}\n\nvar lineSpacing = alignmentConstants.LINE_SPACING;\nvar midShift = ((1 - alignmentConstants.MID_SHIFT) / lineSpacing) + 1;\n\nfunction drawAxisTitle(gd, layer, trace, t, xy, dxy, axis, xa, ya, labelOrientation, labelClass) {\n    var data = [];\n    if(axis.title.text) data.push(axis.title.text);\n    var titleJoin = layer.selectAll('text.' + labelClass).data(data);\n    var offset = labelOrientation.maxExtent;\n\n    titleJoin.enter().append('text')\n        .classed(labelClass, true);\n\n    // There's only one, but we'll do it as a join so it's updated nicely:\n    titleJoin.each(function() {\n        var orientation = orientText(trace, xa, ya, xy, dxy);\n\n        if(['start', 'both'].indexOf(axis.showticklabels) === -1) {\n            offset = 0;\n        }\n\n        // In addition to the size of the labels, add on some extra padding:\n        var titleSize = axis.title.font.size;\n        offset += titleSize + axis.title.offset;\n\n        var labelNorm = labelOrientation.angle + (labelOrientation.flip < 0 ? 180 : 0);\n        var angleDiff = (labelNorm - orientation.angle + 450) % 360;\n        var reverseTitle = angleDiff > 90 && angleDiff < 270;\n\n        var el = d3.select(this);\n\n        el.text(axis.title.text)\n            .call(svgTextUtils.convertToTspans, gd);\n\n        if(reverseTitle) {\n            offset = (-svgTextUtils.lineCount(el) + midShift) * lineSpacing * titleSize - offset;\n        }\n\n        el.attr('transform',\n                strTranslate(orientation.p[0], orientation.p[1]) +\n                strRotate(orientation.angle) +\n                strTranslate(0, offset)\n            )\n            .attr('text-anchor', 'middle')\n            .call(Drawing.font, axis.title.font);\n    });\n\n    titleJoin.exit().remove();\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}