{"ast":null,"code":"'use strict';\n\nvar Lib = require('../../lib');\nvar attributes = require('./attributes');\nvar Color = require('../../components/color');\nvar tinycolor = require('tinycolor2');\nvar handleDomainDefaults = require('../../plots/domain').defaults;\nvar handleHoverLabelDefaults = require('../../components/fx/hoverlabel_defaults');\nvar Template = require('../../plot_api/plot_template');\nvar handleArrayContainerDefaults = require('../../plots/array_container_defaults');\nmodule.exports = function supplyDefaults(traceIn, traceOut, defaultColor, layout) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(traceIn, traceOut, attributes, attr, dflt);\n  }\n  var hoverlabelDefault = Lib.extendDeep(layout.hoverlabel, traceIn.hoverlabel);\n\n  // node attributes\n  var nodeIn = traceIn.node;\n  var nodeOut = Template.newContainer(traceOut, 'node');\n  function coerceNode(attr, dflt) {\n    return Lib.coerce(nodeIn, nodeOut, attributes.node, attr, dflt);\n  }\n  coerceNode('label');\n  coerceNode('groups');\n  coerceNode('x');\n  coerceNode('y');\n  coerceNode('pad');\n  coerceNode('thickness');\n  coerceNode('line.color');\n  coerceNode('line.width');\n  coerceNode('hoverinfo', traceIn.hoverinfo);\n  handleHoverLabelDefaults(nodeIn, nodeOut, coerceNode, hoverlabelDefault);\n  coerceNode('hovertemplate');\n  coerceNode('align');\n  var colors = layout.colorway;\n  var defaultNodePalette = function (i) {\n    return colors[i % colors.length];\n  };\n  coerceNode('color', nodeOut.label.map(function (d, i) {\n    return Color.addOpacity(defaultNodePalette(i), 0.8);\n  }));\n  coerceNode('customdata');\n\n  // link attributes\n  var linkIn = traceIn.link || {};\n  var linkOut = Template.newContainer(traceOut, 'link');\n  function coerceLink(attr, dflt) {\n    return Lib.coerce(linkIn, linkOut, attributes.link, attr, dflt);\n  }\n  coerceLink('label');\n  coerceLink('arrowlen');\n  coerceLink('source');\n  coerceLink('target');\n  coerceLink('value');\n  coerceLink('line.color');\n  coerceLink('line.width');\n  coerceLink('hoverinfo', traceIn.hoverinfo);\n  handleHoverLabelDefaults(linkIn, linkOut, coerceLink, hoverlabelDefault);\n  coerceLink('hovertemplate');\n  var darkBG = tinycolor(layout.paper_bgcolor).getLuminance() < 0.333;\n  var defaultLinkColor = darkBG ? 'rgba(255, 255, 255, 0.6)' : 'rgba(0, 0, 0, 0.2)';\n  var linkColor = coerceLink('color', defaultLinkColor);\n  function makeDefaultHoverColor(_linkColor) {\n    var tc = tinycolor(_linkColor);\n    if (!tc.isValid()) {\n      // hopefully the user-specified color is valid, but if not that can be caught elsewhere\n      return _linkColor;\n    }\n    var alpha = tc.getAlpha();\n    if (alpha <= 0.8) {\n      tc.setAlpha(alpha + 0.2);\n    } else {\n      tc = darkBG ? tc.brighten() : tc.darken();\n    }\n    return tc.toRgbString();\n  }\n  coerceLink('hovercolor', Array.isArray(linkColor) ? linkColor.map(makeDefaultHoverColor) : makeDefaultHoverColor(linkColor));\n  coerceLink('customdata');\n  handleArrayContainerDefaults(linkIn, linkOut, {\n    name: 'colorscales',\n    handleItemDefaults: concentrationscalesDefaults\n  });\n  handleDomainDefaults(traceOut, layout, coerce);\n  coerce('orientation');\n  coerce('valueformat');\n  coerce('valuesuffix');\n  var dfltArrangement;\n  if (nodeOut.x.length && nodeOut.y.length) {\n    dfltArrangement = 'freeform';\n  }\n  coerce('arrangement', dfltArrangement);\n  Lib.coerceFont(coerce, 'textfont', layout.font, {\n    autoShadowDflt: true\n  });\n\n  // disable 1D transforms - arrays here are 1D but their lengths/meanings\n  // don't match, between nodes and links\n  traceOut._length = null;\n};\nfunction concentrationscalesDefaults(In, Out) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(In, Out, attributes.link.colorscales, attr, dflt);\n  }\n  coerce('label');\n  coerce('cmin');\n  coerce('cmax');\n  coerce('colorscale');\n}","map":{"version":3,"names":["Lib","require","attributes","Color","tinycolor","handleDomainDefaults","defaults","handleHoverLabelDefaults","Template","handleArrayContainerDefaults","module","exports","supplyDefaults","traceIn","traceOut","defaultColor","layout","coerce","attr","dflt","hoverlabelDefault","extendDeep","hoverlabel","nodeIn","node","nodeOut","newContainer","coerceNode","hoverinfo","colors","colorway","defaultNodePalette","i","length","label","map","d","addOpacity","linkIn","link","linkOut","coerceLink","darkBG","paper_bgcolor","getLuminance","defaultLinkColor","linkColor","makeDefaultHoverColor","_linkColor","tc","isValid","alpha","getAlpha","setAlpha","brighten","darken","toRgbString","Array","isArray","name","handleItemDefaults","concentrationscalesDefaults","dfltArrangement","x","y","coerceFont","font","autoShadowDflt","_length","In","Out","colorscales"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/traces/sankey/defaults.js"],"sourcesContent":["'use strict';\n\nvar Lib = require('../../lib');\nvar attributes = require('./attributes');\nvar Color = require('../../components/color');\nvar tinycolor = require('tinycolor2');\nvar handleDomainDefaults = require('../../plots/domain').defaults;\nvar handleHoverLabelDefaults = require('../../components/fx/hoverlabel_defaults');\nvar Template = require('../../plot_api/plot_template');\nvar handleArrayContainerDefaults = require('../../plots/array_container_defaults');\n\nmodule.exports = function supplyDefaults(traceIn, traceOut, defaultColor, layout) {\n    function coerce(attr, dflt) {\n        return Lib.coerce(traceIn, traceOut, attributes, attr, dflt);\n    }\n\n    var hoverlabelDefault = Lib.extendDeep(layout.hoverlabel, traceIn.hoverlabel);\n\n    // node attributes\n    var nodeIn = traceIn.node;\n    var nodeOut = Template.newContainer(traceOut, 'node');\n\n    function coerceNode(attr, dflt) {\n        return Lib.coerce(nodeIn, nodeOut, attributes.node, attr, dflt);\n    }\n    coerceNode('label');\n    coerceNode('groups');\n    coerceNode('x');\n    coerceNode('y');\n    coerceNode('pad');\n    coerceNode('thickness');\n    coerceNode('line.color');\n    coerceNode('line.width');\n    coerceNode('hoverinfo', traceIn.hoverinfo);\n    handleHoverLabelDefaults(nodeIn, nodeOut, coerceNode, hoverlabelDefault);\n    coerceNode('hovertemplate');\n    coerceNode('align');\n\n    var colors = layout.colorway;\n\n    var defaultNodePalette = function(i) {return colors[i % colors.length];};\n\n    coerceNode('color', nodeOut.label.map(function(d, i) {\n        return Color.addOpacity(defaultNodePalette(i), 0.8);\n    }));\n    coerceNode('customdata');\n\n    // link attributes\n    var linkIn = traceIn.link || {};\n    var linkOut = Template.newContainer(traceOut, 'link');\n\n    function coerceLink(attr, dflt) {\n        return Lib.coerce(linkIn, linkOut, attributes.link, attr, dflt);\n    }\n    coerceLink('label');\n    coerceLink('arrowlen');\n    coerceLink('source');\n    coerceLink('target');\n    coerceLink('value');\n    coerceLink('line.color');\n    coerceLink('line.width');\n    coerceLink('hoverinfo', traceIn.hoverinfo);\n    handleHoverLabelDefaults(linkIn, linkOut, coerceLink, hoverlabelDefault);\n    coerceLink('hovertemplate');\n\n    var darkBG = tinycolor(layout.paper_bgcolor).getLuminance() < 0.333;\n    var defaultLinkColor = darkBG ? 'rgba(255, 255, 255, 0.6)' : 'rgba(0, 0, 0, 0.2)';\n    var linkColor = coerceLink('color', defaultLinkColor);\n\n    function makeDefaultHoverColor(_linkColor) {\n        var tc = tinycolor(_linkColor);\n        if(!tc.isValid()) {\n            // hopefully the user-specified color is valid, but if not that can be caught elsewhere\n            return _linkColor;\n        }\n        var alpha = tc.getAlpha();\n        if(alpha <= 0.8) {\n            tc.setAlpha(alpha + 0.2);\n        } else {\n            tc = darkBG ? tc.brighten() : tc.darken();\n        }\n        return tc.toRgbString();\n    }\n\n    coerceLink('hovercolor', Array.isArray(linkColor) ?\n        linkColor.map(makeDefaultHoverColor) :\n        makeDefaultHoverColor(linkColor)\n    );\n\n    coerceLink('customdata');\n\n    handleArrayContainerDefaults(linkIn, linkOut, {\n        name: 'colorscales',\n        handleItemDefaults: concentrationscalesDefaults\n    });\n\n    handleDomainDefaults(traceOut, layout, coerce);\n\n    coerce('orientation');\n    coerce('valueformat');\n    coerce('valuesuffix');\n\n    var dfltArrangement;\n    if(nodeOut.x.length && nodeOut.y.length) {\n        dfltArrangement = 'freeform';\n    }\n    coerce('arrangement', dfltArrangement);\n\n    Lib.coerceFont(coerce, 'textfont', layout.font, { autoShadowDflt: true });\n\n    // disable 1D transforms - arrays here are 1D but their lengths/meanings\n    // don't match, between nodes and links\n    traceOut._length = null;\n};\n\nfunction concentrationscalesDefaults(In, Out) {\n    function coerce(attr, dflt) {\n        return Lib.coerce(In, Out, attributes.link.colorscales, attr, dflt);\n    }\n\n    coerce('label');\n    coerce('cmin');\n    coerce('cmax');\n    coerce('colorscale');\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}