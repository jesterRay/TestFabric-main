{"ast":null,"code":"'use strict';\n\nvar cluster = require('@plotly/point-cluster');\nvar Lib = require('../../lib');\nvar AxisIDs = require('../../plots/cartesian/axis_ids');\nvar findExtremes = require('../../plots/cartesian/autorange').findExtremes;\nvar alignPeriod = require('../../plots/cartesian/align_period');\nvar scatterCalc = require('../scatter/calc');\nvar calcMarkerSize = scatterCalc.calcMarkerSize;\nvar calcAxisExpansion = scatterCalc.calcAxisExpansion;\nvar setFirstScatter = scatterCalc.setFirstScatter;\nvar calcColorscale = require('../scatter/colorscale_calc');\nvar convert = require('./convert');\nvar sceneUpdate = require('./scene_update');\nvar BADNUM = require('../../constants/numerical').BADNUM;\nvar TOO_MANY_POINTS = require('./constants').TOO_MANY_POINTS;\nmodule.exports = function calc(gd, trace) {\n  var fullLayout = gd._fullLayout;\n  var xa = trace._xA = AxisIDs.getFromId(gd, trace.xaxis, 'x');\n  var ya = trace._yA = AxisIDs.getFromId(gd, trace.yaxis, 'y');\n  var subplot = fullLayout._plots[trace.xaxis + trace.yaxis];\n  var len = trace._length;\n  var hasTooManyPoints = len >= TOO_MANY_POINTS;\n  var len2 = len * 2;\n  var stash = {};\n  var i;\n  var origX = xa.makeCalcdata(trace, 'x');\n  var origY = ya.makeCalcdata(trace, 'y');\n  var xObj = alignPeriod(trace, xa, 'x', origX);\n  var yObj = alignPeriod(trace, ya, 'y', origY);\n  var x = xObj.vals;\n  var y = yObj.vals;\n  trace._x = x;\n  trace._y = y;\n  if (trace.xperiodalignment) {\n    trace._origX = origX;\n    trace._xStarts = xObj.starts;\n    trace._xEnds = xObj.ends;\n  }\n  if (trace.yperiodalignment) {\n    trace._origY = origY;\n    trace._yStarts = yObj.starts;\n    trace._yEnds = yObj.ends;\n  }\n\n  // we need hi-precision for scatter2d,\n  // regl-scatter2d uses NaNs for bad/missing values\n  var positions = new Array(len2);\n  var _ids = new Array(len);\n  for (i = 0; i < len; i++) {\n    positions[i * 2] = x[i] === BADNUM ? NaN : x[i];\n    positions[i * 2 + 1] = y[i] === BADNUM ? NaN : y[i];\n    // Pre-compute ids.\n    _ids[i] = i;\n  }\n  if (xa.type === 'log') {\n    for (i = 0; i < len2; i += 2) {\n      positions[i] = xa.c2l(positions[i]);\n    }\n  }\n  if (ya.type === 'log') {\n    for (i = 1; i < len2; i += 2) {\n      positions[i] = ya.c2l(positions[i]);\n    }\n  }\n\n  // we don't build a tree for log axes since it takes long to convert log2px\n  // and it is also\n  if (hasTooManyPoints && xa.type !== 'log' && ya.type !== 'log') {\n    // FIXME: delegate this to webworker\n    stash.tree = cluster(positions);\n  } else {\n    stash.ids = _ids;\n  }\n\n  // create scene options and scene\n  calcColorscale(gd, trace);\n  var opts = sceneOptions(gd, subplot, trace, positions, x, y);\n  var scene = sceneUpdate(gd, subplot);\n\n  // Reuse SVG scatter axis expansion routine.\n  // For graphs with very large number of points and array marker.size,\n  // use average marker size instead to speed things up.\n  setFirstScatter(fullLayout, trace);\n  var ppad;\n  if (!hasTooManyPoints) {\n    ppad = calcMarkerSize(trace, len);\n  } else if (opts.marker) {\n    ppad = opts.marker.sizeAvg || Math.max(opts.marker.size, 3);\n  }\n  calcAxisExpansion(gd, trace, xa, ya, x, y, ppad);\n  if (opts.errorX) expandForErrorBars(trace, xa, opts.errorX);\n  if (opts.errorY) expandForErrorBars(trace, ya, opts.errorY);\n\n  // set flags to create scene renderers\n  if (opts.fill && !scene.fill2d) scene.fill2d = true;\n  if (opts.marker && !scene.scatter2d) scene.scatter2d = true;\n  if (opts.line && !scene.line2d) scene.line2d = true;\n  if ((opts.errorX || opts.errorY) && !scene.error2d) scene.error2d = true;\n  if (opts.text && !scene.glText) scene.glText = true;\n  if (opts.marker) opts.marker.snap = len;\n  scene.lineOptions.push(opts.line);\n  scene.errorXOptions.push(opts.errorX);\n  scene.errorYOptions.push(opts.errorY);\n  scene.fillOptions.push(opts.fill);\n  scene.markerOptions.push(opts.marker);\n  scene.markerSelectedOptions.push(opts.markerSel);\n  scene.markerUnselectedOptions.push(opts.markerUnsel);\n  scene.textOptions.push(opts.text);\n  scene.textSelectedOptions.push(opts.textSel);\n  scene.textUnselectedOptions.push(opts.textUnsel);\n  scene.selectBatch.push([]);\n  scene.unselectBatch.push([]);\n  stash._scene = scene;\n  stash.index = scene.count;\n  stash.x = x;\n  stash.y = y;\n  stash.positions = positions;\n  scene.count++;\n  return [{\n    x: false,\n    y: false,\n    t: stash,\n    trace: trace\n  }];\n};\nfunction expandForErrorBars(trace, ax, opts) {\n  var extremes = trace._extremes[ax._id];\n  var errExt = findExtremes(ax, opts._bnds, {\n    padded: true\n  });\n  extremes.min = extremes.min.concat(errExt.min);\n  extremes.max = extremes.max.concat(errExt.max);\n}\nfunction sceneOptions(gd, subplot, trace, positions, x, y) {\n  var opts = convert.style(gd, trace);\n  if (opts.marker) {\n    opts.marker.positions = positions;\n  }\n  if (opts.line && positions.length > 1) {\n    Lib.extendFlat(opts.line, convert.linePositions(gd, trace, positions));\n  }\n  if (opts.errorX || opts.errorY) {\n    var errors = convert.errorBarPositions(gd, trace, positions, x, y);\n    if (opts.errorX) {\n      Lib.extendFlat(opts.errorX, errors.x);\n    }\n    if (opts.errorY) {\n      Lib.extendFlat(opts.errorY, errors.y);\n    }\n  }\n  if (opts.text) {\n    Lib.extendFlat(opts.text, {\n      positions: positions\n    }, convert.textPosition(gd, trace, opts.text, opts.marker));\n    Lib.extendFlat(opts.textSel, {\n      positions: positions\n    }, convert.textPosition(gd, trace, opts.text, opts.markerSel));\n    Lib.extendFlat(opts.textUnsel, {\n      positions: positions\n    }, convert.textPosition(gd, trace, opts.text, opts.markerUnsel));\n  }\n  return opts;\n}","map":{"version":3,"names":["cluster","require","Lib","AxisIDs","findExtremes","alignPeriod","scatterCalc","calcMarkerSize","calcAxisExpansion","setFirstScatter","calcColorscale","convert","sceneUpdate","BADNUM","TOO_MANY_POINTS","module","exports","calc","gd","trace","fullLayout","_fullLayout","xa","_xA","getFromId","xaxis","ya","_yA","yaxis","subplot","_plots","len","_length","hasTooManyPoints","len2","stash","i","origX","makeCalcdata","origY","xObj","yObj","x","vals","y","_x","_y","xperiodalignment","_origX","_xStarts","starts","_xEnds","ends","yperiodalignment","_origY","_yStarts","_yEnds","positions","Array","_ids","NaN","type","c2l","tree","ids","opts","sceneOptions","scene","ppad","marker","sizeAvg","Math","max","size","errorX","expandForErrorBars","errorY","fill","fill2d","scatter2d","line","line2d","error2d","text","glText","snap","lineOptions","push","errorXOptions","errorYOptions","fillOptions","markerOptions","markerSelectedOptions","markerSel","markerUnselectedOptions","markerUnsel","textOptions","textSelectedOptions","textSel","textUnselectedOptions","textUnsel","selectBatch","unselectBatch","_scene","index","count","t","ax","extremes","_extremes","_id","errExt","_bnds","padded","min","concat","style","length","extendFlat","linePositions","errors","errorBarPositions","textPosition"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/traces/scattergl/calc.js"],"sourcesContent":["'use strict';\n\nvar cluster = require('@plotly/point-cluster');\n\nvar Lib = require('../../lib');\nvar AxisIDs = require('../../plots/cartesian/axis_ids');\nvar findExtremes = require('../../plots/cartesian/autorange').findExtremes;\nvar alignPeriod = require('../../plots/cartesian/align_period');\n\nvar scatterCalc = require('../scatter/calc');\nvar calcMarkerSize = scatterCalc.calcMarkerSize;\nvar calcAxisExpansion = scatterCalc.calcAxisExpansion;\nvar setFirstScatter = scatterCalc.setFirstScatter;\nvar calcColorscale = require('../scatter/colorscale_calc');\nvar convert = require('./convert');\nvar sceneUpdate = require('./scene_update');\n\nvar BADNUM = require('../../constants/numerical').BADNUM;\nvar TOO_MANY_POINTS = require('./constants').TOO_MANY_POINTS;\n\nmodule.exports = function calc(gd, trace) {\n    var fullLayout = gd._fullLayout;\n    var xa = trace._xA = AxisIDs.getFromId(gd, trace.xaxis, 'x');\n    var ya = trace._yA = AxisIDs.getFromId(gd, trace.yaxis, 'y');\n\n    var subplot = fullLayout._plots[trace.xaxis + trace.yaxis];\n    var len = trace._length;\n    var hasTooManyPoints = len >= TOO_MANY_POINTS;\n    var len2 = len * 2;\n    var stash = {};\n    var i;\n\n    var origX = xa.makeCalcdata(trace, 'x');\n    var origY = ya.makeCalcdata(trace, 'y');\n    var xObj = alignPeriod(trace, xa, 'x', origX);\n    var yObj = alignPeriod(trace, ya, 'y', origY);\n    var x = xObj.vals;\n    var y = yObj.vals;\n    trace._x = x;\n    trace._y = y;\n\n    if(trace.xperiodalignment) {\n        trace._origX = origX;\n        trace._xStarts = xObj.starts;\n        trace._xEnds = xObj.ends;\n    }\n    if(trace.yperiodalignment) {\n        trace._origY = origY;\n        trace._yStarts = yObj.starts;\n        trace._yEnds = yObj.ends;\n    }\n\n    // we need hi-precision for scatter2d,\n    // regl-scatter2d uses NaNs for bad/missing values\n    var positions = new Array(len2);\n    var _ids = new Array(len);\n    for(i = 0; i < len; i++) {\n        positions[i * 2] = x[i] === BADNUM ? NaN : x[i];\n        positions[i * 2 + 1] = y[i] === BADNUM ? NaN : y[i];\n        // Pre-compute ids.\n        _ids[i] = i;\n    }\n\n    if(xa.type === 'log') {\n        for(i = 0; i < len2; i += 2) {\n            positions[i] = xa.c2l(positions[i]);\n        }\n    }\n    if(ya.type === 'log') {\n        for(i = 1; i < len2; i += 2) {\n            positions[i] = ya.c2l(positions[i]);\n        }\n    }\n\n    // we don't build a tree for log axes since it takes long to convert log2px\n    // and it is also\n    if(hasTooManyPoints && (xa.type !== 'log' && ya.type !== 'log')) {\n        // FIXME: delegate this to webworker\n        stash.tree = cluster(positions);\n    } else {\n        stash.ids = _ids;\n    }\n\n    // create scene options and scene\n    calcColorscale(gd, trace);\n    var opts = sceneOptions(gd, subplot, trace, positions, x, y);\n    var scene = sceneUpdate(gd, subplot);\n\n    // Reuse SVG scatter axis expansion routine.\n    // For graphs with very large number of points and array marker.size,\n    // use average marker size instead to speed things up.\n    setFirstScatter(fullLayout, trace);\n    var ppad;\n    if(!hasTooManyPoints) {\n        ppad = calcMarkerSize(trace, len);\n    } else if(opts.marker) {\n        ppad = opts.marker.sizeAvg || Math.max(opts.marker.size, 3);\n    }\n    calcAxisExpansion(gd, trace, xa, ya, x, y, ppad);\n    if(opts.errorX) expandForErrorBars(trace, xa, opts.errorX);\n    if(opts.errorY) expandForErrorBars(trace, ya, opts.errorY);\n\n    // set flags to create scene renderers\n    if(opts.fill && !scene.fill2d) scene.fill2d = true;\n    if(opts.marker && !scene.scatter2d) scene.scatter2d = true;\n    if(opts.line && !scene.line2d) scene.line2d = true;\n    if((opts.errorX || opts.errorY) && !scene.error2d) scene.error2d = true;\n    if(opts.text && !scene.glText) scene.glText = true;\n    if(opts.marker) opts.marker.snap = len;\n\n    scene.lineOptions.push(opts.line);\n    scene.errorXOptions.push(opts.errorX);\n    scene.errorYOptions.push(opts.errorY);\n    scene.fillOptions.push(opts.fill);\n    scene.markerOptions.push(opts.marker);\n    scene.markerSelectedOptions.push(opts.markerSel);\n    scene.markerUnselectedOptions.push(opts.markerUnsel);\n    scene.textOptions.push(opts.text);\n    scene.textSelectedOptions.push(opts.textSel);\n    scene.textUnselectedOptions.push(opts.textUnsel);\n    scene.selectBatch.push([]);\n    scene.unselectBatch.push([]);\n\n    stash._scene = scene;\n    stash.index = scene.count;\n    stash.x = x;\n    stash.y = y;\n    stash.positions = positions;\n    scene.count++;\n\n    return [{x: false, y: false, t: stash, trace: trace}];\n};\n\nfunction expandForErrorBars(trace, ax, opts) {\n    var extremes = trace._extremes[ax._id];\n    var errExt = findExtremes(ax, opts._bnds, {padded: true});\n    extremes.min = extremes.min.concat(errExt.min);\n    extremes.max = extremes.max.concat(errExt.max);\n}\n\nfunction sceneOptions(gd, subplot, trace, positions, x, y) {\n    var opts = convert.style(gd, trace);\n\n    if(opts.marker) {\n        opts.marker.positions = positions;\n    }\n\n    if(opts.line && positions.length > 1) {\n        Lib.extendFlat(\n            opts.line,\n            convert.linePositions(gd, trace, positions)\n        );\n    }\n\n    if(opts.errorX || opts.errorY) {\n        var errors = convert.errorBarPositions(gd, trace, positions, x, y);\n\n        if(opts.errorX) {\n            Lib.extendFlat(opts.errorX, errors.x);\n        }\n        if(opts.errorY) {\n            Lib.extendFlat(opts.errorY, errors.y);\n        }\n    }\n\n    if(opts.text) {\n        Lib.extendFlat(\n            opts.text,\n            {positions: positions},\n            convert.textPosition(gd, trace, opts.text, opts.marker)\n        );\n        Lib.extendFlat(\n            opts.textSel,\n            {positions: positions},\n            convert.textPosition(gd, trace, opts.text, opts.markerSel)\n        );\n        Lib.extendFlat(\n            opts.textUnsel,\n            {positions: positions},\n            convert.textPosition(gd, trace, opts.text, opts.markerUnsel)\n        );\n    }\n\n    return opts;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}