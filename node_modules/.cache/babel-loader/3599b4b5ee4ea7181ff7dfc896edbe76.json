{"ast":null,"code":"'use strict';\n\nvar setGroupPositions = require('../bar/cross_trace_calc').setGroupPositions;\nmodule.exports = function crossTraceCalc(gd, plotinfo) {\n  var fullLayout = gd._fullLayout;\n  var fullData = gd._fullData;\n  var calcdata = gd.calcdata;\n  var xa = plotinfo.xaxis;\n  var ya = plotinfo.yaxis;\n  var funnels = [];\n  var funnelsVert = [];\n  var funnelsHorz = [];\n  var cd, i;\n  for (i = 0; i < fullData.length; i++) {\n    var fullTrace = fullData[i];\n    var isHorizontal = fullTrace.orientation === 'h';\n    if (fullTrace.visible === true && fullTrace.xaxis === xa._id && fullTrace.yaxis === ya._id && fullTrace.type === 'funnel') {\n      cd = calcdata[i];\n      if (isHorizontal) {\n        funnelsHorz.push(cd);\n      } else {\n        funnelsVert.push(cd);\n      }\n      funnels.push(cd);\n    }\n  }\n  var opts = {\n    mode: fullLayout.funnelmode,\n    norm: fullLayout.funnelnorm,\n    gap: fullLayout.funnelgap,\n    groupgap: fullLayout.funnelgroupgap\n  };\n  setGroupPositions(gd, xa, ya, funnelsVert, opts);\n  setGroupPositions(gd, ya, xa, funnelsHorz, opts);\n  for (i = 0; i < funnels.length; i++) {\n    cd = funnels[i];\n    for (var j = 0; j < cd.length; j++) {\n      if (j + 1 < cd.length) {\n        cd[j].nextP0 = cd[j + 1].p0;\n        cd[j].nextS0 = cd[j + 1].s0;\n        cd[j].nextP1 = cd[j + 1].p1;\n        cd[j].nextS1 = cd[j + 1].s1;\n      }\n    }\n  }\n};","map":{"version":3,"names":["setGroupPositions","require","module","exports","crossTraceCalc","gd","plotinfo","fullLayout","_fullLayout","fullData","_fullData","calcdata","xa","xaxis","ya","yaxis","funnels","funnelsVert","funnelsHorz","cd","i","length","fullTrace","isHorizontal","orientation","visible","_id","type","push","opts","mode","funnelmode","norm","funnelnorm","gap","funnelgap","groupgap","funnelgroupgap","j","nextP0","p0","nextS0","s0","nextP1","p1","nextS1","s1"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/traces/funnel/cross_trace_calc.js"],"sourcesContent":["'use strict';\n\nvar setGroupPositions = require('../bar/cross_trace_calc').setGroupPositions;\n\nmodule.exports = function crossTraceCalc(gd, plotinfo) {\n    var fullLayout = gd._fullLayout;\n    var fullData = gd._fullData;\n    var calcdata = gd.calcdata;\n    var xa = plotinfo.xaxis;\n    var ya = plotinfo.yaxis;\n    var funnels = [];\n    var funnelsVert = [];\n    var funnelsHorz = [];\n    var cd, i;\n\n    for(i = 0; i < fullData.length; i++) {\n        var fullTrace = fullData[i];\n        var isHorizontal = (fullTrace.orientation === 'h');\n\n        if(\n            fullTrace.visible === true &&\n            fullTrace.xaxis === xa._id &&\n            fullTrace.yaxis === ya._id &&\n            fullTrace.type === 'funnel'\n        ) {\n            cd = calcdata[i];\n\n            if(isHorizontal) {\n                funnelsHorz.push(cd);\n            } else {\n                funnelsVert.push(cd);\n            }\n\n            funnels.push(cd);\n        }\n    }\n\n    var opts = {\n        mode: fullLayout.funnelmode,\n        norm: fullLayout.funnelnorm,\n        gap: fullLayout.funnelgap,\n        groupgap: fullLayout.funnelgroupgap\n    };\n\n    setGroupPositions(gd, xa, ya, funnelsVert, opts);\n    setGroupPositions(gd, ya, xa, funnelsHorz, opts);\n\n    for(i = 0; i < funnels.length; i++) {\n        cd = funnels[i];\n\n        for(var j = 0; j < cd.length; j++) {\n            if(j + 1 < cd.length) {\n                cd[j].nextP0 = cd[j + 1].p0;\n                cd[j].nextS0 = cd[j + 1].s0;\n\n                cd[j].nextP1 = cd[j + 1].p1;\n                cd[j].nextS1 = cd[j + 1].s1;\n            }\n        }\n    }\n};\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,iBAAiB,GAAGC,OAAO,CAAC,yBAAyB,CAAC,CAACD,iBAAiB;AAE5EE,MAAM,CAACC,OAAO,GAAG,SAASC,cAAcA,CAACC,EAAE,EAAEC,QAAQ,EAAE;EACnD,IAAIC,UAAU,GAAGF,EAAE,CAACG,WAAW;EAC/B,IAAIC,QAAQ,GAAGJ,EAAE,CAACK,SAAS;EAC3B,IAAIC,QAAQ,GAAGN,EAAE,CAACM,QAAQ;EAC1B,IAAIC,EAAE,GAAGN,QAAQ,CAACO,KAAK;EACvB,IAAIC,EAAE,GAAGR,QAAQ,CAACS,KAAK;EACvB,IAAIC,OAAO,GAAG,EAAE;EAChB,IAAIC,WAAW,GAAG,EAAE;EACpB,IAAIC,WAAW,GAAG,EAAE;EACpB,IAAIC,EAAE,EAAEC,CAAC;EAET,KAAIA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGX,QAAQ,CAACY,MAAM,EAAED,CAAC,EAAE,EAAE;IACjC,IAAIE,SAAS,GAAGb,QAAQ,CAACW,CAAC,CAAC;IAC3B,IAAIG,YAAY,GAAID,SAAS,CAACE,WAAW,KAAK,GAAI;IAElD,IACIF,SAAS,CAACG,OAAO,KAAK,IAAI,IAC1BH,SAAS,CAACT,KAAK,KAAKD,EAAE,CAACc,GAAG,IAC1BJ,SAAS,CAACP,KAAK,KAAKD,EAAE,CAACY,GAAG,IAC1BJ,SAAS,CAACK,IAAI,KAAK,QAAQ,EAC7B;MACER,EAAE,GAAGR,QAAQ,CAACS,CAAC,CAAC;MAEhB,IAAGG,YAAY,EAAE;QACbL,WAAW,CAACU,IAAI,CAACT,EAAE,CAAC;MACxB,CAAC,MAAM;QACHF,WAAW,CAACW,IAAI,CAACT,EAAE,CAAC;MACxB;MAEAH,OAAO,CAACY,IAAI,CAACT,EAAE,CAAC;IACpB;EACJ;EAEA,IAAIU,IAAI,GAAG;IACPC,IAAI,EAAEvB,UAAU,CAACwB,UAAU;IAC3BC,IAAI,EAAEzB,UAAU,CAAC0B,UAAU;IAC3BC,GAAG,EAAE3B,UAAU,CAAC4B,SAAS;IACzBC,QAAQ,EAAE7B,UAAU,CAAC8B;EACzB,CAAC;EAEDrC,iBAAiB,CAACK,EAAE,EAAEO,EAAE,EAAEE,EAAE,EAAEG,WAAW,EAAEY,IAAI,CAAC;EAChD7B,iBAAiB,CAACK,EAAE,EAAES,EAAE,EAAEF,EAAE,EAAEM,WAAW,EAAEW,IAAI,CAAC;EAEhD,KAAIT,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,OAAO,CAACK,MAAM,EAAED,CAAC,EAAE,EAAE;IAChCD,EAAE,GAAGH,OAAO,CAACI,CAAC,CAAC;IAEf,KAAI,IAAIkB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGnB,EAAE,CAACE,MAAM,EAAEiB,CAAC,EAAE,EAAE;MAC/B,IAAGA,CAAC,GAAG,CAAC,GAAGnB,EAAE,CAACE,MAAM,EAAE;QAClBF,EAAE,CAACmB,CAAC,CAAC,CAACC,MAAM,GAAGpB,EAAE,CAACmB,CAAC,GAAG,CAAC,CAAC,CAACE,EAAE;QAC3BrB,EAAE,CAACmB,CAAC,CAAC,CAACG,MAAM,GAAGtB,EAAE,CAACmB,CAAC,GAAG,CAAC,CAAC,CAACI,EAAE;QAE3BvB,EAAE,CAACmB,CAAC,CAAC,CAACK,MAAM,GAAGxB,EAAE,CAACmB,CAAC,GAAG,CAAC,CAAC,CAACM,EAAE;QAC3BzB,EAAE,CAACmB,CAAC,CAAC,CAACO,MAAM,GAAG1B,EAAE,CAACmB,CAAC,GAAG,CAAC,CAAC,CAACQ,EAAE;MAC/B;IACJ;EACJ;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script"}