{"ast":null,"code":"'use strict';\n\nvar mat4X4 = require('gl-mat4');\nexports.init2dArray = function (rowLength, colLength) {\n  var array = new Array(rowLength);\n  for (var i = 0; i < rowLength; i++) array[i] = new Array(colLength);\n  return array;\n};\n\n/**\n * transpose a (possibly ragged) 2d array z. inspired by\n * http://stackoverflow.com/questions/17428587/\n * transposing-a-2d-array-in-javascript\n */\nexports.transposeRagged = function (z) {\n  var maxlen = 0;\n  var zlen = z.length;\n  var i, j;\n  // Maximum row length:\n  for (i = 0; i < zlen; i++) maxlen = Math.max(maxlen, z[i].length);\n  var t = new Array(maxlen);\n  for (i = 0; i < maxlen; i++) {\n    t[i] = new Array(zlen);\n    for (j = 0; j < zlen; j++) t[i][j] = z[j][i];\n  }\n  return t;\n};\n\n// our own dot function so that we don't need to include numeric\nexports.dot = function (x, y) {\n  if (!(x.length && y.length) || x.length !== y.length) return null;\n  var len = x.length;\n  var out;\n  var i;\n  if (x[0].length) {\n    // mat-vec or mat-mat\n    out = new Array(len);\n    for (i = 0; i < len; i++) out[i] = exports.dot(x[i], y);\n  } else if (y[0].length) {\n    // vec-mat\n    var yTranspose = exports.transposeRagged(y);\n    out = new Array(yTranspose.length);\n    for (i = 0; i < yTranspose.length; i++) out[i] = exports.dot(x, yTranspose[i]);\n  } else {\n    // vec-vec\n    out = 0;\n    for (i = 0; i < len; i++) out += x[i] * y[i];\n  }\n  return out;\n};\n\n// translate by (x,y)\nexports.translationMatrix = function (x, y) {\n  return [[1, 0, x], [0, 1, y], [0, 0, 1]];\n};\n\n// rotate by alpha around (0,0)\nexports.rotationMatrix = function (alpha) {\n  var a = alpha * Math.PI / 180;\n  return [[Math.cos(a), -Math.sin(a), 0], [Math.sin(a), Math.cos(a), 0], [0, 0, 1]];\n};\n\n// rotate by alpha around (x,y)\nexports.rotationXYMatrix = function (a, x, y) {\n  return exports.dot(exports.dot(exports.translationMatrix(x, y), exports.rotationMatrix(a)), exports.translationMatrix(-x, -y));\n};\n\n// applies a 3D transformation matrix to either x, y and z params\n// Note: z is optional\nexports.apply3DTransform = function (transform) {\n  return function () {\n    var args = arguments;\n    var xyz = arguments.length === 1 ? args[0] : [args[0], args[1], args[2] || 0];\n    return exports.dot(transform, [xyz[0], xyz[1], xyz[2], 1]).slice(0, 3);\n  };\n};\n\n// applies a 2D transformation matrix to either x and y params or an [x,y] array\nexports.apply2DTransform = function (transform) {\n  return function () {\n    var args = arguments;\n    if (args.length === 3) {\n      args = args[0];\n    } // from map\n    var xy = arguments.length === 1 ? args[0] : [args[0], args[1]];\n    return exports.dot(transform, [xy[0], xy[1], 1]).slice(0, 2);\n  };\n};\n\n// applies a 2D transformation matrix to an [x1,y1,x2,y2] array (to transform a segment)\nexports.apply2DTransform2 = function (transform) {\n  var at = exports.apply2DTransform(transform);\n  return function (xys) {\n    return at(xys.slice(0, 2)).concat(at(xys.slice(2, 4)));\n  };\n};\nexports.convertCssMatrix = function (m) {\n  if (m) {\n    var len = m.length;\n    if (len === 16) return m;\n    if (len === 6) {\n      // converts a 2x3 css transform matrix to a 4x4 matrix see https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/matrix\n      return [m[0], m[1], 0, 0, m[2], m[3], 0, 0, 0, 0, 1, 0, m[4], m[5], 0, 1];\n    }\n  }\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n};\n\n// find the inverse for a 4x4 affine transform matrix\nexports.inverseTransformMatrix = function (m) {\n  var out = [];\n  mat4X4.invert(out, m);\n  return [[out[0], out[1], out[2], out[3]], [out[4], out[5], out[6], out[7]], [out[8], out[9], out[10], out[11]], [out[12], out[13], out[14], out[15]]];\n};","map":{"version":3,"names":["mat4X4","require","exports","init2dArray","rowLength","colLength","array","Array","i","transposeRagged","z","maxlen","zlen","length","j","Math","max","t","dot","x","y","len","out","yTranspose","translationMatrix","rotationMatrix","alpha","a","PI","cos","sin","rotationXYMatrix","apply3DTransform","transform","args","arguments","xyz","slice","apply2DTransform","xy","apply2DTransform2","at","xys","concat","convertCssMatrix","m","inverseTransformMatrix","invert"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/lib/matrix.js"],"sourcesContent":["'use strict';\n\nvar mat4X4 = require('gl-mat4');\n\nexports.init2dArray = function(rowLength, colLength) {\n    var array = new Array(rowLength);\n    for(var i = 0; i < rowLength; i++) array[i] = new Array(colLength);\n    return array;\n};\n\n/**\n * transpose a (possibly ragged) 2d array z. inspired by\n * http://stackoverflow.com/questions/17428587/\n * transposing-a-2d-array-in-javascript\n */\nexports.transposeRagged = function(z) {\n    var maxlen = 0;\n    var zlen = z.length;\n    var i, j;\n    // Maximum row length:\n    for(i = 0; i < zlen; i++) maxlen = Math.max(maxlen, z[i].length);\n\n    var t = new Array(maxlen);\n    for(i = 0; i < maxlen; i++) {\n        t[i] = new Array(zlen);\n        for(j = 0; j < zlen; j++) t[i][j] = z[j][i];\n    }\n\n    return t;\n};\n\n// our own dot function so that we don't need to include numeric\nexports.dot = function(x, y) {\n    if(!(x.length && y.length) || x.length !== y.length) return null;\n\n    var len = x.length;\n    var out;\n    var i;\n\n    if(x[0].length) {\n        // mat-vec or mat-mat\n        out = new Array(len);\n        for(i = 0; i < len; i++) out[i] = exports.dot(x[i], y);\n    } else if(y[0].length) {\n        // vec-mat\n        var yTranspose = exports.transposeRagged(y);\n        out = new Array(yTranspose.length);\n        for(i = 0; i < yTranspose.length; i++) out[i] = exports.dot(x, yTranspose[i]);\n    } else {\n        // vec-vec\n        out = 0;\n        for(i = 0; i < len; i++) out += x[i] * y[i];\n    }\n\n    return out;\n};\n\n// translate by (x,y)\nexports.translationMatrix = function(x, y) {\n    return [[1, 0, x], [0, 1, y], [0, 0, 1]];\n};\n\n// rotate by alpha around (0,0)\nexports.rotationMatrix = function(alpha) {\n    var a = alpha * Math.PI / 180;\n    return [[Math.cos(a), -Math.sin(a), 0],\n            [Math.sin(a), Math.cos(a), 0],\n            [0, 0, 1]];\n};\n\n// rotate by alpha around (x,y)\nexports.rotationXYMatrix = function(a, x, y) {\n    return exports.dot(\n        exports.dot(exports.translationMatrix(x, y),\n                    exports.rotationMatrix(a)),\n        exports.translationMatrix(-x, -y));\n};\n\n// applies a 3D transformation matrix to either x, y and z params\n// Note: z is optional\nexports.apply3DTransform = function(transform) {\n    return function() {\n        var args = arguments;\n        var xyz = arguments.length === 1 ? args[0] : [args[0], args[1], args[2] || 0];\n        return exports.dot(transform, [xyz[0], xyz[1], xyz[2], 1]).slice(0, 3);\n    };\n};\n\n// applies a 2D transformation matrix to either x and y params or an [x,y] array\nexports.apply2DTransform = function(transform) {\n    return function() {\n        var args = arguments;\n        if(args.length === 3) {\n            args = args[0];\n        } // from map\n        var xy = arguments.length === 1 ? args[0] : [args[0], args[1]];\n        return exports.dot(transform, [xy[0], xy[1], 1]).slice(0, 2);\n    };\n};\n\n// applies a 2D transformation matrix to an [x1,y1,x2,y2] array (to transform a segment)\nexports.apply2DTransform2 = function(transform) {\n    var at = exports.apply2DTransform(transform);\n    return function(xys) {\n        return at(xys.slice(0, 2)).concat(at(xys.slice(2, 4)));\n    };\n};\n\nexports.convertCssMatrix = function(m) {\n    if(m) {\n        var len = m.length;\n        if(len === 16) return m;\n        if(len === 6) {\n            // converts a 2x3 css transform matrix to a 4x4 matrix see https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/matrix\n            return [\n                m[0], m[1], 0, 0,\n                m[2], m[3], 0, 0,\n                0, 0, 1, 0,\n                m[4], m[5], 0, 1\n            ];\n        }\n    }\n    return [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1\n    ];\n};\n\n// find the inverse for a 4x4 affine transform matrix\nexports.inverseTransformMatrix = function(m) {\n    var out = [];\n    mat4X4.invert(out, m);\n    return [\n        [out[0], out[1], out[2], out[3]],\n        [out[4], out[5], out[6], out[7]],\n        [out[8], out[9], out[10], out[11]],\n        [out[12], out[13], out[14], out[15]]\n    ];\n};\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,MAAM,GAAGC,OAAO,CAAC,SAAS,CAAC;AAE/BC,OAAO,CAACC,WAAW,GAAG,UAASC,SAAS,EAAEC,SAAS,EAAE;EACjD,IAAIC,KAAK,GAAG,IAAIC,KAAK,CAACH,SAAS,CAAC;EAChC,KAAI,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,SAAS,EAAEI,CAAC,EAAE,EAAEF,KAAK,CAACE,CAAC,CAAC,GAAG,IAAID,KAAK,CAACF,SAAS,CAAC;EAClE,OAAOC,KAAK;AAChB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACAJ,OAAO,CAACO,eAAe,GAAG,UAASC,CAAC,EAAE;EAClC,IAAIC,MAAM,GAAG,CAAC;EACd,IAAIC,IAAI,GAAGF,CAAC,CAACG,MAAM;EACnB,IAAIL,CAAC,EAAEM,CAAC;EACR;EACA,KAAIN,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGI,IAAI,EAAEJ,CAAC,EAAE,EAAEG,MAAM,GAAGI,IAAI,CAACC,GAAG,CAACL,MAAM,EAAED,CAAC,CAACF,CAAC,CAAC,CAACK,MAAM,CAAC;EAEhE,IAAII,CAAC,GAAG,IAAIV,KAAK,CAACI,MAAM,CAAC;EACzB,KAAIH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGG,MAAM,EAAEH,CAAC,EAAE,EAAE;IACxBS,CAAC,CAACT,CAAC,CAAC,GAAG,IAAID,KAAK,CAACK,IAAI,CAAC;IACtB,KAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,IAAI,EAAEE,CAAC,EAAE,EAAEG,CAAC,CAACT,CAAC,CAAC,CAACM,CAAC,CAAC,GAAGJ,CAAC,CAACI,CAAC,CAAC,CAACN,CAAC,CAAC;EAC/C;EAEA,OAAOS,CAAC;AACZ,CAAC;;AAED;AACAf,OAAO,CAACgB,GAAG,GAAG,UAASC,CAAC,EAAEC,CAAC,EAAE;EACzB,IAAG,EAAED,CAAC,CAACN,MAAM,IAAIO,CAAC,CAACP,MAAM,CAAC,IAAIM,CAAC,CAACN,MAAM,KAAKO,CAAC,CAACP,MAAM,EAAE,OAAO,IAAI;EAEhE,IAAIQ,GAAG,GAAGF,CAAC,CAACN,MAAM;EAClB,IAAIS,GAAG;EACP,IAAId,CAAC;EAEL,IAAGW,CAAC,CAAC,CAAC,CAAC,CAACN,MAAM,EAAE;IACZ;IACAS,GAAG,GAAG,IAAIf,KAAK,CAACc,GAAG,CAAC;IACpB,KAAIb,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGa,GAAG,EAAEb,CAAC,EAAE,EAAEc,GAAG,CAACd,CAAC,CAAC,GAAGN,OAAO,CAACgB,GAAG,CAACC,CAAC,CAACX,CAAC,CAAC,EAAEY,CAAC,CAAC;EAC1D,CAAC,MAAM,IAAGA,CAAC,CAAC,CAAC,CAAC,CAACP,MAAM,EAAE;IACnB;IACA,IAAIU,UAAU,GAAGrB,OAAO,CAACO,eAAe,CAACW,CAAC,CAAC;IAC3CE,GAAG,GAAG,IAAIf,KAAK,CAACgB,UAAU,CAACV,MAAM,CAAC;IAClC,KAAIL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGe,UAAU,CAACV,MAAM,EAAEL,CAAC,EAAE,EAAEc,GAAG,CAACd,CAAC,CAAC,GAAGN,OAAO,CAACgB,GAAG,CAACC,CAAC,EAAEI,UAAU,CAACf,CAAC,CAAC,CAAC;EACjF,CAAC,MAAM;IACH;IACAc,GAAG,GAAG,CAAC;IACP,KAAId,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGa,GAAG,EAAEb,CAAC,EAAE,EAAEc,GAAG,IAAIH,CAAC,CAACX,CAAC,CAAC,GAAGY,CAAC,CAACZ,CAAC,CAAC;EAC/C;EAEA,OAAOc,GAAG;AACd,CAAC;;AAED;AACApB,OAAO,CAACsB,iBAAiB,GAAG,UAASL,CAAC,EAAEC,CAAC,EAAE;EACvC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAED,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAEC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC5C,CAAC;;AAED;AACAlB,OAAO,CAACuB,cAAc,GAAG,UAASC,KAAK,EAAE;EACrC,IAAIC,CAAC,GAAGD,KAAK,GAAGX,IAAI,CAACa,EAAE,GAAG,GAAG;EAC7B,OAAO,CAAC,CAACb,IAAI,CAACc,GAAG,CAACF,CAAC,CAAC,EAAE,CAACZ,IAAI,CAACe,GAAG,CAACH,CAAC,CAAC,EAAE,CAAC,CAAC,EAC9B,CAACZ,IAAI,CAACe,GAAG,CAACH,CAAC,CAAC,EAAEZ,IAAI,CAACc,GAAG,CAACF,CAAC,CAAC,EAAE,CAAC,CAAC,EAC7B,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACtB,CAAC;;AAED;AACAzB,OAAO,CAAC6B,gBAAgB,GAAG,UAASJ,CAAC,EAAER,CAAC,EAAEC,CAAC,EAAE;EACzC,OAAOlB,OAAO,CAACgB,GAAG,CACdhB,OAAO,CAACgB,GAAG,CAAChB,OAAO,CAACsB,iBAAiB,CAACL,CAAC,EAAEC,CAAC,CAAC,EAC/BlB,OAAO,CAACuB,cAAc,CAACE,CAAC,CAAC,CAAC,EACtCzB,OAAO,CAACsB,iBAAiB,CAAC,CAACL,CAAC,EAAE,CAACC,CAAC,CAAC,CAAC;AAC1C,CAAC;;AAED;AACA;AACAlB,OAAO,CAAC8B,gBAAgB,GAAG,UAASC,SAAS,EAAE;EAC3C,OAAO,YAAW;IACd,IAAIC,IAAI,GAAGC,SAAS;IACpB,IAAIC,GAAG,GAAGD,SAAS,CAACtB,MAAM,KAAK,CAAC,GAAGqB,IAAI,CAAC,CAAC,CAAC,GAAG,CAACA,IAAI,CAAC,CAAC,CAAC,EAAEA,IAAI,CAAC,CAAC,CAAC,EAAEA,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;IAC7E,OAAOhC,OAAO,CAACgB,GAAG,CAACe,SAAS,EAAE,CAACG,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EAC1E,CAAC;AACL,CAAC;;AAED;AACAnC,OAAO,CAACoC,gBAAgB,GAAG,UAASL,SAAS,EAAE;EAC3C,OAAO,YAAW;IACd,IAAIC,IAAI,GAAGC,SAAS;IACpB,IAAGD,IAAI,CAACrB,MAAM,KAAK,CAAC,EAAE;MAClBqB,IAAI,GAAGA,IAAI,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC;IACF,IAAIK,EAAE,GAAGJ,SAAS,CAACtB,MAAM,KAAK,CAAC,GAAGqB,IAAI,CAAC,CAAC,CAAC,GAAG,CAACA,IAAI,CAAC,CAAC,CAAC,EAAEA,IAAI,CAAC,CAAC,CAAC,CAAC;IAC9D,OAAOhC,OAAO,CAACgB,GAAG,CAACe,SAAS,EAAE,CAACM,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAACF,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EAChE,CAAC;AACL,CAAC;;AAED;AACAnC,OAAO,CAACsC,iBAAiB,GAAG,UAASP,SAAS,EAAE;EAC5C,IAAIQ,EAAE,GAAGvC,OAAO,CAACoC,gBAAgB,CAACL,SAAS,CAAC;EAC5C,OAAO,UAASS,GAAG,EAAE;IACjB,OAAOD,EAAE,CAACC,GAAG,CAACL,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAACM,MAAM,CAACF,EAAE,CAACC,GAAG,CAACL,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAC1D,CAAC;AACL,CAAC;AAEDnC,OAAO,CAAC0C,gBAAgB,GAAG,UAASC,CAAC,EAAE;EACnC,IAAGA,CAAC,EAAE;IACF,IAAIxB,GAAG,GAAGwB,CAAC,CAAChC,MAAM;IAClB,IAAGQ,GAAG,KAAK,EAAE,EAAE,OAAOwB,CAAC;IACvB,IAAGxB,GAAG,KAAK,CAAC,EAAE;MACV;MACA,OAAO,CACHwB,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAChBA,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAChB,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EACVA,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CACnB;IACL;EACJ;EACA,OAAO,CACH,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EACV,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EACV,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EACV,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CACb;AACL,CAAC;;AAED;AACA3C,OAAO,CAAC4C,sBAAsB,GAAG,UAASD,CAAC,EAAE;EACzC,IAAIvB,GAAG,GAAG,EAAE;EACZtB,MAAM,CAAC+C,MAAM,CAACzB,GAAG,EAAEuB,CAAC,CAAC;EACrB,OAAO,CACH,CAACvB,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,CAAC,EAChC,CAACA,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,CAAC,EAChC,CAACA,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,EAAE,CAAC,EAAEA,GAAG,CAAC,EAAE,CAAC,CAAC,EAClC,CAACA,GAAG,CAAC,EAAE,CAAC,EAAEA,GAAG,CAAC,EAAE,CAAC,EAAEA,GAAG,CAAC,EAAE,CAAC,EAAEA,GAAG,CAAC,EAAE,CAAC,CAAC,CACvC;AACL,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script"}