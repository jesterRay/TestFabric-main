{"ast":null,"code":"import{useEffect,useState}from'react';import{useLocation}from'react-router-dom/';import axios from'axios';import Footer3 from'../Footer3';import Header3 from'../Header3';import PageBanner from'../PageBanner';import bannerBg from'../../assets/img/page-banner.jpg';import{FaDraftingCompass}from'react-icons/fa';// import AllSearch from '../SearchService/allSearch';\nimport SearchResultCard from'../SearchService/SearchResultCard';import AllSearchResult from'../SearchService/AllSearchResult';import\"../SearchService/SearchService.css\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchObj={1:{type:1,url:'search all other '},2:{type:2,url:'search_products'},3:{type:3,url:'search_methods'},4:{type:4,url:'search_subcategory'},5:{type:5,url:'search_test_methods'}};// function to call get the products from api\nasync function searchFunction(type,value){let data={};try{type=Number(type);if(type===1){// get the products\nlet products=await axios.get(\"\".concat(process.env.REACT_APP_API_URL).concat(SearchObj[2].url),{params:{search:value}}).then(response=>{var _response$data;return response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.data;});// get the methods\nlet test_standard=await axios.get(\"\".concat(process.env.REACT_APP_API_URL).concat(SearchObj[3].url),{params:{search:value}}).then(response=>{var _response$data2;return response===null||response===void 0?void 0:(_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.data;});// get the subcategories\nlet subcategory=await axios.get(\"\".concat(process.env.REACT_APP_API_URL).concat(SearchObj[4].url),{params:{search:value}}).then(response=>{var _response$data3;return response===null||response===void 0?void 0:(_response$data3=response.data)===null||_response$data3===void 0?void 0:_response$data3.data;});let methods=await axios.get(\"\".concat(process.env.REACT_APP_API_URL).concat(SearchObj[5].url),{params:{search:value}}).then(response=>{var _response$data4;return response===null||response===void 0?void 0:(_response$data4=response.data)===null||_response$data4===void 0?void 0:_response$data4.data;});// merge the data\ndata={products,test_standard,subcategory,methods};}else{data=await axios.get(\"\".concat(process.env.REACT_APP_API_URL).concat(SearchObj[type].url),{params:{search:value}}).then(response=>{var _response$data5;return response===null||response===void 0?void 0:(_response$data5=response.data)===null||_response$data5===void 0?void 0:_response$data5.data;});}}catch(error){console.error(\"Error fetching data:\",error);}return data;}// show the search result when user search for any product\nconst SearchPage=()=>{const[results,setResults]=useState(null);// getting value from url\nconst location=useLocation();const searchParams=new URLSearchParams(location.search);const search=JSON.parse(searchParams.get('search'));// useEffect to call the product api whenever search value from Url changes\nuseEffect(()=>{if(search.type&&search.value){const fetchData=async()=>{const fetchedProducts=await searchFunction(search.type,search.value);setResults(fetchedProducts);};fetchData();}},[search.type,search.value]);useEffect(()=>{console.log(results);},[results]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header3,{}),/*#__PURE__*/_jsx(PageBanner,{bannerBg:bannerBg,currentPage:\"Search\",heading:\"Testfabric Search\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container d-flex flex-nowrap flex-column justify-content-center align-items-start py-5\",style:{minHeight:\"50vh\"},children:Number(search.type)===1?/*#__PURE__*/_jsx(AllSearchResult,{searchResults:results,search:search}):results&&results.length>0?results.map((data,index)=>/*#__PURE__*/_jsx(SearchResultCard,{productId:data.product__ID,thumbnail:data.product__ID,defaultImg:process.env.REACT_APP_IMAGE_URL+'images/product_testfabrics.jpg',icon:/*#__PURE__*/_jsx(FaDraftingCompass,{}),heading:data.product__Name,text:data!==null&&data!==void 0&&data.product__Description?data.product__Description.slice(0,95)+\"...\":null,subheading:data===null||data===void 0?void 0:data.product__Number,searchType:search.type},data.product__ID)):/*#__PURE__*/_jsx(\"div\",{children:\"No data found\"})}),/*#__PURE__*/_jsx(Footer3,{})]});};export default SearchPage;","map":{"version":3,"names":["useEffect","useState","useLocation","axios","Footer3","Header3","PageBanner","bannerBg","FaDraftingCompass","SearchResultCard","AllSearchResult","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SearchObj","type","url","searchFunction","value","data","Number","products","get","concat","process","env","REACT_APP_API_URL","params","search","then","response","_response$data","test_standard","_response$data2","subcategory","_response$data3","methods","_response$data4","_response$data5","error","console","SearchPage","results","setResults","location","searchParams","URLSearchParams","JSON","parse","fetchData","fetchedProducts","log","children","currentPage","heading","className","style","minHeight","searchResults","length","map","index","productId","product__ID","thumbnail","defaultImg","REACT_APP_IMAGE_URL","icon","product__Name","text","product__Description","slice","subheading","product__Number","searchType"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/src/components/ServiceDetails/SearchPage.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom/';\nimport axios from 'axios';\n\nimport Footer3 from '../Footer3';\nimport Header3 from '../Header3';\nimport PageBanner from '../PageBanner';\nimport bannerBg from '../../assets/img/page-banner.jpg';\nimport { FaDraftingCompass } from 'react-icons/fa';\n// import AllSearch from '../SearchService/allSearch';\nimport SearchResultCard from '../SearchService/SearchResultCard';\nimport AllSearchResult from '../SearchService/AllSearchResult';\nimport \"../SearchService/SearchService.css\";\n\n\nconst SearchObj = {\n    1: {\n        type: 1,\n        url: 'search all other ',\n    },\n    2: {\n        type: 2,\n        url: 'search_products',\n    },\n    3: {\n        type: 3,\n        url: 'search_methods',\n    },\n    4: {\n        type: 4,\n        url: 'search_subcategory',\n    },\n    5: {\n        type: 5,\n        url: 'search_test_methods',\n    },\n}\n\n\n// function to call get the products from api\nasync function searchFunction(type, value) {\n    let data = {};\n  \n    try {\n        type = Number(type);\n        if(type === 1){\n            // get the products\n            let products = await axios.get(`${process.env.REACT_APP_API_URL}${SearchObj[2].url}`, {\n              params: { search: value },\n            }).then((response) => response?.data?.data);\n            // get the methods\n            let test_standard = await axios.get(`${process.env.REACT_APP_API_URL}${SearchObj[3].url}`, {\n                params: { search: value },\n            }).then((response) => response?.data?.data);\n            // get the subcategories\n            let subcategory = await axios.get(`${process.env.REACT_APP_API_URL}${SearchObj[4].url}`, {\n                params: { search: value },\n            }).then((response) => response?.data?.data);\n            let methods = await axios.get(`${process.env.REACT_APP_API_URL}${SearchObj[5].url}`, {\n                params: { search: value },\n            }).then((response) => response?.data?.data);\n\n            // merge the data\n            data = {products, test_standard, subcategory,methods};\n\n        }\n        else {\n            data = await axios.get(`${process.env.REACT_APP_API_URL}${SearchObj[type].url}`, {\n              params: { search: value },\n            }).then((response) => response?.data?.data);\n        }\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    }\n  \n    return data;\n  }\n  \n// show the search result when user search for any product\nconst SearchPage = () => {\n    \n    const [results,setResults] =  useState(null);\n\n    // getting value from url\n    const location = useLocation();\n    const searchParams = new URLSearchParams(location.search);\n    const search = JSON.parse(searchParams.get('search'));\n\n    \n    // useEffect to call the product api whenever search value from Url changes\n    useEffect(() => {\n        if (search.type && search.value) {\n            const fetchData = async () => {\n                const fetchedProducts = await searchFunction(search.type, search.value);\n                setResults(fetchedProducts);\n            };\n            fetchData();\n        }\n    }, [search.type, search.value]);\n\n    useEffect(()=>{\n        console.log(results);\n    },[results])\n\n\n    return(\n        <>\n            <Header3/>\n            <PageBanner bannerBg={bannerBg} currentPage=\"Search\" heading=\"Testfabric Search\" />\n\n            <div className='container d-flex flex-nowrap flex-column justify-content-center align-items-start py-5' style={{minHeight:\"50vh\"}}>\n                {\n                    Number(search.type) === 1 ?\n                        <AllSearchResult searchResults={results} search={search} />\n                    : results && results.length > 0 ?\n                        results.map((data, index) => (\n                            <SearchResultCard\n                                key={data.product__ID}\n                                productId={data.product__ID}\n                                thumbnail={data.product__ID}\n                                defaultImg={process.env.REACT_APP_IMAGE_URL + 'images/product_testfabrics.jpg'}\n                                icon={<FaDraftingCompass />}\n                                heading={data.product__Name}\n                                text={data?.product__Description ? data.product__Description.slice(0, 95) + \"...\" : null}\n                                subheading={data?.product__Number}\n                                searchType={search.type}\n                            /> \n                        ))\n                    : <div>No data found</div>\n                }\n            </div>\n \n            <Footer3/>\n        </>\n    );\n}\n\n\nexport default SearchPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}