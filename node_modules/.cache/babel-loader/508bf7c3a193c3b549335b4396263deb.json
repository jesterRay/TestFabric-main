{"ast":null,"code":"import Cookies from 'js-cookie';\nexport { default as Cookies } from 'js-cookie';\nimport React, { Component } from 'react';\n\n/**\r\n * A function to wrap elements with a \"wrapper\" on a condition\r\n * @param {object} wrappingOptions\r\n *  condition == boolean condition, when to wrap\r\n *  wrapper == style to wrap. e.g <div>{children}</div>\r\n *  children == react passes whatever is between tags as children. Don't supply this yourself.\r\n */\nvar ConditionalWrapper = function ConditionalWrapper(_ref) {\n  var condition = _ref.condition,\n    wrapper = _ref.wrapper,\n    children = _ref.children;\n  return condition ? wrapper(children) : children;\n};\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nvar POSITION_OPTIONS = {\n  TOP: \"top\",\n  BOTTOM: \"bottom\",\n  NONE: \"none\"\n};\nvar SAME_SITE_OPTIONS;\n(function (SAME_SITE_OPTIONS) {\n  SAME_SITE_OPTIONS[\"STRICT\"] = \"strict\";\n  SAME_SITE_OPTIONS[\"LAX\"] = \"lax\";\n  SAME_SITE_OPTIONS[\"NONE\"] = \"none\";\n})(SAME_SITE_OPTIONS || (SAME_SITE_OPTIONS = {}));\nvar VISIBILITY_OPTIONS = {\n  HIDDEN: \"hidden\",\n  SHOW: \"show\",\n  BY_COOKIE_VALUE: \"byCookieValue\"\n};\nvar defaultCookieConsentName = \"CookieConsent\";\nvar _excluded = [\"children\"];\nvar DefaultButtonComponent = function DefaultButtonComponent(_ref) {\n  var children = _ref.children,\n    props = _objectWithoutPropertiesLoose(_ref, _excluded);\n  return React.createElement(\"button\", Object.assign({}, props), children);\n};\nvar defaultCookieConsentProps = {\n  disableStyles: false,\n  hideOnAccept: true,\n  hideOnDecline: true,\n  location: POSITION_OPTIONS.BOTTOM,\n  visible: VISIBILITY_OPTIONS.BY_COOKIE_VALUE,\n  onAccept: function onAccept(_acceptedByScrolling) {},\n  onDecline: function onDecline() {},\n  cookieName: defaultCookieConsentName,\n  cookieValue: \"true\",\n  declineCookieValue: \"false\",\n  setDeclineCookie: true,\n  buttonText: \"I understand\",\n  declineButtonText: \"I decline\",\n  debug: false,\n  expires: 365,\n  containerClasses: \"CookieConsent\",\n  contentClasses: \"\",\n  buttonClasses: \"\",\n  buttonWrapperClasses: \"\",\n  declineButtonClasses: \"\",\n  buttonId: \"rcc-confirm-button\",\n  declineButtonId: \"rcc-decline-button\",\n  extraCookieOptions: {},\n  disableButtonStyles: false,\n  enableDeclineButton: false,\n  flipButtons: false,\n  sameSite: SAME_SITE_OPTIONS.LAX,\n  ButtonComponent: DefaultButtonComponent,\n  overlay: false,\n  overlayClasses: \"\",\n  onOverlayClick: function onOverlayClick() {},\n  acceptOnOverlayClick: false,\n  ariaAcceptLabel: \"Accept cookies\",\n  ariaDeclineLabel: \"Decline cookies\",\n  acceptOnScroll: false,\n  acceptOnScrollPercentage: 25,\n  customContentAttributes: {},\n  customContainerAttributes: {},\n  customButtonProps: {},\n  customDeclineButtonProps: {},\n  customButtonWrapperAttributes: {},\n  style: {},\n  buttonStyle: {},\n  declineButtonStyle: {},\n  contentStyle: {},\n  overlayStyle: {}\n};\nvar defaultState = {\n  visible: false,\n  style: {\n    alignItems: \"baseline\",\n    background: \"#353535\",\n    color: \"white\",\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-between\",\n    left: \"0\",\n    position: \"fixed\",\n    width: \"100%\",\n    zIndex: \"999\"\n  },\n  buttonStyle: {\n    background: \"#ffd42d\",\n    border: \"0\",\n    borderRadius: \"0px\",\n    boxShadow: \"none\",\n    color: \"black\",\n    cursor: \"pointer\",\n    flex: \"0 0 auto\",\n    padding: \"5px 10px\",\n    margin: \"15px\"\n  },\n  declineButtonStyle: {\n    background: \"#c12a2a\",\n    border: \"0\",\n    borderRadius: \"0px\",\n    boxShadow: \"none\",\n    color: \"#e5e5e5\",\n    cursor: \"pointer\",\n    flex: \"0 0 auto\",\n    padding: \"5px 10px\",\n    margin: \"15px\"\n  },\n  contentStyle: {\n    flex: \"1 0 300px\",\n    margin: \"15px\"\n  },\n  overlayStyle: {\n    position: \"fixed\",\n    left: 0,\n    top: 0,\n    width: \"100%\",\n    height: \"100%\",\n    zIndex: \"999\",\n    backgroundColor: \"rgba(0,0,0,0.3)\"\n  }\n};\n\n/**\r\n * Returns the value of the consent cookie\r\n * Retrieves the regular value first and if not found the legacy one according\r\n * to: https://web.dev/samesite-cookie-recipes/#handling-incompatible-clients\r\n * @param {*} name optional name of the cookie\r\n */\nvar getCookieConsentValue = function getCookieConsentValue(name) {\n  if (name === void 0) {\n    name = defaultCookieConsentName;\n  }\n  var cookieValue = Cookies.get(name);\n  // if the cookieValue is undefined check for the legacy cookie\n  if (cookieValue === undefined) {\n    return Cookies.get(getLegacyCookieName(name));\n  }\n  return cookieValue;\n};\n/**\r\n * Reset the consent cookie\r\n * Remove the cookie on browser in order to allow user to change their consent\r\n * @param {*} name optional name of the cookie\r\n */\nvar resetCookieConsentValue = function resetCookieConsentValue(name) {\n  if (name === void 0) {\n    name = defaultCookieConsentName;\n  }\n  Cookies.remove(name);\n};\n/**\r\n * Get the legacy cookie name by the regular cookie name\r\n * @param {string} name of cookie to get\r\n */\nvar getLegacyCookieName = function getLegacyCookieName(name) {\n  return name + \"-legacy\";\n};\nvar CookieConsent = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(CookieConsent, _Component);\n  function CookieConsent() {\n    var _this;\n    _this = _Component.apply(this, arguments) || this;\n    _this.state = defaultState;\n    /**\r\n     * checks whether scroll has exceeded set amount and fire accept if so.\r\n     */\n    _this.handleScroll = function () {\n      var _defaultCookieConsent = _extends({}, defaultCookieConsentProps, _this.props),\n        acceptOnScrollPercentage = _defaultCookieConsent.acceptOnScrollPercentage;\n      // (top / height) - height * 100\n      var rootNode = document.documentElement;\n      var body = document.body;\n      var top = \"scrollTop\";\n      var height = \"scrollHeight\";\n      var percentage = (rootNode[top] || body[top]) / ((rootNode[height] || body[height]) - rootNode.clientHeight) * 100;\n      if (percentage > acceptOnScrollPercentage) {\n        _this.accept(true);\n      }\n    };\n    _this.removeScrollListener = function () {\n      var acceptOnScroll = _this.props.acceptOnScroll;\n      if (acceptOnScroll) {\n        window.removeEventListener(\"scroll\", _this.handleScroll);\n      }\n    };\n    return _this;\n  }\n  var _proto = CookieConsent.prototype;\n  _proto.componentDidMount = function componentDidMount() {\n    var debug = this.props.debug;\n    // if cookie undefined or debug\n    if (this.getCookieValue() === undefined || debug) {\n      this.setState({\n        visible: true\n      });\n      // if acceptOnScroll is set to true and (cookie is undefined or debug is set to true), add a listener.\n      if (this.props.acceptOnScroll) {\n        window.addEventListener(\"scroll\", this.handleScroll, {\n          passive: true\n        });\n      }\n    }\n  };\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    // remove listener if still set\n    this.removeScrollListener();\n  }\n  /**\r\n   * Set a persistent accept cookie\r\n   */;\n  _proto.accept = function accept(acceptedByScrolling) {\n    var _acceptedByScrolling;\n    if (acceptedByScrolling === void 0) {\n      acceptedByScrolling = false;\n    }\n    var _defaultCookieConsent2 = _extends({}, defaultCookieConsentProps, this.props),\n      cookieName = _defaultCookieConsent2.cookieName,\n      cookieValue = _defaultCookieConsent2.cookieValue,\n      hideOnAccept = _defaultCookieConsent2.hideOnAccept,\n      onAccept = _defaultCookieConsent2.onAccept;\n    this.setCookie(cookieName, cookieValue);\n    onAccept((_acceptedByScrolling = acceptedByScrolling) != null ? _acceptedByScrolling : false);\n    if (hideOnAccept) {\n      this.setState({\n        visible: false\n      });\n      this.removeScrollListener();\n    }\n  }\n  /**\r\n   * Handle a click on the overlay\r\n   */;\n  _proto.overlayClick = function overlayClick() {\n    var _defaultCookieConsent3 = _extends({}, defaultCookieConsentProps, this.props),\n      acceptOnOverlayClick = _defaultCookieConsent3.acceptOnOverlayClick,\n      onOverlayClick = _defaultCookieConsent3.onOverlayClick;\n    if (acceptOnOverlayClick) {\n      this.accept();\n    }\n    onOverlayClick();\n  }\n  /**\r\n   * Set a persistent decline cookie\r\n   */;\n  _proto.decline = function decline() {\n    var _defaultCookieConsent4 = _extends({}, defaultCookieConsentProps, this.props),\n      cookieName = _defaultCookieConsent4.cookieName,\n      declineCookieValue = _defaultCookieConsent4.declineCookieValue,\n      hideOnDecline = _defaultCookieConsent4.hideOnDecline,\n      onDecline = _defaultCookieConsent4.onDecline,\n      setDeclineCookie = _defaultCookieConsent4.setDeclineCookie;\n    if (setDeclineCookie) {\n      this.setCookie(cookieName, declineCookieValue);\n    }\n    onDecline();\n    if (hideOnDecline) {\n      this.setState({\n        visible: false\n      });\n    }\n  }\n  /**\r\n   * Function to set the consent cookie based on the provided variables\r\n   * Sets two cookies to handle incompatible browsers, more details:\r\n   * https://web.dev/samesite-cookie-recipes/#handling-incompatible-clients\r\n   */;\n  _proto.setCookie = function setCookie(cookieName, cookieValue) {\n    var _this$props = this.props,\n      extraCookieOptions = _this$props.extraCookieOptions,\n      expires = _this$props.expires,\n      sameSite = _this$props.sameSite;\n    var cookieSecurity = this.props.cookieSecurity;\n    if (cookieSecurity === undefined) {\n      cookieSecurity = window.location ? window.location.protocol === \"https:\" : true;\n    }\n    var cookieOptions = _extends({\n      expires: expires\n    }, extraCookieOptions, {\n      sameSite: sameSite,\n      secure: cookieSecurity\n    });\n    // Fallback for older browsers where can not set SameSite=None,\n    // SEE: https://web.dev/samesite-cookie-recipes/#handling-incompatible-clients\n    if (sameSite === SAME_SITE_OPTIONS.NONE) {\n      Cookies.set(getLegacyCookieName(cookieName), cookieValue, cookieOptions);\n    }\n    // set the regular cookie\n    Cookies.set(cookieName, cookieValue, cookieOptions);\n  }\n  /**\r\n   * Returns the value of the consent cookie\r\n   * Retrieves the regular value first and if not found the legacy one according\r\n   * to: https://web.dev/samesite-cookie-recipes/#handling-incompatible-clients\r\n   */;\n  _proto.getCookieValue = function getCookieValue() {\n    var cookieName = this.props.cookieName;\n    return getCookieConsentValue(cookieName);\n  };\n  _proto.render = function render() {\n    var _this2 = this;\n    // If the bar shouldn't be visible don't render anything.\n    switch (this.props.visible) {\n      case VISIBILITY_OPTIONS.HIDDEN:\n        return null;\n      case VISIBILITY_OPTIONS.BY_COOKIE_VALUE:\n        if (!this.state.visible) {\n          return null;\n        }\n        break;\n    }\n    var _this$props2 = this.props,\n      location = _this$props2.location,\n      style = _this$props2.style,\n      buttonStyle = _this$props2.buttonStyle,\n      declineButtonStyle = _this$props2.declineButtonStyle,\n      contentStyle = _this$props2.contentStyle,\n      disableStyles = _this$props2.disableStyles,\n      buttonText = _this$props2.buttonText,\n      declineButtonText = _this$props2.declineButtonText,\n      containerClasses = _this$props2.containerClasses,\n      contentClasses = _this$props2.contentClasses,\n      buttonClasses = _this$props2.buttonClasses,\n      buttonWrapperClasses = _this$props2.buttonWrapperClasses,\n      declineButtonClasses = _this$props2.declineButtonClasses,\n      buttonId = _this$props2.buttonId,\n      declineButtonId = _this$props2.declineButtonId,\n      disableButtonStyles = _this$props2.disableButtonStyles,\n      enableDeclineButton = _this$props2.enableDeclineButton,\n      flipButtons = _this$props2.flipButtons,\n      ButtonComponent = _this$props2.ButtonComponent,\n      overlay = _this$props2.overlay,\n      overlayClasses = _this$props2.overlayClasses,\n      overlayStyle = _this$props2.overlayStyle,\n      ariaAcceptLabel = _this$props2.ariaAcceptLabel,\n      ariaDeclineLabel = _this$props2.ariaDeclineLabel,\n      customContainerAttributes = _this$props2.customContainerAttributes,\n      customContentAttributes = _this$props2.customContentAttributes,\n      customButtonProps = _this$props2.customButtonProps,\n      customDeclineButtonProps = _this$props2.customDeclineButtonProps,\n      customButtonWrapperAttributes = _this$props2.customButtonWrapperAttributes;\n    var myStyle = {};\n    var myButtonStyle = {};\n    var myDeclineButtonStyle = {};\n    var myContentStyle = {};\n    var myOverlayStyle = {};\n    if (disableStyles) {\n      // if styles are disabled use the provided styles (or none)\n      myStyle = Object.assign({}, style);\n      myButtonStyle = Object.assign({}, buttonStyle);\n      myDeclineButtonStyle = Object.assign({}, declineButtonStyle);\n      myContentStyle = Object.assign({}, contentStyle);\n      myOverlayStyle = Object.assign({}, overlayStyle);\n    } else {\n      // if styles aren't disabled merge them with the styles that are provided (or use default styles)\n      myStyle = Object.assign({}, _extends({}, this.state.style, style));\n      myContentStyle = Object.assign({}, _extends({}, this.state.contentStyle, contentStyle));\n      myOverlayStyle = Object.assign({}, _extends({}, this.state.overlayStyle, overlayStyle));\n      // switch to disable JUST the button styles\n      if (disableButtonStyles) {\n        myButtonStyle = Object.assign({}, buttonStyle);\n        myDeclineButtonStyle = Object.assign({}, declineButtonStyle);\n      } else {\n        myButtonStyle = Object.assign({}, _extends({}, this.state.buttonStyle, buttonStyle));\n        myDeclineButtonStyle = Object.assign({}, _extends({}, this.state.declineButtonStyle, declineButtonStyle));\n      }\n    }\n    // syntactic sugar to enable user to easily select top / bottom\n    switch (location) {\n      case POSITION_OPTIONS.TOP:\n        myStyle.top = \"0\";\n        break;\n      case POSITION_OPTIONS.BOTTOM:\n        myStyle.bottom = \"0\";\n        break;\n    }\n    var buttonsToRender = [];\n    // add decline button\n    enableDeclineButton && buttonsToRender.push(React.createElement(ButtonComponent, Object.assign({\n      key: \"declineButton\",\n      style: myDeclineButtonStyle,\n      className: declineButtonClasses,\n      id: declineButtonId,\n      \"aria-label\": ariaDeclineLabel,\n      onClick: function onClick() {\n        _this2.decline();\n      }\n    }, customDeclineButtonProps), declineButtonText));\n    // add accept button\n    buttonsToRender.push(React.createElement(ButtonComponent, Object.assign({\n      key: \"acceptButton\",\n      style: myButtonStyle,\n      className: buttonClasses,\n      id: buttonId,\n      \"aria-label\": ariaAcceptLabel,\n      onClick: function onClick() {\n        _this2.accept();\n      }\n    }, customButtonProps), buttonText));\n    if (flipButtons) {\n      buttonsToRender.reverse();\n    }\n    return React.createElement(ConditionalWrapper, {\n      condition: overlay,\n      wrapper: function wrapper(children) {\n        return React.createElement(\"div\", {\n          style: myOverlayStyle,\n          className: overlayClasses,\n          onClick: function onClick() {\n            _this2.overlayClick();\n          }\n        }, children);\n      }\n    }, React.createElement(\"div\", Object.assign({\n      className: \"\" + containerClasses,\n      style: myStyle\n    }, customContainerAttributes), React.createElement(\"div\", Object.assign({\n      style: myContentStyle,\n      className: contentClasses\n    }, customContentAttributes), this.props.children), React.createElement(\"div\", Object.assign({\n      className: \"\" + buttonWrapperClasses\n    }, customButtonWrapperAttributes), buttonsToRender.map(function (button) {\n      return button;\n    }))));\n  };\n  return CookieConsent;\n}(Component);\nCookieConsent.defaultProps = defaultCookieConsentProps;\nexport default CookieConsent;\nexport { ConditionalWrapper, CookieConsent, POSITION_OPTIONS as OPTIONS, POSITION_OPTIONS, SAME_SITE_OPTIONS, VISIBILITY_OPTIONS, VISIBILITY_OPTIONS as VISIBLE_OPTIONS, defaultCookieConsentName, getCookieConsentValue, getLegacyCookieName, resetCookieConsentValue };","map":{"version":3,"sources":["../src/components/ConditionalWrapper.tsx","../src/models/constants/positionOptions.ts","../src/models/constants/sameSiteOptions.ts","../src/models/constants/visibilityOptions.ts","../src/models/constants/defaultCookieName.ts","../src/CookieConsent.props.tsx","../src/CookieConsent.state.ts","../src/utilities.ts","../src/CookieConsent.tsx"],"names":["ConditionalWrapper","condition","wrapper","children","POSITION_OPTIONS","TOP","BOTTOM","NONE","SAME_SITE_OPTIONS","VISIBILITY_OPTIONS","HIDDEN","SHOW","BY_COOKIE_VALUE","defaultCookieConsentName","DefaultButtonComponent","props","React","defaultCookieConsentProps","disableStyles","hideOnAccept","hideOnDecline","location","visible","onAccept","_acceptedByScrolling","onDecline","cookieName","cookieValue","declineCookieValue","setDeclineCookie","buttonText","declineButtonText","debug","expires","containerClasses","contentClasses","buttonClasses","buttonWrapperClasses","declineButtonClasses","buttonId","declineButtonId","extraCookieOptions","disableButtonStyles","enableDeclineButton","flipButtons","sameSite","LAX","ButtonComponent","overlay","overlayClasses","onOverlayClick","acceptOnOverlayClick","ariaAcceptLabel","ariaDeclineLabel","acceptOnScroll","acceptOnScrollPercentage","customContentAttributes","customContainerAttributes","customButtonProps","customDeclineButtonProps","customButtonWrapperAttributes","style","buttonStyle","declineButtonStyle","contentStyle","overlayStyle","defaultState","alignItems","background","color","display","flexWrap","justifyContent","left","position","width","zIndex","border","borderRadius","boxShadow","cursor","flex","padding","margin","top","height","backgroundColor","getCookieConsentValue","name","Cookies","get","undefined","getLegacyCookieName","resetCookieConsentValue","remove","CookieConsent","_inheritsLoose","Component","_this","componentDidMount","getCookieValue","setState","window","addEventListener","handleScroll","passive","_proto","componentWillUnmount","removeScrollListener","accept","acceptedByScrolling","setCookie","overlayClick","decline","cookieSecurity","protocol","cookieOptions","secure","set","rootNode","document","documentElement","body","percentage","clientHeight","removeEventListener","render","state","myStyle","myButtonStyle","myDeclineButtonStyle","myContentStyle","myOverlayStyle","Object","assign","bottom","buttonsToRender","push","key","className","id","onClick","_this2","reverse","map","button"],"mappings":"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","sourcesContent":["import { FunctionComponent, ReactNode } from \"react\";\n\ntype Props = {\n  condition?: boolean;\n  wrapper: (_: ReactNode) => any;\n  children: ReactNode;\n};\n\n/**\n * A function to wrap elements with a \"wrapper\" on a condition\n * @param {object} wrappingOptions\n *  condition == boolean condition, when to wrap\n *  wrapper == style to wrap. e.g <div>{children}</div>\n *  children == react passes whatever is between tags as children. Don't supply this yourself.\n */\nexport const ConditionalWrapper: FunctionComponent<Props> = ({ condition, wrapper, children }) => {\n  return condition ? wrapper(children) : children;\n};\n","export const POSITION_OPTIONS = {\n  TOP: \"top\",\n  BOTTOM: \"bottom\",\n  NONE: \"none\",\n};\n","export enum SAME_SITE_OPTIONS {\n  STRICT = \"strict\",\n  LAX = \"lax\",\n  NONE = \"none\",\n}\n","export const VISIBILITY_OPTIONS = {\n  HIDDEN: \"hidden\",\n  SHOW: \"show\",\n  BY_COOKIE_VALUE: \"byCookieValue\",\n};\n","export const defaultCookieConsentName = \"CookieConsent\";\n","import React, { FunctionComponent, ReactNode } from \"react\";\nimport {\n  defaultCookieConsentName,\n  POSITION_OPTIONS,\n  SAME_SITE_OPTIONS,\n  VISIBILITY_OPTIONS,\n} from \"./models/constants\";\n\nexport interface CookieConsentProps {\n  children?: ReactNode;\n  style?: React.CSSProperties;\n  buttonStyle?: React.CSSProperties;\n  declineButtonStyle?: React.CSSProperties;\n  contentStyle?: React.CSSProperties;\n  disableStyles?: boolean;\n  hideOnAccept?: boolean;\n  hideOnDecline?: boolean;\n  onAccept?: (acceptedByScrolling: boolean) => void;\n  onDecline?: () => void;\n  buttonText?: string | ReactNode | Function;\n  declineButtonText?: string | ReactNode | Function;\n  cookieName?: string;\n  cookieValue?: string | object;\n  declineCookieValue?: string | object;\n  setDeclineCookie?: boolean;\n  debug?: boolean;\n  expires?: number;\n  containerClasses?: string;\n  contentClasses?: string;\n  buttonClasses?: string;\n  buttonWrapperClasses?: string;\n  declineButtonClasses?: string;\n  buttonId?: string;\n  declineButtonId?: string;\n  overlayClasses?: string;\n  ariaAcceptLabel?: string;\n  ariaDeclineLabel?: string;\n  disableButtonStyles?: boolean;\n  enableDeclineButton?: boolean;\n  flipButtons?: boolean;\n  cookieSecurity?: boolean;\n  overlay?: boolean;\n  acceptOnOverlayClick?: boolean;\n  acceptOnScroll?: boolean;\n  acceptOnScrollPercentage?: number;\n  ButtonComponent?: any;\n  extraCookieOptions?: Object;\n  overlayStyle?: Object;\n  customContentAttributes?: Object;\n  customContainerAttributes?: Object;\n  customButtonProps?: Object;\n  customDeclineButtonProps?: Object;\n  customButtonWrapperAttributes?: Object;\n  onOverlayClick?: () => void;\n  // these should be enums\n  location?: string;\n  visible?: string;\n  sameSite?: \"strict\" | \"Strict\" | \"lax\" | \"Lax\" | \"none\" | \"None\";\n}\n\nconst DefaultButtonComponent: FunctionComponent<{ children: ReactNode; [x: string]: any }> = ({\n  children,\n  ...props\n}) => {\n  return <button {...props}>{children}</button>;\n};\n\nexport const defaultCookieConsentProps = {\n  disableStyles: false,\n  hideOnAccept: true,\n  hideOnDecline: true,\n  location: POSITION_OPTIONS.BOTTOM,\n  visible: VISIBILITY_OPTIONS.BY_COOKIE_VALUE,\n  onAccept: (_acceptedByScrolling: boolean) => {},\n  onDecline: () => {},\n  cookieName: defaultCookieConsentName,\n  cookieValue: \"true\",\n  declineCookieValue: \"false\",\n  setDeclineCookie: true,\n  buttonText: \"I understand\",\n  declineButtonText: \"I decline\",\n  debug: false,\n  expires: 365,\n  containerClasses: \"CookieConsent\",\n  contentClasses: \"\",\n  buttonClasses: \"\",\n  buttonWrapperClasses: \"\",\n  declineButtonClasses: \"\",\n  buttonId: \"rcc-confirm-button\",\n  declineButtonId: \"rcc-decline-button\",\n  extraCookieOptions: {},\n  disableButtonStyles: false,\n  enableDeclineButton: false,\n  flipButtons: false,\n  sameSite: SAME_SITE_OPTIONS.LAX,\n  ButtonComponent: DefaultButtonComponent,\n  overlay: false,\n  overlayClasses: \"\",\n  onOverlayClick: () => {},\n  acceptOnOverlayClick: false,\n  ariaAcceptLabel: \"Accept cookies\",\n  ariaDeclineLabel: \"Decline cookies\",\n  acceptOnScroll: false,\n  acceptOnScrollPercentage: 25,\n  customContentAttributes: {},\n  customContainerAttributes: {},\n  customButtonProps: {},\n  customDeclineButtonProps: {},\n  customButtonWrapperAttributes: {},\n  style: {},\n  buttonStyle: {},\n  declineButtonStyle: {},\n  contentStyle: {},\n  overlayStyle: {},\n};\n","export interface CookieConsentState {\n  visible: boolean;\n  style: React.CSSProperties;\n  buttonStyle: React.CSSProperties;\n  declineButtonStyle: React.CSSProperties;\n  contentStyle: React.CSSProperties;\n  overlayStyle: React.CSSProperties;\n}\n\nexport const defaultState: CookieConsentState = {\n  visible: false,\n  style: {\n    alignItems: \"baseline\",\n    background: \"#353535\",\n    color: \"white\",\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-between\",\n    left: \"0\",\n    position: \"fixed\",\n    width: \"100%\",\n    zIndex: \"999\",\n  },\n  buttonStyle: {\n    background: \"#ffd42d\",\n    border: \"0\",\n    borderRadius: \"0px\",\n    boxShadow: \"none\",\n    color: \"black\",\n    cursor: \"pointer\",\n    flex: \"0 0 auto\",\n    padding: \"5px 10px\",\n    margin: \"15px\",\n  },\n  declineButtonStyle: {\n    background: \"#c12a2a\",\n    border: \"0\",\n    borderRadius: \"0px\",\n    boxShadow: \"none\",\n    color: \"#e5e5e5\",\n    cursor: \"pointer\",\n    flex: \"0 0 auto\",\n    padding: \"5px 10px\",\n    margin: \"15px\",\n  },\n  contentStyle: {\n    flex: \"1 0 300px\",\n    margin: \"15px\",\n  },\n  overlayStyle: {\n    position: \"fixed\",\n    left: 0,\n    top: 0,\n    width: \"100%\",\n    height: \"100%\",\n    zIndex: \"999\",\n    backgroundColor: \"rgba(0,0,0,0.3)\",\n  },\n};\n","import Cookies from \"js-cookie\";\nimport { defaultCookieConsentName } from \"./models/constants\";\n\n/**\n * Returns the value of the consent cookie\n * Retrieves the regular value first and if not found the legacy one according\n * to: https://web.dev/samesite-cookie-recipes/#handling-incompatible-clients\n * @param {*} name optional name of the cookie\n */\nexport const getCookieConsentValue = (name = defaultCookieConsentName) => {\n  const cookieValue = Cookies.get(name);\n\n  // if the cookieValue is undefined check for the legacy cookie\n  if (cookieValue === undefined) {\n    return Cookies.get(getLegacyCookieName(name));\n  }\n  return cookieValue;\n};\n\n/**\n * Reset the consent cookie\n * Remove the cookie on browser in order to allow user to change their consent\n * @param {*} name optional name of the cookie\n */\nexport const resetCookieConsentValue = (name = defaultCookieConsentName) => {\n  Cookies.remove(name);\n};\n\n/**\n * Get the legacy cookie name by the regular cookie name\n * @param {string} name of cookie to get\n */\nexport const getLegacyCookieName = (name: string) => {\n  return `${name}-legacy`;\n};\n","import Cookies from \"js-cookie\";\nimport React, { Component, CSSProperties } from \"react\";\nimport { ConditionalWrapper } from \"./components/ConditionalWrapper\";\nimport { CookieConsentProps, defaultCookieConsentProps } from \"./CookieConsent.props\";\nimport { CookieConsentState, defaultState } from \"./CookieConsent.state\";\nimport { POSITION_OPTIONS, SAME_SITE_OPTIONS, VISIBILITY_OPTIONS } from \"./models/constants\";\nimport { getCookieConsentValue, getLegacyCookieName } from \"./utilities\";\n\nexport class CookieConsent extends Component<CookieConsentProps, CookieConsentState> {\n  public static defaultProps = defaultCookieConsentProps;\n\n  state: CookieConsentState = defaultState;\n\n  componentDidMount() {\n    const { debug } = this.props;\n\n    // if cookie undefined or debug\n    if (this.getCookieValue() === undefined || debug) {\n      this.setState({ visible: true });\n      // if acceptOnScroll is set to true and (cookie is undefined or debug is set to true), add a listener.\n      if (this.props.acceptOnScroll) {\n        window.addEventListener(\"scroll\", this.handleScroll, { passive: true });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    // remove listener if still set\n    this.removeScrollListener();\n  }\n\n  /**\n   * Set a persistent accept cookie\n   */\n  accept(acceptedByScrolling = false) {\n    const { cookieName, cookieValue, hideOnAccept, onAccept } = {\n      ...defaultCookieConsentProps,\n      ...this.props,\n    };\n\n    this.setCookie(cookieName, cookieValue);\n\n    onAccept(acceptedByScrolling ?? false);\n\n    if (hideOnAccept) {\n      this.setState({ visible: false });\n      this.removeScrollListener();\n    }\n  }\n\n  /**\n   * Handle a click on the overlay\n   */\n  overlayClick() {\n    const { acceptOnOverlayClick, onOverlayClick } = {\n      ...defaultCookieConsentProps,\n      ...this.props,\n    };\n    if (acceptOnOverlayClick) {\n      this.accept();\n    }\n    onOverlayClick();\n  }\n\n  /**\n   * Set a persistent decline cookie\n   */\n  decline() {\n    const { cookieName, declineCookieValue, hideOnDecline, onDecline, setDeclineCookie } = {\n      ...defaultCookieConsentProps,\n      ...this.props,\n    };\n\n    if (setDeclineCookie) {\n      this.setCookie(cookieName, declineCookieValue);\n    }\n\n    onDecline();\n\n    if (hideOnDecline) {\n      this.setState({ visible: false });\n    }\n  }\n\n  /**\n   * Function to set the consent cookie based on the provided variables\n   * Sets two cookies to handle incompatible browsers, more details:\n   * https://web.dev/samesite-cookie-recipes/#handling-incompatible-clients\n   */\n  setCookie(cookieName: string, cookieValue: string | object) {\n    const { extraCookieOptions, expires, sameSite } = this.props;\n    let { cookieSecurity } = this.props;\n\n    if (cookieSecurity === undefined) {\n      cookieSecurity = window.location ? window.location.protocol === \"https:\" : true;\n    }\n\n    const cookieOptions = { expires, ...extraCookieOptions, sameSite, secure: cookieSecurity };\n\n    // Fallback for older browsers where can not set SameSite=None,\n    // SEE: https://web.dev/samesite-cookie-recipes/#handling-incompatible-clients\n    if (sameSite === SAME_SITE_OPTIONS.NONE) {\n      Cookies.set(getLegacyCookieName(cookieName), cookieValue, cookieOptions);\n    }\n\n    // set the regular cookie\n    Cookies.set(cookieName, cookieValue, cookieOptions);\n  }\n\n  /**\n   * Returns the value of the consent cookie\n   * Retrieves the regular value first and if not found the legacy one according\n   * to: https://web.dev/samesite-cookie-recipes/#handling-incompatible-clients\n   */\n  getCookieValue() {\n    const { cookieName } = this.props;\n    return getCookieConsentValue(cookieName);\n  }\n\n  /**\n   * checks whether scroll has exceeded set amount and fire accept if so.\n   */\n  handleScroll = () => {\n    const { acceptOnScrollPercentage } = { ...defaultCookieConsentProps, ...this.props };\n\n    // (top / height) - height * 100\n    const rootNode = document.documentElement;\n    const body = document.body;\n    const top = \"scrollTop\";\n    const height = \"scrollHeight\";\n\n    const percentage =\n      ((rootNode[top] || body[top]) /\n        ((rootNode[height] || body[height]) - rootNode.clientHeight)) *\n      100;\n\n    if (percentage > acceptOnScrollPercentage) {\n      this.accept(true);\n    }\n  };\n\n  removeScrollListener = () => {\n    const { acceptOnScroll } = this.props;\n    if (acceptOnScroll) {\n      window.removeEventListener(\"scroll\", this.handleScroll);\n    }\n  };\n\n  render() {\n    // If the bar shouldn't be visible don't render anything.\n    switch (this.props.visible) {\n      case VISIBILITY_OPTIONS.HIDDEN:\n        return null;\n      case VISIBILITY_OPTIONS.BY_COOKIE_VALUE:\n        if (!this.state.visible) {\n          return null;\n        }\n        break;\n      default:\n        break;\n    }\n\n    const {\n      location,\n      style,\n      buttonStyle,\n      declineButtonStyle,\n      contentStyle,\n      disableStyles,\n      buttonText,\n      declineButtonText,\n      containerClasses,\n      contentClasses,\n      buttonClasses,\n      buttonWrapperClasses,\n      declineButtonClasses,\n      buttonId,\n      declineButtonId,\n      disableButtonStyles,\n      enableDeclineButton,\n      flipButtons,\n      ButtonComponent,\n      overlay,\n      overlayClasses,\n      overlayStyle,\n      ariaAcceptLabel,\n      ariaDeclineLabel,\n      customContainerAttributes,\n      customContentAttributes,\n      customButtonProps,\n      customDeclineButtonProps,\n      customButtonWrapperAttributes,\n    } = this.props;\n\n    let myStyle: CSSProperties = {};\n    let myButtonStyle: CSSProperties = {};\n    let myDeclineButtonStyle: CSSProperties = {};\n    let myContentStyle: CSSProperties = {};\n    let myOverlayStyle: CSSProperties = {};\n\n    if (disableStyles) {\n      // if styles are disabled use the provided styles (or none)\n      myStyle = Object.assign({}, style);\n      myButtonStyle = Object.assign({}, buttonStyle);\n      myDeclineButtonStyle = Object.assign({}, declineButtonStyle);\n      myContentStyle = Object.assign({}, contentStyle);\n      myOverlayStyle = Object.assign({}, overlayStyle);\n    } else {\n      // if styles aren't disabled merge them with the styles that are provided (or use default styles)\n      myStyle = Object.assign({}, { ...this.state.style, ...style });\n      myContentStyle = Object.assign({}, { ...this.state.contentStyle, ...contentStyle });\n      myOverlayStyle = Object.assign({}, { ...this.state.overlayStyle, ...overlayStyle });\n\n      // switch to disable JUST the button styles\n      if (disableButtonStyles) {\n        myButtonStyle = Object.assign({}, buttonStyle);\n        myDeclineButtonStyle = Object.assign({}, declineButtonStyle);\n      } else {\n        myButtonStyle = Object.assign({}, { ...this.state.buttonStyle, ...buttonStyle });\n        myDeclineButtonStyle = Object.assign(\n          {},\n          { ...this.state.declineButtonStyle, ...declineButtonStyle }\n        );\n      }\n    }\n\n    // syntactic sugar to enable user to easily select top / bottom\n    switch (location) {\n      case POSITION_OPTIONS.TOP:\n        myStyle.top = \"0\";\n        break;\n\n      case POSITION_OPTIONS.BOTTOM:\n        myStyle.bottom = \"0\";\n        break;\n    }\n\n    const buttonsToRender = [];\n\n    // add decline button\n    enableDeclineButton &&\n      buttonsToRender.push(\n        <ButtonComponent\n          key=\"declineButton\"\n          style={myDeclineButtonStyle}\n          className={declineButtonClasses}\n          id={declineButtonId}\n          aria-label={ariaDeclineLabel}\n          onClick={() => {\n            this.decline();\n          }}\n          {...customDeclineButtonProps}\n        >\n          {declineButtonText}\n        </ButtonComponent>\n      );\n\n    // add accept button\n    buttonsToRender.push(\n      <ButtonComponent\n        key=\"acceptButton\"\n        style={myButtonStyle}\n        className={buttonClasses}\n        id={buttonId}\n        aria-label={ariaAcceptLabel}\n        onClick={() => {\n          this.accept();\n        }}\n        {...customButtonProps}\n      >\n        {buttonText}\n      </ButtonComponent>\n    );\n\n    if (flipButtons) {\n      buttonsToRender.reverse();\n    }\n\n    return (\n      <ConditionalWrapper\n        condition={overlay}\n        wrapper={(children) => (\n          <div\n            style={myOverlayStyle}\n            className={overlayClasses}\n            onClick={() => {\n              this.overlayClick();\n            }}\n          >\n            {children}\n          </div>\n        )}\n      >\n        <div className={`${containerClasses}`} style={myStyle} {...customContainerAttributes}>\n          <div style={myContentStyle} className={contentClasses} {...customContentAttributes}>\n            {this.props.children}\n          </div>\n          <div className={`${buttonWrapperClasses}`} {...customButtonWrapperAttributes}>\n            {buttonsToRender.map((button) => {\n              return button;\n            })}\n          </div>\n        </div>\n      </ConditionalWrapper>\n    );\n  }\n}\n\nexport default CookieConsent;\n"]},"metadata":{},"sourceType":"module"}