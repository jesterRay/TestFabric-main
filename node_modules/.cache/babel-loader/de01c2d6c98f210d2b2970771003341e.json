{"ast":null,"code":"'use strict';\n\nvar d3 = require('@plotly/d3');\nvar Drawing = require('../../components/drawing');\nvar Lib = require('../../lib');\nvar strScale = Lib.strScale;\nvar strTranslate = Lib.strTranslate;\nvar svgTextUtils = require('../../lib/svg_text_utils');\nvar barPlot = require('../bar/plot');\nvar toMoveInsideBar = barPlot.toMoveInsideBar;\nvar uniformText = require('../bar/uniform_text');\nvar recordMinTextSize = uniformText.recordMinTextSize;\nvar clearMinTextSize = uniformText.clearMinTextSize;\nvar pieHelpers = require('../pie/helpers');\nvar piePlot = require('../pie/plot');\nvar attachFxHandlers = piePlot.attachFxHandlers;\nvar determineInsideTextFont = piePlot.determineInsideTextFont;\nvar layoutAreas = piePlot.layoutAreas;\nvar prerenderTitles = piePlot.prerenderTitles;\nvar positionTitleOutside = piePlot.positionTitleOutside;\nvar formatSliceLabel = piePlot.formatSliceLabel;\nmodule.exports = function plot(gd, cdModule) {\n  var isStatic = gd._context.staticPlot;\n  var fullLayout = gd._fullLayout;\n  clearMinTextSize('funnelarea', fullLayout);\n  prerenderTitles(cdModule, gd);\n  layoutAreas(cdModule, fullLayout._size);\n  Lib.makeTraceGroups(fullLayout._funnelarealayer, cdModule, 'trace').each(function (cd) {\n    var plotGroup = d3.select(this);\n    var cd0 = cd[0];\n    var trace = cd0.trace;\n    setCoords(cd);\n    plotGroup.each(function () {\n      var slices = d3.select(this).selectAll('g.slice').data(cd);\n      slices.enter().append('g').classed('slice', true);\n      slices.exit().remove();\n      slices.each(function (pt, i) {\n        if (pt.hidden) {\n          d3.select(this).selectAll('path,g').remove();\n          return;\n        }\n\n        // to have consistent event data compared to other traces\n        pt.pointNumber = pt.i;\n        pt.curveNumber = trace.index;\n        var cx = cd0.cx;\n        var cy = cd0.cy;\n        var sliceTop = d3.select(this);\n        var slicePath = sliceTop.selectAll('path.surface').data([pt]);\n        slicePath.enter().append('path').classed('surface', true).style({\n          'pointer-events': isStatic ? 'none' : 'all'\n        });\n        sliceTop.call(attachFxHandlers, gd, cd);\n        var shape = 'M' + (cx + pt.TR[0]) + ',' + (cy + pt.TR[1]) + line(pt.TR, pt.BR) + line(pt.BR, pt.BL) + line(pt.BL, pt.TL) + 'Z';\n        slicePath.attr('d', shape);\n\n        // add text\n        formatSliceLabel(gd, pt, cd0);\n        var textPosition = pieHelpers.castOption(trace.textposition, pt.pts);\n        var sliceTextGroup = sliceTop.selectAll('g.slicetext').data(pt.text && textPosition !== 'none' ? [0] : []);\n        sliceTextGroup.enter().append('g').classed('slicetext', true);\n        sliceTextGroup.exit().remove();\n        sliceTextGroup.each(function () {\n          var sliceText = Lib.ensureSingle(d3.select(this), 'text', '', function (s) {\n            // prohibit tex interpretation until we can handle\n            // tex and regular text together\n            s.attr('data-notex', 1);\n          });\n          var font = Lib.ensureUniformFontSize(gd, determineInsideTextFont(trace, pt, fullLayout.font));\n          sliceText.text(pt.text).attr({\n            class: 'slicetext',\n            transform: '',\n            'text-anchor': 'middle'\n          }).call(Drawing.font, font).call(svgTextUtils.convertToTspans, gd);\n\n          // position the text relative to the slice\n          var textBB = Drawing.bBox(sliceText.node());\n          var transform;\n          var x0, x1;\n          var y0 = Math.min(pt.BL[1], pt.BR[1]) + cy;\n          var y1 = Math.max(pt.TL[1], pt.TR[1]) + cy;\n          x0 = Math.max(pt.TL[0], pt.BL[0]) + cx;\n          x1 = Math.min(pt.TR[0], pt.BR[0]) + cx;\n          transform = toMoveInsideBar(x0, x1, y0, y1, textBB, {\n            isHorizontal: true,\n            constrained: true,\n            angle: 0,\n            anchor: 'middle'\n          });\n          transform.fontSize = font.size;\n          recordMinTextSize(trace.type, transform, fullLayout);\n          cd[i].transform = transform;\n          Lib.setTransormAndDisplay(sliceText, transform);\n        });\n      });\n\n      // add the title\n      var titleTextGroup = d3.select(this).selectAll('g.titletext').data(trace.title.text ? [0] : []);\n      titleTextGroup.enter().append('g').classed('titletext', true);\n      titleTextGroup.exit().remove();\n      titleTextGroup.each(function () {\n        var titleText = Lib.ensureSingle(d3.select(this), 'text', '', function (s) {\n          // prohibit tex interpretation as above\n          s.attr('data-notex', 1);\n        });\n        var txt = trace.title.text;\n        if (trace._meta) {\n          txt = Lib.templateString(txt, trace._meta);\n        }\n        titleText.text(txt).attr({\n          class: 'titletext',\n          transform: '',\n          'text-anchor': 'middle'\n        }).call(Drawing.font, trace.title.font).call(svgTextUtils.convertToTspans, gd);\n        var transform = positionTitleOutside(cd0, fullLayout._size);\n        titleText.attr('transform', strTranslate(transform.x, transform.y) + strScale(Math.min(1, transform.scale)) + strTranslate(transform.tx, transform.ty));\n      });\n    });\n  });\n};\nfunction line(a, b) {\n  var dx = b[0] - a[0];\n  var dy = b[1] - a[1];\n  return 'l' + dx + ',' + dy;\n}\nfunction getBetween(a, b) {\n  return [0.5 * (a[0] + b[0]), 0.5 * (a[1] + b[1])];\n}\nfunction setCoords(cd) {\n  if (!cd.length) return;\n  var cd0 = cd[0];\n  var trace = cd0.trace;\n  var aspectratio = trace.aspectratio;\n  var h = trace.baseratio;\n  if (h > 0.999) h = 0.999; // TODO: may handle this case separately\n  var h2 = Math.pow(h, 2);\n  var v1 = cd0.vTotal;\n  var v0 = v1 * h2 / (1 - h2);\n  var totalValues = v1;\n  var sumSteps = v0 / v1;\n  function calcPos() {\n    var q = Math.sqrt(sumSteps);\n    return {\n      x: q,\n      y: -q\n    };\n  }\n  function getPoint() {\n    var pos = calcPos();\n    return [pos.x, pos.y];\n  }\n  var p;\n  var allPoints = [];\n  allPoints.push(getPoint());\n  var i, cdi;\n  for (i = cd.length - 1; i > -1; i--) {\n    cdi = cd[i];\n    if (cdi.hidden) continue;\n    var step = cdi.v / totalValues;\n    sumSteps += step;\n    allPoints.push(getPoint());\n  }\n  var minY = Infinity;\n  var maxY = -Infinity;\n  for (i = 0; i < allPoints.length; i++) {\n    p = allPoints[i];\n    minY = Math.min(minY, p[1]);\n    maxY = Math.max(maxY, p[1]);\n  }\n\n  // center the shape\n  for (i = 0; i < allPoints.length; i++) {\n    allPoints[i][1] -= (maxY + minY) / 2;\n  }\n  var lastX = allPoints[allPoints.length - 1][0];\n\n  // get pie r\n  var r = cd0.r;\n  var rY = (maxY - minY) / 2;\n  var scaleX = r / lastX;\n  var scaleY = r / rY * aspectratio;\n\n  // set funnelarea r\n  cd0.r = scaleY * rY;\n\n  // scale the shape\n  for (i = 0; i < allPoints.length; i++) {\n    allPoints[i][0] *= scaleX;\n    allPoints[i][1] *= scaleY;\n  }\n\n  // record first position\n  p = allPoints[0];\n  var prevLeft = [-p[0], p[1]];\n  var prevRight = [p[0], p[1]];\n  var n = 0; // note we skip the very first point.\n  for (i = cd.length - 1; i > -1; i--) {\n    cdi = cd[i];\n    if (cdi.hidden) continue;\n    n += 1;\n    var x = allPoints[n][0];\n    var y = allPoints[n][1];\n    cdi.TL = [-x, y];\n    cdi.TR = [x, y];\n    cdi.BL = prevLeft;\n    cdi.BR = prevRight;\n    cdi.pxmid = getBetween(cdi.TR, cdi.BR);\n    prevLeft = cdi.TL;\n    prevRight = cdi.TR;\n  }\n}","map":{"version":3,"names":["d3","require","Drawing","Lib","strScale","strTranslate","svgTextUtils","barPlot","toMoveInsideBar","uniformText","recordMinTextSize","clearMinTextSize","pieHelpers","piePlot","attachFxHandlers","determineInsideTextFont","layoutAreas","prerenderTitles","positionTitleOutside","formatSliceLabel","module","exports","plot","gd","cdModule","isStatic","_context","staticPlot","fullLayout","_fullLayout","_size","makeTraceGroups","_funnelarealayer","each","cd","plotGroup","select","cd0","trace","setCoords","slices","selectAll","data","enter","append","classed","exit","remove","pt","i","hidden","pointNumber","curveNumber","index","cx","cy","sliceTop","slicePath","style","call","shape","TR","line","BR","BL","TL","attr","textPosition","castOption","textposition","pts","sliceTextGroup","text","sliceText","ensureSingle","s","font","ensureUniformFontSize","class","transform","convertToTspans","textBB","bBox","node","x0","x1","y0","Math","min","y1","max","isHorizontal","constrained","angle","anchor","fontSize","size","type","setTransormAndDisplay","titleTextGroup","title","titleText","txt","_meta","templateString","x","y","scale","tx","ty","a","b","dx","dy","getBetween","length","aspectratio","h","baseratio","h2","pow","v1","vTotal","v0","totalValues","sumSteps","calcPos","q","sqrt","getPoint","pos","p","allPoints","push","cdi","step","v","minY","Infinity","maxY","lastX","r","rY","scaleX","scaleY","prevLeft","prevRight","n","pxmid"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/traces/funnelarea/plot.js"],"sourcesContent":["'use strict';\n\nvar d3 = require('@plotly/d3');\n\nvar Drawing = require('../../components/drawing');\nvar Lib = require('../../lib');\nvar strScale = Lib.strScale;\nvar strTranslate = Lib.strTranslate;\nvar svgTextUtils = require('../../lib/svg_text_utils');\n\nvar barPlot = require('../bar/plot');\nvar toMoveInsideBar = barPlot.toMoveInsideBar;\nvar uniformText = require('../bar/uniform_text');\nvar recordMinTextSize = uniformText.recordMinTextSize;\nvar clearMinTextSize = uniformText.clearMinTextSize;\nvar pieHelpers = require('../pie/helpers');\nvar piePlot = require('../pie/plot');\n\nvar attachFxHandlers = piePlot.attachFxHandlers;\nvar determineInsideTextFont = piePlot.determineInsideTextFont;\n\nvar layoutAreas = piePlot.layoutAreas;\nvar prerenderTitles = piePlot.prerenderTitles;\nvar positionTitleOutside = piePlot.positionTitleOutside;\nvar formatSliceLabel = piePlot.formatSliceLabel;\n\nmodule.exports = function plot(gd, cdModule) {\n    var isStatic = gd._context.staticPlot;\n\n    var fullLayout = gd._fullLayout;\n\n    clearMinTextSize('funnelarea', fullLayout);\n\n    prerenderTitles(cdModule, gd);\n    layoutAreas(cdModule, fullLayout._size);\n\n    Lib.makeTraceGroups(fullLayout._funnelarealayer, cdModule, 'trace').each(function(cd) {\n        var plotGroup = d3.select(this);\n        var cd0 = cd[0];\n        var trace = cd0.trace;\n\n        setCoords(cd);\n\n        plotGroup.each(function() {\n            var slices = d3.select(this).selectAll('g.slice').data(cd);\n\n            slices.enter().append('g')\n                .classed('slice', true);\n            slices.exit().remove();\n\n            slices.each(function(pt, i) {\n                if(pt.hidden) {\n                    d3.select(this).selectAll('path,g').remove();\n                    return;\n                }\n\n                // to have consistent event data compared to other traces\n                pt.pointNumber = pt.i;\n                pt.curveNumber = trace.index;\n\n                var cx = cd0.cx;\n                var cy = cd0.cy;\n                var sliceTop = d3.select(this);\n                var slicePath = sliceTop.selectAll('path.surface').data([pt]);\n\n                slicePath.enter().append('path')\n                    .classed('surface', true)\n                    .style({'pointer-events': isStatic ? 'none' : 'all'});\n\n                sliceTop.call(attachFxHandlers, gd, cd);\n\n                var shape =\n                    'M' + (cx + pt.TR[0]) + ',' + (cy + pt.TR[1]) +\n                    line(pt.TR, pt.BR) +\n                    line(pt.BR, pt.BL) +\n                    line(pt.BL, pt.TL) +\n                    'Z';\n\n                slicePath.attr('d', shape);\n\n                // add text\n                formatSliceLabel(gd, pt, cd0);\n                var textPosition = pieHelpers.castOption(trace.textposition, pt.pts);\n                var sliceTextGroup = sliceTop.selectAll('g.slicetext')\n                    .data(pt.text && (textPosition !== 'none') ? [0] : []);\n\n                sliceTextGroup.enter().append('g')\n                    .classed('slicetext', true);\n                sliceTextGroup.exit().remove();\n\n                sliceTextGroup.each(function() {\n                    var sliceText = Lib.ensureSingle(d3.select(this), 'text', '', function(s) {\n                        // prohibit tex interpretation until we can handle\n                        // tex and regular text together\n                        s.attr('data-notex', 1);\n                    });\n\n                    var font = Lib.ensureUniformFontSize(gd, determineInsideTextFont(trace, pt, fullLayout.font));\n\n                    sliceText.text(pt.text)\n                        .attr({\n                            class: 'slicetext',\n                            transform: '',\n                            'text-anchor': 'middle'\n                        })\n                        .call(Drawing.font, font)\n                        .call(svgTextUtils.convertToTspans, gd);\n\n                    // position the text relative to the slice\n                    var textBB = Drawing.bBox(sliceText.node());\n                    var transform;\n\n                    var x0, x1;\n                    var y0 = Math.min(pt.BL[1], pt.BR[1]) + cy;\n                    var y1 = Math.max(pt.TL[1], pt.TR[1]) + cy;\n\n                    x0 = Math.max(pt.TL[0], pt.BL[0]) + cx;\n                    x1 = Math.min(pt.TR[0], pt.BR[0]) + cx;\n\n                    transform = toMoveInsideBar(x0, x1, y0, y1, textBB, {\n                        isHorizontal: true,\n                        constrained: true,\n                        angle: 0,\n                        anchor: 'middle'\n                    });\n\n                    transform.fontSize = font.size;\n                    recordMinTextSize(trace.type, transform, fullLayout);\n                    cd[i].transform = transform;\n\n                    Lib.setTransormAndDisplay(sliceText, transform);\n                });\n            });\n\n            // add the title\n            var titleTextGroup = d3.select(this).selectAll('g.titletext')\n                .data(trace.title.text ? [0] : []);\n\n            titleTextGroup.enter().append('g')\n                .classed('titletext', true);\n            titleTextGroup.exit().remove();\n\n            titleTextGroup.each(function() {\n                var titleText = Lib.ensureSingle(d3.select(this), 'text', '', function(s) {\n                    // prohibit tex interpretation as above\n                    s.attr('data-notex', 1);\n                });\n\n                var txt = trace.title.text;\n                if(trace._meta) {\n                    txt = Lib.templateString(txt, trace._meta);\n                }\n\n                titleText.text(txt)\n                    .attr({\n                        class: 'titletext',\n                        transform: '',\n                        'text-anchor': 'middle',\n                    })\n                .call(Drawing.font, trace.title.font)\n                .call(svgTextUtils.convertToTspans, gd);\n\n                var transform = positionTitleOutside(cd0, fullLayout._size);\n\n                titleText.attr('transform',\n                    strTranslate(transform.x, transform.y) +\n                    strScale(Math.min(1, transform.scale)) +\n                    strTranslate(transform.tx, transform.ty));\n            });\n        });\n    });\n};\n\nfunction line(a, b) {\n    var dx = b[0] - a[0];\n    var dy = b[1] - a[1];\n\n    return 'l' + dx + ',' + dy;\n}\n\nfunction getBetween(a, b) {\n    return [\n        0.5 * (a[0] + b[0]),\n        0.5 * (a[1] + b[1])\n    ];\n}\n\nfunction setCoords(cd) {\n    if(!cd.length) return;\n\n    var cd0 = cd[0];\n    var trace = cd0.trace;\n\n    var aspectratio = trace.aspectratio;\n\n    var h = trace.baseratio;\n    if(h > 0.999) h = 0.999; // TODO: may handle this case separately\n    var h2 = Math.pow(h, 2);\n\n    var v1 = cd0.vTotal;\n    var v0 = v1 * h2 / (1 - h2);\n\n    var totalValues = v1;\n    var sumSteps = v0 / v1;\n\n    function calcPos() {\n        var q = Math.sqrt(sumSteps);\n        return {\n            x: q,\n            y: -q\n        };\n    }\n\n    function getPoint() {\n        var pos = calcPos();\n        return [pos.x, pos.y];\n    }\n\n    var p;\n    var allPoints = [];\n    allPoints.push(getPoint());\n\n    var i, cdi;\n    for(i = cd.length - 1; i > -1; i--) {\n        cdi = cd[i];\n        if(cdi.hidden) continue;\n\n        var step = cdi.v / totalValues;\n        sumSteps += step;\n\n        allPoints.push(getPoint());\n    }\n\n    var minY = Infinity;\n    var maxY = -Infinity;\n    for(i = 0; i < allPoints.length; i++) {\n        p = allPoints[i];\n        minY = Math.min(minY, p[1]);\n        maxY = Math.max(maxY, p[1]);\n    }\n\n    // center the shape\n    for(i = 0; i < allPoints.length; i++) {\n        allPoints[i][1] -= (maxY + minY) / 2;\n    }\n\n    var lastX = allPoints[allPoints.length - 1][0];\n\n    // get pie r\n    var r = cd0.r;\n\n    var rY = (maxY - minY) / 2;\n    var scaleX = r / lastX;\n    var scaleY = r / rY * aspectratio;\n\n    // set funnelarea r\n    cd0.r = scaleY * rY;\n\n    // scale the shape\n    for(i = 0; i < allPoints.length; i++) {\n        allPoints[i][0] *= scaleX;\n        allPoints[i][1] *= scaleY;\n    }\n\n    // record first position\n    p = allPoints[0];\n    var prevLeft = [-p[0], p[1]];\n    var prevRight = [p[0], p[1]];\n\n    var n = 0; // note we skip the very first point.\n    for(i = cd.length - 1; i > -1; i--) {\n        cdi = cd[i];\n        if(cdi.hidden) continue;\n\n        n += 1;\n        var x = allPoints[n][0];\n        var y = allPoints[n][1];\n\n        cdi.TL = [-x, y];\n        cdi.TR = [x, y];\n\n        cdi.BL = prevLeft;\n        cdi.BR = prevRight;\n\n        cdi.pxmid = getBetween(cdi.TR, cdi.BR);\n\n        prevLeft = cdi.TL;\n        prevRight = cdi.TR;\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}