{"ast":null,"code":"'use strict';\n\nvar d3 = require('@plotly/d3');\nvar isNumeric = require('fast-isnumeric');\nvar Lib = require('../../lib');\nvar Drawing = require('../../components/drawing');\nvar helpers = require('../../plots/polar/helpers');\nmodule.exports = function plot(gd, subplot, cdbar) {\n  var isStatic = gd._context.staticPlot;\n  var xa = subplot.xaxis;\n  var ya = subplot.yaxis;\n  var radialAxis = subplot.radialAxis;\n  var angularAxis = subplot.angularAxis;\n  var pathFn = makePathFn(subplot);\n  var barLayer = subplot.layers.frontplot.select('g.barlayer');\n  Lib.makeTraceGroups(barLayer, cdbar, 'trace bars').each(function () {\n    var plotGroup = d3.select(this);\n    var pointGroup = Lib.ensureSingle(plotGroup, 'g', 'points');\n    var bars = pointGroup.selectAll('g.point').data(Lib.identity);\n    bars.enter().append('g').style('vector-effect', isStatic ? 'none' : 'non-scaling-stroke').style('stroke-miterlimit', 2).classed('point', true);\n    bars.exit().remove();\n    bars.each(function (di) {\n      var bar = d3.select(this);\n      var rp0 = di.rp0 = radialAxis.c2p(di.s0);\n      var rp1 = di.rp1 = radialAxis.c2p(di.s1);\n      var thetag0 = di.thetag0 = angularAxis.c2g(di.p0);\n      var thetag1 = di.thetag1 = angularAxis.c2g(di.p1);\n      var dPath;\n      if (!isNumeric(rp0) || !isNumeric(rp1) || !isNumeric(thetag0) || !isNumeric(thetag1) || rp0 === rp1 || thetag0 === thetag1) {\n        // do not remove blank bars, to keep data-to-node\n        // mapping intact during radial drag, that we\n        // can skip calling _module.style during interactions\n        dPath = 'M0,0Z';\n      } else {\n        // this 'center' pt is used for selections and hover labels\n        var rg1 = radialAxis.c2g(di.s1);\n        var thetagMid = (thetag0 + thetag1) / 2;\n        di.ct = [xa.c2p(rg1 * Math.cos(thetagMid)), ya.c2p(rg1 * Math.sin(thetagMid))];\n        dPath = pathFn(rp0, rp1, thetag0, thetag1);\n      }\n      Lib.ensureSingle(bar, 'path').attr('d', dPath);\n    });\n\n    // clip plotGroup, when trace layer isn't clipped\n    Drawing.setClipUrl(plotGroup, subplot._hasClipOnAxisFalse ? subplot.clipIds.forTraces : null, gd);\n  });\n};\nfunction makePathFn(subplot) {\n  var cxx = subplot.cxx;\n  var cyy = subplot.cyy;\n  if (subplot.vangles) {\n    return function (r0, r1, _a0, _a1) {\n      var a0, a1;\n      if (Lib.angleDelta(_a0, _a1) > 0) {\n        a0 = _a0;\n        a1 = _a1;\n      } else {\n        a0 = _a1;\n        a1 = _a0;\n      }\n      var va0 = helpers.findEnclosingVertexAngles(a0, subplot.vangles)[0];\n      var va1 = helpers.findEnclosingVertexAngles(a1, subplot.vangles)[1];\n      var vaBar = [va0, (a0 + a1) / 2, va1];\n      return helpers.pathPolygonAnnulus(r0, r1, a0, a1, vaBar, cxx, cyy);\n    };\n  }\n  return function (r0, r1, a0, a1) {\n    return Lib.pathAnnulus(r0, r1, a0, a1, cxx, cyy);\n  };\n}","map":{"version":3,"names":["d3","require","isNumeric","Lib","Drawing","helpers","module","exports","plot","gd","subplot","cdbar","isStatic","_context","staticPlot","xa","xaxis","ya","yaxis","radialAxis","angularAxis","pathFn","makePathFn","barLayer","layers","frontplot","select","makeTraceGroups","each","plotGroup","pointGroup","ensureSingle","bars","selectAll","data","identity","enter","append","style","classed","exit","remove","di","bar","rp0","c2p","s0","rp1","s1","thetag0","c2g","p0","thetag1","p1","dPath","rg1","thetagMid","ct","Math","cos","sin","attr","setClipUrl","_hasClipOnAxisFalse","clipIds","forTraces","cxx","cyy","vangles","r0","r1","_a0","_a1","a0","a1","angleDelta","va0","findEnclosingVertexAngles","va1","vaBar","pathPolygonAnnulus","pathAnnulus"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/traces/barpolar/plot.js"],"sourcesContent":["'use strict';\n\nvar d3 = require('@plotly/d3');\nvar isNumeric = require('fast-isnumeric');\n\nvar Lib = require('../../lib');\nvar Drawing = require('../../components/drawing');\nvar helpers = require('../../plots/polar/helpers');\n\nmodule.exports = function plot(gd, subplot, cdbar) {\n    var isStatic = gd._context.staticPlot;\n    var xa = subplot.xaxis;\n    var ya = subplot.yaxis;\n    var radialAxis = subplot.radialAxis;\n    var angularAxis = subplot.angularAxis;\n    var pathFn = makePathFn(subplot);\n    var barLayer = subplot.layers.frontplot.select('g.barlayer');\n\n    Lib.makeTraceGroups(barLayer, cdbar, 'trace bars').each(function() {\n        var plotGroup = d3.select(this);\n        var pointGroup = Lib.ensureSingle(plotGroup, 'g', 'points');\n        var bars = pointGroup.selectAll('g.point').data(Lib.identity);\n\n        bars.enter().append('g')\n            .style('vector-effect', isStatic ? 'none' : 'non-scaling-stroke')\n            .style('stroke-miterlimit', 2)\n            .classed('point', true);\n\n        bars.exit().remove();\n\n        bars.each(function(di) {\n            var bar = d3.select(this);\n\n            var rp0 = di.rp0 = radialAxis.c2p(di.s0);\n            var rp1 = di.rp1 = radialAxis.c2p(di.s1);\n            var thetag0 = di.thetag0 = angularAxis.c2g(di.p0);\n            var thetag1 = di.thetag1 = angularAxis.c2g(di.p1);\n\n            var dPath;\n\n            if(!isNumeric(rp0) || !isNumeric(rp1) ||\n                !isNumeric(thetag0) || !isNumeric(thetag1) ||\n                rp0 === rp1 || thetag0 === thetag1\n            ) {\n                // do not remove blank bars, to keep data-to-node\n                // mapping intact during radial drag, that we\n                // can skip calling _module.style during interactions\n                dPath = 'M0,0Z';\n            } else {\n                // this 'center' pt is used for selections and hover labels\n                var rg1 = radialAxis.c2g(di.s1);\n                var thetagMid = (thetag0 + thetag1) / 2;\n                di.ct = [\n                    xa.c2p(rg1 * Math.cos(thetagMid)),\n                    ya.c2p(rg1 * Math.sin(thetagMid))\n                ];\n\n                dPath = pathFn(rp0, rp1, thetag0, thetag1);\n            }\n\n            Lib.ensureSingle(bar, 'path').attr('d', dPath);\n        });\n\n        // clip plotGroup, when trace layer isn't clipped\n        Drawing.setClipUrl(\n            plotGroup,\n            subplot._hasClipOnAxisFalse ? subplot.clipIds.forTraces : null,\n            gd\n        );\n    });\n};\n\nfunction makePathFn(subplot) {\n    var cxx = subplot.cxx;\n    var cyy = subplot.cyy;\n\n    if(subplot.vangles) {\n        return function(r0, r1, _a0, _a1) {\n            var a0, a1;\n\n            if(Lib.angleDelta(_a0, _a1) > 0) {\n                a0 = _a0;\n                a1 = _a1;\n            } else {\n                a0 = _a1;\n                a1 = _a0;\n            }\n\n            var va0 = helpers.findEnclosingVertexAngles(a0, subplot.vangles)[0];\n            var va1 = helpers.findEnclosingVertexAngles(a1, subplot.vangles)[1];\n            var vaBar = [va0, (a0 + a1) / 2, va1];\n            return helpers.pathPolygonAnnulus(r0, r1, a0, a1, vaBar, cxx, cyy);\n        };\n    }\n\n    return function(r0, r1, a0, a1) {\n        return Lib.pathAnnulus(r0, r1, a0, a1, cxx, cyy);\n    };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}