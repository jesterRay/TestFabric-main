{"ast":null,"code":"'use strict';\n\nvar d3 = require('@plotly/d3');\nvar Lib = require('../../lib');\nvar numberFormat = Lib.numberFormat;\nvar render = require('./render');\nvar Fx = require('../../components/fx');\nvar Color = require('../../components/color');\nvar cn = require('./constants').cn;\nvar _ = Lib._;\nfunction renderableValuePresent(d) {\n  return d !== '';\n}\nfunction ownTrace(selection, d) {\n  return selection.filter(function (s) {\n    return s.key === d.traceId;\n  });\n}\nfunction makeTranslucent(element, alpha) {\n  d3.select(element).select('path').style('fill-opacity', alpha);\n  d3.select(element).select('rect').style('fill-opacity', alpha);\n}\nfunction makeTextContrasty(element) {\n  d3.select(element).select('text.name').style('fill', 'black');\n}\nfunction relatedLinks(d) {\n  return function (l) {\n    return d.node.sourceLinks.indexOf(l.link) !== -1 || d.node.targetLinks.indexOf(l.link) !== -1;\n  };\n}\nfunction relatedNodes(l) {\n  return function (d) {\n    return d.node.sourceLinks.indexOf(l.link) !== -1 || d.node.targetLinks.indexOf(l.link) !== -1;\n  };\n}\nfunction nodeHoveredStyle(sankeyNode, d, sankey) {\n  if (d && sankey) {\n    ownTrace(sankey, d).selectAll('.' + cn.sankeyLink).filter(relatedLinks(d)).call(linkHoveredStyle.bind(0, d, sankey, false));\n  }\n}\nfunction nodeNonHoveredStyle(sankeyNode, d, sankey) {\n  if (d && sankey) {\n    ownTrace(sankey, d).selectAll('.' + cn.sankeyLink).filter(relatedLinks(d)).call(linkNonHoveredStyle.bind(0, d, sankey, false));\n  }\n}\nfunction linkHoveredStyle(d, sankey, visitNodes, sankeyLink) {\n  sankeyLink.style('fill', function (l) {\n    if (!l.link.concentrationscale) {\n      return l.tinyColorHoverHue;\n    }\n  }).style('fill-opacity', function (l) {\n    if (!l.link.concentrationscale) {\n      return l.tinyColorHoverAlpha;\n    }\n  });\n  sankeyLink.each(function (curLink) {\n    var label = curLink.link.label;\n    if (label !== '') {\n      ownTrace(sankey, d).selectAll('.' + cn.sankeyLink).filter(function (l) {\n        return l.link.label === label;\n      }).style('fill', function (l) {\n        if (!l.link.concentrationscale) {\n          return l.tinyColorHoverHue;\n        }\n      }).style('fill-opacity', function (l) {\n        if (!l.link.concentrationscale) {\n          return l.tinyColorHoverAlpha;\n        }\n      });\n    }\n  });\n  if (visitNodes) {\n    ownTrace(sankey, d).selectAll('.' + cn.sankeyNode).filter(relatedNodes(d)).call(nodeHoveredStyle);\n  }\n}\nfunction linkNonHoveredStyle(d, sankey, visitNodes, sankeyLink) {\n  sankeyLink.style('fill', function (l) {\n    return l.tinyColorHue;\n  }).style('fill-opacity', function (l) {\n    return l.tinyColorAlpha;\n  });\n  sankeyLink.each(function (curLink) {\n    var label = curLink.link.label;\n    if (label !== '') {\n      ownTrace(sankey, d).selectAll('.' + cn.sankeyLink).filter(function (l) {\n        return l.link.label === label;\n      }).style('fill', function (l) {\n        return l.tinyColorHue;\n      }).style('fill-opacity', function (l) {\n        return l.tinyColorAlpha;\n      });\n    }\n  });\n  if (visitNodes) {\n    ownTrace(sankey, d).selectAll(cn.sankeyNode).filter(relatedNodes(d)).call(nodeNonHoveredStyle);\n  }\n}\n\n// does not support array values for now\nfunction castHoverOption(trace, attr) {\n  var labelOpts = trace.hoverlabel || {};\n  var val = Lib.nestedProperty(labelOpts, attr).get();\n  return Array.isArray(val) ? false : val;\n}\nmodule.exports = function plot(gd, calcData) {\n  var fullLayout = gd._fullLayout;\n  var svg = fullLayout._paper;\n  var size = fullLayout._size;\n\n  // stash initial view\n  for (var i = 0; i < gd._fullData.length; i++) {\n    if (!gd._fullData[i].visible) continue;\n    if (gd._fullData[i].type !== cn.sankey) continue;\n    if (!gd._fullData[i]._viewInitial) {\n      var node = gd._fullData[i].node;\n      gd._fullData[i]._viewInitial = {\n        node: {\n          groups: node.groups.slice(),\n          x: node.x.slice(),\n          y: node.y.slice()\n        }\n      };\n    }\n  }\n  var linkSelect = function (element, d) {\n    var evt = d.link;\n    evt.originalEvent = d3.event;\n    gd._hoverdata = [evt];\n    Fx.click(gd, {\n      target: true\n    });\n  };\n  var linkHover = function (element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(linkHoveredStyle.bind(0, d, sankey, true));\n    if (d.link.trace.link.hoverinfo !== 'skip') {\n      d.link.fullData = d.link.trace;\n      gd.emit('plotly_hover', {\n        event: d3.event,\n        points: [d.link]\n      });\n    }\n  };\n  var sourceLabel = _(gd, 'source:') + ' ';\n  var targetLabel = _(gd, 'target:') + ' ';\n  var concentrationLabel = _(gd, 'concentration:') + ' ';\n  var incomingLabel = _(gd, 'incoming flow count:') + ' ';\n  var outgoingLabel = _(gd, 'outgoing flow count:') + ' ';\n  var linkHoverFollow = function (element, d) {\n    if (gd._fullLayout.hovermode === false) return;\n    var obj = d.link.trace.link;\n    if (obj.hoverinfo === 'none' || obj.hoverinfo === 'skip') return;\n    var hoverItems = [];\n    function hoverCenterPosition(link) {\n      var hoverCenterX, hoverCenterY;\n      if (link.circular) {\n        hoverCenterX = (link.circularPathData.leftInnerExtent + link.circularPathData.rightInnerExtent) / 2;\n        hoverCenterY = link.circularPathData.verticalFullExtent;\n      } else {\n        hoverCenterX = (link.source.x1 + link.target.x0) / 2;\n        hoverCenterY = (link.y0 + link.y1) / 2;\n      }\n      var center = [hoverCenterX, hoverCenterY];\n      if (link.trace.orientation === 'v') center.reverse();\n      center[0] += d.parent.translateX;\n      center[1] += d.parent.translateY;\n      return center;\n    }\n\n    // For each related links, create a hoverItem\n    var anchorIndex = 0;\n    for (var i = 0; i < d.flow.links.length; i++) {\n      var link = d.flow.links[i];\n      if (gd._fullLayout.hovermode === 'closest' && d.link.pointNumber !== link.pointNumber) continue;\n      if (d.link.pointNumber === link.pointNumber) anchorIndex = i;\n      link.fullData = link.trace;\n      obj = d.link.trace.link;\n      var hoverCenter = hoverCenterPosition(link);\n      var hovertemplateLabels = {\n        valueLabel: numberFormat(d.valueFormat)(link.value) + d.valueSuffix\n      };\n      hoverItems.push({\n        x: hoverCenter[0],\n        y: hoverCenter[1],\n        name: hovertemplateLabels.valueLabel,\n        text: [link.label || '', sourceLabel + link.source.label, targetLabel + link.target.label, link.concentrationscale ? concentrationLabel + numberFormat('%0.2f')(link.flow.labelConcentration) : ''].filter(renderableValuePresent).join('<br>'),\n        color: castHoverOption(obj, 'bgcolor') || Color.addOpacity(link.color, 1),\n        borderColor: castHoverOption(obj, 'bordercolor'),\n        fontFamily: castHoverOption(obj, 'font.family'),\n        fontSize: castHoverOption(obj, 'font.size'),\n        fontColor: castHoverOption(obj, 'font.color'),\n        fontWeight: castHoverOption(obj, 'font.weight'),\n        fontStyle: castHoverOption(obj, 'font.style'),\n        fontVariant: castHoverOption(obj, 'font.variant'),\n        fontTextcase: castHoverOption(obj, 'font.textcase'),\n        fontLineposition: castHoverOption(obj, 'font.lineposition'),\n        fontShadow: castHoverOption(obj, 'font.shadow'),\n        nameLength: castHoverOption(obj, 'namelength'),\n        textAlign: castHoverOption(obj, 'align'),\n        idealAlign: d3.event.x < hoverCenter[0] ? 'right' : 'left',\n        hovertemplate: obj.hovertemplate,\n        hovertemplateLabels: hovertemplateLabels,\n        eventData: [link]\n      });\n    }\n    var tooltips = Fx.loneHover(hoverItems, {\n      container: fullLayout._hoverlayer.node(),\n      outerContainer: fullLayout._paper.node(),\n      gd: gd,\n      anchorIndex: anchorIndex\n    });\n    tooltips.each(function () {\n      var tooltip = this;\n      if (!d.link.concentrationscale) {\n        makeTranslucent(tooltip, 0.65);\n      }\n      makeTextContrasty(tooltip);\n    });\n  };\n  var linkUnhover = function (element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(linkNonHoveredStyle.bind(0, d, sankey, true));\n    if (d.link.trace.link.hoverinfo !== 'skip') {\n      d.link.fullData = d.link.trace;\n      gd.emit('plotly_unhover', {\n        event: d3.event,\n        points: [d.link]\n      });\n    }\n    Fx.loneUnhover(fullLayout._hoverlayer.node());\n  };\n  var nodeSelect = function (element, d, sankey) {\n    var evt = d.node;\n    evt.originalEvent = d3.event;\n    gd._hoverdata = [evt];\n    d3.select(element).call(nodeNonHoveredStyle, d, sankey);\n    Fx.click(gd, {\n      target: true\n    });\n  };\n  var nodeHover = function (element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(nodeHoveredStyle, d, sankey);\n    if (d.node.trace.node.hoverinfo !== 'skip') {\n      d.node.fullData = d.node.trace;\n      gd.emit('plotly_hover', {\n        event: d3.event,\n        points: [d.node]\n      });\n    }\n  };\n  var nodeHoverFollow = function (element, d) {\n    if (gd._fullLayout.hovermode === false) return;\n    var obj = d.node.trace.node;\n    if (obj.hoverinfo === 'none' || obj.hoverinfo === 'skip') return;\n    var nodeRect = d3.select(element).select('.' + cn.nodeRect);\n    var rootBBox = gd._fullLayout._paperdiv.node().getBoundingClientRect();\n    var boundingBox = nodeRect.node().getBoundingClientRect();\n    var hoverCenterX0 = boundingBox.left - 2 - rootBBox.left;\n    var hoverCenterX1 = boundingBox.right + 2 - rootBBox.left;\n    var hoverCenterY = boundingBox.top + boundingBox.height / 4 - rootBBox.top;\n    var hovertemplateLabels = {\n      valueLabel: numberFormat(d.valueFormat)(d.node.value) + d.valueSuffix\n    };\n    d.node.fullData = d.node.trace;\n    gd._fullLayout._calcInverseTransform(gd);\n    var scaleX = gd._fullLayout._invScaleX;\n    var scaleY = gd._fullLayout._invScaleY;\n    var tooltip = Fx.loneHover({\n      x0: scaleX * hoverCenterX0,\n      x1: scaleX * hoverCenterX1,\n      y: scaleY * hoverCenterY,\n      name: numberFormat(d.valueFormat)(d.node.value) + d.valueSuffix,\n      text: [d.node.label, incomingLabel + d.node.targetLinks.length, outgoingLabel + d.node.sourceLinks.length].filter(renderableValuePresent).join('<br>'),\n      color: castHoverOption(obj, 'bgcolor') || d.tinyColorHue,\n      borderColor: castHoverOption(obj, 'bordercolor'),\n      fontFamily: castHoverOption(obj, 'font.family'),\n      fontSize: castHoverOption(obj, 'font.size'),\n      fontColor: castHoverOption(obj, 'font.color'),\n      fontWeight: castHoverOption(obj, 'font.weight'),\n      fontStyle: castHoverOption(obj, 'font.style'),\n      fontVariant: castHoverOption(obj, 'font.variant'),\n      fontTextcase: castHoverOption(obj, 'font.textcase'),\n      fontLineposition: castHoverOption(obj, 'font.lineposition'),\n      fontShadow: castHoverOption(obj, 'font.shadow'),\n      nameLength: castHoverOption(obj, 'namelength'),\n      textAlign: castHoverOption(obj, 'align'),\n      idealAlign: 'left',\n      hovertemplate: obj.hovertemplate,\n      hovertemplateLabels: hovertemplateLabels,\n      eventData: [d.node]\n    }, {\n      container: fullLayout._hoverlayer.node(),\n      outerContainer: fullLayout._paper.node(),\n      gd: gd\n    });\n    makeTranslucent(tooltip, 0.85);\n    makeTextContrasty(tooltip);\n  };\n  var nodeUnhover = function (element, d, sankey) {\n    if (gd._fullLayout.hovermode === false) return;\n    d3.select(element).call(nodeNonHoveredStyle, d, sankey);\n    if (d.node.trace.node.hoverinfo !== 'skip') {\n      d.node.fullData = d.node.trace;\n      gd.emit('plotly_unhover', {\n        event: d3.event,\n        points: [d.node]\n      });\n    }\n    Fx.loneUnhover(fullLayout._hoverlayer.node());\n  };\n  render(gd, svg, calcData, {\n    width: size.w,\n    height: size.h,\n    margin: {\n      t: size.t,\n      r: size.r,\n      b: size.b,\n      l: size.l\n    }\n  }, {\n    linkEvents: {\n      hover: linkHover,\n      follow: linkHoverFollow,\n      unhover: linkUnhover,\n      select: linkSelect\n    },\n    nodeEvents: {\n      hover: nodeHover,\n      follow: nodeHoverFollow,\n      unhover: nodeUnhover,\n      select: nodeSelect\n    }\n  });\n};","map":{"version":3,"names":["d3","require","Lib","numberFormat","render","Fx","Color","cn","_","renderableValuePresent","d","ownTrace","selection","filter","s","key","traceId","makeTranslucent","element","alpha","select","style","makeTextContrasty","relatedLinks","l","node","sourceLinks","indexOf","link","targetLinks","relatedNodes","nodeHoveredStyle","sankeyNode","sankey","selectAll","sankeyLink","call","linkHoveredStyle","bind","nodeNonHoveredStyle","linkNonHoveredStyle","visitNodes","concentrationscale","tinyColorHoverHue","tinyColorHoverAlpha","each","curLink","label","tinyColorHue","tinyColorAlpha","castHoverOption","trace","attr","labelOpts","hoverlabel","val","nestedProperty","get","Array","isArray","module","exports","plot","gd","calcData","fullLayout","_fullLayout","svg","_paper","size","_size","i","_fullData","length","visible","type","_viewInitial","groups","slice","x","y","linkSelect","evt","originalEvent","event","_hoverdata","click","target","linkHover","hovermode","hoverinfo","fullData","emit","points","sourceLabel","targetLabel","concentrationLabel","incomingLabel","outgoingLabel","linkHoverFollow","obj","hoverItems","hoverCenterPosition","hoverCenterX","hoverCenterY","circular","circularPathData","leftInnerExtent","rightInnerExtent","verticalFullExtent","source","x1","x0","y0","y1","center","orientation","reverse","parent","translateX","translateY","anchorIndex","flow","links","pointNumber","hoverCenter","hovertemplateLabels","valueLabel","valueFormat","value","valueSuffix","push","name","text","labelConcentration","join","color","addOpacity","borderColor","fontFamily","fontSize","fontColor","fontWeight","fontStyle","fontVariant","fontTextcase","fontLineposition","fontShadow","nameLength","textAlign","idealAlign","hovertemplate","eventData","tooltips","loneHover","container","_hoverlayer","outerContainer","tooltip","linkUnhover","loneUnhover","nodeSelect","nodeHover","nodeHoverFollow","nodeRect","rootBBox","_paperdiv","getBoundingClientRect","boundingBox","hoverCenterX0","left","hoverCenterX1","right","top","height","_calcInverseTransform","scaleX","_invScaleX","scaleY","_invScaleY","nodeUnhover","width","w","h","margin","t","r","b","linkEvents","hover","follow","unhover","nodeEvents"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/traces/sankey/plot.js"],"sourcesContent":["'use strict';\n\nvar d3 = require('@plotly/d3');\nvar Lib = require('../../lib');\nvar numberFormat = Lib.numberFormat;\nvar render = require('./render');\nvar Fx = require('../../components/fx');\nvar Color = require('../../components/color');\nvar cn = require('./constants').cn;\n\nvar _ = Lib._;\n\nfunction renderableValuePresent(d) {return d !== '';}\n\nfunction ownTrace(selection, d) {\n    return selection.filter(function(s) {return s.key === d.traceId;});\n}\n\nfunction makeTranslucent(element, alpha) {\n    d3.select(element)\n        .select('path')\n        .style('fill-opacity', alpha);\n    d3.select(element)\n        .select('rect')\n        .style('fill-opacity', alpha);\n}\n\nfunction makeTextContrasty(element) {\n    d3.select(element)\n        .select('text.name')\n        .style('fill', 'black');\n}\n\nfunction relatedLinks(d) {\n    return function(l) {\n        return d.node.sourceLinks.indexOf(l.link) !== -1 || d.node.targetLinks.indexOf(l.link) !== -1;\n    };\n}\n\nfunction relatedNodes(l) {\n    return function(d) {\n        return d.node.sourceLinks.indexOf(l.link) !== -1 || d.node.targetLinks.indexOf(l.link) !== -1;\n    };\n}\n\nfunction nodeHoveredStyle(sankeyNode, d, sankey) {\n    if(d && sankey) {\n        ownTrace(sankey, d)\n            .selectAll('.' + cn.sankeyLink)\n            .filter(relatedLinks(d))\n            .call(linkHoveredStyle.bind(0, d, sankey, false));\n    }\n}\n\nfunction nodeNonHoveredStyle(sankeyNode, d, sankey) {\n    if(d && sankey) {\n        ownTrace(sankey, d)\n            .selectAll('.' + cn.sankeyLink)\n            .filter(relatedLinks(d))\n            .call(linkNonHoveredStyle.bind(0, d, sankey, false));\n    }\n}\n\nfunction linkHoveredStyle(d, sankey, visitNodes, sankeyLink) {\n    sankeyLink.style('fill', function(l) {\n        if(!l.link.concentrationscale) {\n            return l.tinyColorHoverHue;\n        }\n    }).style('fill-opacity', function(l) {\n        if(!l.link.concentrationscale) {\n            return l.tinyColorHoverAlpha;\n        }\n    });\n\n    sankeyLink.each(function(curLink) {\n        var label = curLink.link.label;\n        if(label !== '') {\n            ownTrace(sankey, d)\n                .selectAll('.' + cn.sankeyLink)\n                .filter(function(l) {return l.link.label === label;})\n                .style('fill', function(l) {\n                    if(!l.link.concentrationscale) {\n                        return l.tinyColorHoverHue;\n                    }\n                }).style('fill-opacity', function(l) {\n                    if(!l.link.concentrationscale) {\n                        return l.tinyColorHoverAlpha;\n                    }\n                });\n        }\n    });\n\n    if(visitNodes) {\n        ownTrace(sankey, d)\n            .selectAll('.' + cn.sankeyNode)\n            .filter(relatedNodes(d))\n            .call(nodeHoveredStyle);\n    }\n}\n\nfunction linkNonHoveredStyle(d, sankey, visitNodes, sankeyLink) {\n    sankeyLink.style('fill', function(l) {\n        return l.tinyColorHue;\n    }).style('fill-opacity', function(l) {\n        return l.tinyColorAlpha;\n    });\n\n    sankeyLink.each(function(curLink) {\n        var label = curLink.link.label;\n        if(label !== '') {\n            ownTrace(sankey, d)\n                .selectAll('.' + cn.sankeyLink)\n                .filter(function(l) {return l.link.label === label;})\n                .style('fill', function(l) {return l.tinyColorHue;})\n                .style('fill-opacity', function(l) {return l.tinyColorAlpha;});\n        }\n    });\n\n    if(visitNodes) {\n        ownTrace(sankey, d)\n            .selectAll(cn.sankeyNode)\n            .filter(relatedNodes(d))\n            .call(nodeNonHoveredStyle);\n    }\n}\n\n// does not support array values for now\nfunction castHoverOption(trace, attr) {\n    var labelOpts = trace.hoverlabel || {};\n    var val = Lib.nestedProperty(labelOpts, attr).get();\n    return Array.isArray(val) ? false : val;\n}\n\nmodule.exports = function plot(gd, calcData) {\n    var fullLayout = gd._fullLayout;\n    var svg = fullLayout._paper;\n    var size = fullLayout._size;\n\n    // stash initial view\n    for(var i = 0; i < gd._fullData.length; i++) {\n        if(!gd._fullData[i].visible) continue;\n        if(gd._fullData[i].type !== cn.sankey) continue;\n        if(!gd._fullData[i]._viewInitial) {\n            var node = gd._fullData[i].node;\n            gd._fullData[i]._viewInitial = {\n                node: {\n                    groups: node.groups.slice(),\n                    x: node.x.slice(),\n                    y: node.y.slice()\n                }\n            };\n        }\n    }\n\n    var linkSelect = function(element, d) {\n        var evt = d.link;\n        evt.originalEvent = d3.event;\n        gd._hoverdata = [evt];\n        Fx.click(gd, { target: true });\n    };\n\n    var linkHover = function(element, d, sankey) {\n        if(gd._fullLayout.hovermode === false) return;\n        d3.select(element).call(linkHoveredStyle.bind(0, d, sankey, true));\n        if(d.link.trace.link.hoverinfo !== 'skip') {\n            d.link.fullData = d.link.trace;\n            gd.emit('plotly_hover', {\n                event: d3.event,\n                points: [d.link]\n            });\n        }\n    };\n\n    var sourceLabel = _(gd, 'source:') + ' ';\n    var targetLabel = _(gd, 'target:') + ' ';\n    var concentrationLabel = _(gd, 'concentration:') + ' ';\n    var incomingLabel = _(gd, 'incoming flow count:') + ' ';\n    var outgoingLabel = _(gd, 'outgoing flow count:') + ' ';\n\n    var linkHoverFollow = function(element, d) {\n        if(gd._fullLayout.hovermode === false) return;\n        var obj = d.link.trace.link;\n        if(obj.hoverinfo === 'none' || obj.hoverinfo === 'skip') return;\n\n        var hoverItems = [];\n\n        function hoverCenterPosition(link) {\n            var hoverCenterX, hoverCenterY;\n            if(link.circular) {\n                hoverCenterX = (link.circularPathData.leftInnerExtent + link.circularPathData.rightInnerExtent) / 2;\n                hoverCenterY = link.circularPathData.verticalFullExtent;\n            } else {\n                hoverCenterX = (link.source.x1 + link.target.x0) / 2;\n                hoverCenterY = (link.y0 + link.y1) / 2;\n            }\n            var center = [hoverCenterX, hoverCenterY];\n            if(link.trace.orientation === 'v') center.reverse();\n            center[0] += d.parent.translateX;\n            center[1] += d.parent.translateY;\n            return center;\n        }\n\n        // For each related links, create a hoverItem\n        var anchorIndex = 0;\n        for(var i = 0; i < d.flow.links.length; i++) {\n            var link = d.flow.links[i];\n            if(gd._fullLayout.hovermode === 'closest' && d.link.pointNumber !== link.pointNumber) continue;\n            if(d.link.pointNumber === link.pointNumber) anchorIndex = i;\n            link.fullData = link.trace;\n            obj = d.link.trace.link;\n            var hoverCenter = hoverCenterPosition(link);\n            var hovertemplateLabels = {valueLabel: numberFormat(d.valueFormat)(link.value) + d.valueSuffix};\n\n            hoverItems.push({\n                x: hoverCenter[0],\n                y: hoverCenter[1],\n                name: hovertemplateLabels.valueLabel,\n                text: [\n                    link.label || '',\n                    sourceLabel + link.source.label,\n                    targetLabel + link.target.label,\n                    link.concentrationscale ? concentrationLabel + numberFormat('%0.2f')(link.flow.labelConcentration) : ''\n                ].filter(renderableValuePresent).join('<br>'),\n                color: castHoverOption(obj, 'bgcolor') || Color.addOpacity(link.color, 1),\n                borderColor: castHoverOption(obj, 'bordercolor'),\n                fontFamily: castHoverOption(obj, 'font.family'),\n                fontSize: castHoverOption(obj, 'font.size'),\n                fontColor: castHoverOption(obj, 'font.color'),\n                fontWeight: castHoverOption(obj, 'font.weight'),\n                fontStyle: castHoverOption(obj, 'font.style'),\n                fontVariant: castHoverOption(obj, 'font.variant'),\n                fontTextcase: castHoverOption(obj, 'font.textcase'),\n                fontLineposition: castHoverOption(obj, 'font.lineposition'),\n                fontShadow: castHoverOption(obj, 'font.shadow'),\n                nameLength: castHoverOption(obj, 'namelength'),\n                textAlign: castHoverOption(obj, 'align'),\n                idealAlign: d3.event.x < hoverCenter[0] ? 'right' : 'left',\n\n                hovertemplate: obj.hovertemplate,\n                hovertemplateLabels: hovertemplateLabels,\n                eventData: [link]\n            });\n        }\n\n        var tooltips = Fx.loneHover(hoverItems, {\n            container: fullLayout._hoverlayer.node(),\n            outerContainer: fullLayout._paper.node(),\n            gd: gd,\n            anchorIndex: anchorIndex\n        });\n\n        tooltips.each(function() {\n            var tooltip = this;\n            if(!d.link.concentrationscale) {\n                makeTranslucent(tooltip, 0.65);\n            }\n            makeTextContrasty(tooltip);\n        });\n    };\n\n    var linkUnhover = function(element, d, sankey) {\n        if(gd._fullLayout.hovermode === false) return;\n        d3.select(element).call(linkNonHoveredStyle.bind(0, d, sankey, true));\n        if(d.link.trace.link.hoverinfo !== 'skip') {\n            d.link.fullData = d.link.trace;\n            gd.emit('plotly_unhover', {\n                event: d3.event,\n                points: [d.link]\n            });\n        }\n\n        Fx.loneUnhover(fullLayout._hoverlayer.node());\n    };\n\n    var nodeSelect = function(element, d, sankey) {\n        var evt = d.node;\n        evt.originalEvent = d3.event;\n        gd._hoverdata = [evt];\n        d3.select(element).call(nodeNonHoveredStyle, d, sankey);\n        Fx.click(gd, { target: true });\n    };\n\n    var nodeHover = function(element, d, sankey) {\n        if(gd._fullLayout.hovermode === false) return;\n        d3.select(element).call(nodeHoveredStyle, d, sankey);\n        if(d.node.trace.node.hoverinfo !== 'skip') {\n            d.node.fullData = d.node.trace;\n            gd.emit('plotly_hover', {\n                event: d3.event,\n                points: [d.node]\n            });\n        }\n    };\n\n    var nodeHoverFollow = function(element, d) {\n        if(gd._fullLayout.hovermode === false) return;\n\n        var obj = d.node.trace.node;\n        if(obj.hoverinfo === 'none' || obj.hoverinfo === 'skip') return;\n        var nodeRect = d3.select(element).select('.' + cn.nodeRect);\n        var rootBBox = gd._fullLayout._paperdiv.node().getBoundingClientRect();\n        var boundingBox = nodeRect.node().getBoundingClientRect();\n        var hoverCenterX0 = boundingBox.left - 2 - rootBBox.left;\n        var hoverCenterX1 = boundingBox.right + 2 - rootBBox.left;\n        var hoverCenterY = boundingBox.top + boundingBox.height / 4 - rootBBox.top;\n\n        var hovertemplateLabels = {valueLabel: numberFormat(d.valueFormat)(d.node.value) + d.valueSuffix};\n        d.node.fullData = d.node.trace;\n\n        gd._fullLayout._calcInverseTransform(gd);\n        var scaleX = gd._fullLayout._invScaleX;\n        var scaleY = gd._fullLayout._invScaleY;\n\n        var tooltip = Fx.loneHover({\n            x0: scaleX * hoverCenterX0,\n            x1: scaleX * hoverCenterX1,\n            y: scaleY * hoverCenterY,\n            name: numberFormat(d.valueFormat)(d.node.value) + d.valueSuffix,\n            text: [\n                d.node.label,\n                incomingLabel + d.node.targetLinks.length,\n                outgoingLabel + d.node.sourceLinks.length\n            ].filter(renderableValuePresent).join('<br>'),\n            color: castHoverOption(obj, 'bgcolor') || d.tinyColorHue,\n            borderColor: castHoverOption(obj, 'bordercolor'),\n            fontFamily: castHoverOption(obj, 'font.family'),\n            fontSize: castHoverOption(obj, 'font.size'),\n            fontColor: castHoverOption(obj, 'font.color'),\n            fontWeight: castHoverOption(obj, 'font.weight'),\n            fontStyle: castHoverOption(obj, 'font.style'),\n            fontVariant: castHoverOption(obj, 'font.variant'),\n            fontTextcase: castHoverOption(obj, 'font.textcase'),\n            fontLineposition: castHoverOption(obj, 'font.lineposition'),\n            fontShadow: castHoverOption(obj, 'font.shadow'),\n            nameLength: castHoverOption(obj, 'namelength'),\n            textAlign: castHoverOption(obj, 'align'),\n            idealAlign: 'left',\n\n            hovertemplate: obj.hovertemplate,\n            hovertemplateLabels: hovertemplateLabels,\n            eventData: [d.node]\n        }, {\n            container: fullLayout._hoverlayer.node(),\n            outerContainer: fullLayout._paper.node(),\n            gd: gd\n        });\n\n        makeTranslucent(tooltip, 0.85);\n        makeTextContrasty(tooltip);\n    };\n\n    var nodeUnhover = function(element, d, sankey) {\n        if(gd._fullLayout.hovermode === false) return;\n        d3.select(element).call(nodeNonHoveredStyle, d, sankey);\n        if(d.node.trace.node.hoverinfo !== 'skip') {\n            d.node.fullData = d.node.trace;\n            gd.emit('plotly_unhover', {\n                event: d3.event,\n                points: [d.node]\n            });\n        }\n\n        Fx.loneUnhover(fullLayout._hoverlayer.node());\n    };\n\n    render(\n        gd,\n        svg,\n        calcData,\n        {\n            width: size.w,\n            height: size.h,\n            margin: {\n                t: size.t,\n                r: size.r,\n                b: size.b,\n                l: size.l\n            }\n        },\n        {\n            linkEvents: {\n                hover: linkHover,\n                follow: linkHoverFollow,\n                unhover: linkUnhover,\n                select: linkSelect\n            },\n            nodeEvents: {\n                hover: nodeHover,\n                follow: nodeHoverFollow,\n                unhover: nodeUnhover,\n                select: nodeSelect\n            }\n        }\n    );\n};\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,EAAE,GAAGC,OAAO,CAAC,YAAY,CAAC;AAC9B,IAAIC,GAAG,GAAGD,OAAO,CAAC,WAAW,CAAC;AAC9B,IAAIE,YAAY,GAAGD,GAAG,CAACC,YAAY;AACnC,IAAIC,MAAM,GAAGH,OAAO,CAAC,UAAU,CAAC;AAChC,IAAII,EAAE,GAAGJ,OAAO,CAAC,qBAAqB,CAAC;AACvC,IAAIK,KAAK,GAAGL,OAAO,CAAC,wBAAwB,CAAC;AAC7C,IAAIM,EAAE,GAAGN,OAAO,CAAC,aAAa,CAAC,CAACM,EAAE;AAElC,IAAIC,CAAC,GAAGN,GAAG,CAACM,CAAC;AAEb,SAASC,sBAAsBA,CAACC,CAAC,EAAE;EAAC,OAAOA,CAAC,KAAK,EAAE;AAAC;AAEpD,SAASC,QAAQA,CAACC,SAAS,EAAEF,CAAC,EAAE;EAC5B,OAAOE,SAAS,CAACC,MAAM,CAAC,UAASC,CAAC,EAAE;IAAC,OAAOA,CAAC,CAACC,GAAG,KAAKL,CAAC,CAACM,OAAO;EAAC,CAAC,CAAC;AACtE;AAEA,SAASC,eAAeA,CAACC,OAAO,EAAEC,KAAK,EAAE;EACrCnB,EAAE,CAACoB,MAAM,CAACF,OAAO,CAAC,CACbE,MAAM,CAAC,MAAM,CAAC,CACdC,KAAK,CAAC,cAAc,EAAEF,KAAK,CAAC;EACjCnB,EAAE,CAACoB,MAAM,CAACF,OAAO,CAAC,CACbE,MAAM,CAAC,MAAM,CAAC,CACdC,KAAK,CAAC,cAAc,EAAEF,KAAK,CAAC;AACrC;AAEA,SAASG,iBAAiBA,CAACJ,OAAO,EAAE;EAChClB,EAAE,CAACoB,MAAM,CAACF,OAAO,CAAC,CACbE,MAAM,CAAC,WAAW,CAAC,CACnBC,KAAK,CAAC,MAAM,EAAE,OAAO,CAAC;AAC/B;AAEA,SAASE,YAAYA,CAACb,CAAC,EAAE;EACrB,OAAO,UAASc,CAAC,EAAE;IACf,OAAOd,CAAC,CAACe,IAAI,CAACC,WAAW,CAACC,OAAO,CAACH,CAAC,CAACI,IAAI,CAAC,KAAK,CAAC,CAAC,IAAIlB,CAAC,CAACe,IAAI,CAACI,WAAW,CAACF,OAAO,CAACH,CAAC,CAACI,IAAI,CAAC,KAAK,CAAC,CAAC;EACjG,CAAC;AACL;AAEA,SAASE,YAAYA,CAACN,CAAC,EAAE;EACrB,OAAO,UAASd,CAAC,EAAE;IACf,OAAOA,CAAC,CAACe,IAAI,CAACC,WAAW,CAACC,OAAO,CAACH,CAAC,CAACI,IAAI,CAAC,KAAK,CAAC,CAAC,IAAIlB,CAAC,CAACe,IAAI,CAACI,WAAW,CAACF,OAAO,CAACH,CAAC,CAACI,IAAI,CAAC,KAAK,CAAC,CAAC;EACjG,CAAC;AACL;AAEA,SAASG,gBAAgBA,CAACC,UAAU,EAAEtB,CAAC,EAAEuB,MAAM,EAAE;EAC7C,IAAGvB,CAAC,IAAIuB,MAAM,EAAE;IACZtB,QAAQ,CAACsB,MAAM,EAAEvB,CAAC,CAAC,CACdwB,SAAS,CAAC,GAAG,GAAG3B,EAAE,CAAC4B,UAAU,CAAC,CAC9BtB,MAAM,CAACU,YAAY,CAACb,CAAC,CAAC,CAAC,CACvB0B,IAAI,CAACC,gBAAgB,CAACC,IAAI,CAAC,CAAC,EAAE5B,CAAC,EAAEuB,MAAM,EAAE,KAAK,CAAC,CAAC;EACzD;AACJ;AAEA,SAASM,mBAAmBA,CAACP,UAAU,EAAEtB,CAAC,EAAEuB,MAAM,EAAE;EAChD,IAAGvB,CAAC,IAAIuB,MAAM,EAAE;IACZtB,QAAQ,CAACsB,MAAM,EAAEvB,CAAC,CAAC,CACdwB,SAAS,CAAC,GAAG,GAAG3B,EAAE,CAAC4B,UAAU,CAAC,CAC9BtB,MAAM,CAACU,YAAY,CAACb,CAAC,CAAC,CAAC,CACvB0B,IAAI,CAACI,mBAAmB,CAACF,IAAI,CAAC,CAAC,EAAE5B,CAAC,EAAEuB,MAAM,EAAE,KAAK,CAAC,CAAC;EAC5D;AACJ;AAEA,SAASI,gBAAgBA,CAAC3B,CAAC,EAAEuB,MAAM,EAAEQ,UAAU,EAAEN,UAAU,EAAE;EACzDA,UAAU,CAACd,KAAK,CAAC,MAAM,EAAE,UAASG,CAAC,EAAE;IACjC,IAAG,CAACA,CAAC,CAACI,IAAI,CAACc,kBAAkB,EAAE;MAC3B,OAAOlB,CAAC,CAACmB,iBAAiB;IAC9B;EACJ,CAAC,CAAC,CAACtB,KAAK,CAAC,cAAc,EAAE,UAASG,CAAC,EAAE;IACjC,IAAG,CAACA,CAAC,CAACI,IAAI,CAACc,kBAAkB,EAAE;MAC3B,OAAOlB,CAAC,CAACoB,mBAAmB;IAChC;EACJ,CAAC,CAAC;EAEFT,UAAU,CAACU,IAAI,CAAC,UAASC,OAAO,EAAE;IAC9B,IAAIC,KAAK,GAAGD,OAAO,CAAClB,IAAI,CAACmB,KAAK;IAC9B,IAAGA,KAAK,KAAK,EAAE,EAAE;MACbpC,QAAQ,CAACsB,MAAM,EAAEvB,CAAC,CAAC,CACdwB,SAAS,CAAC,GAAG,GAAG3B,EAAE,CAAC4B,UAAU,CAAC,CAC9BtB,MAAM,CAAC,UAASW,CAAC,EAAE;QAAC,OAAOA,CAAC,CAACI,IAAI,CAACmB,KAAK,KAAKA,KAAK;MAAC,CAAC,CAAC,CACpD1B,KAAK,CAAC,MAAM,EAAE,UAASG,CAAC,EAAE;QACvB,IAAG,CAACA,CAAC,CAACI,IAAI,CAACc,kBAAkB,EAAE;UAC3B,OAAOlB,CAAC,CAACmB,iBAAiB;QAC9B;MACJ,CAAC,CAAC,CAACtB,KAAK,CAAC,cAAc,EAAE,UAASG,CAAC,EAAE;QACjC,IAAG,CAACA,CAAC,CAACI,IAAI,CAACc,kBAAkB,EAAE;UAC3B,OAAOlB,CAAC,CAACoB,mBAAmB;QAChC;MACJ,CAAC,CAAC;IACV;EACJ,CAAC,CAAC;EAEF,IAAGH,UAAU,EAAE;IACX9B,QAAQ,CAACsB,MAAM,EAAEvB,CAAC,CAAC,CACdwB,SAAS,CAAC,GAAG,GAAG3B,EAAE,CAACyB,UAAU,CAAC,CAC9BnB,MAAM,CAACiB,YAAY,CAACpB,CAAC,CAAC,CAAC,CACvB0B,IAAI,CAACL,gBAAgB,CAAC;EAC/B;AACJ;AAEA,SAASS,mBAAmBA,CAAC9B,CAAC,EAAEuB,MAAM,EAAEQ,UAAU,EAAEN,UAAU,EAAE;EAC5DA,UAAU,CAACd,KAAK,CAAC,MAAM,EAAE,UAASG,CAAC,EAAE;IACjC,OAAOA,CAAC,CAACwB,YAAY;EACzB,CAAC,CAAC,CAAC3B,KAAK,CAAC,cAAc,EAAE,UAASG,CAAC,EAAE;IACjC,OAAOA,CAAC,CAACyB,cAAc;EAC3B,CAAC,CAAC;EAEFd,UAAU,CAACU,IAAI,CAAC,UAASC,OAAO,EAAE;IAC9B,IAAIC,KAAK,GAAGD,OAAO,CAAClB,IAAI,CAACmB,KAAK;IAC9B,IAAGA,KAAK,KAAK,EAAE,EAAE;MACbpC,QAAQ,CAACsB,MAAM,EAAEvB,CAAC,CAAC,CACdwB,SAAS,CAAC,GAAG,GAAG3B,EAAE,CAAC4B,UAAU,CAAC,CAC9BtB,MAAM,CAAC,UAASW,CAAC,EAAE;QAAC,OAAOA,CAAC,CAACI,IAAI,CAACmB,KAAK,KAAKA,KAAK;MAAC,CAAC,CAAC,CACpD1B,KAAK,CAAC,MAAM,EAAE,UAASG,CAAC,EAAE;QAAC,OAAOA,CAAC,CAACwB,YAAY;MAAC,CAAC,CAAC,CACnD3B,KAAK,CAAC,cAAc,EAAE,UAASG,CAAC,EAAE;QAAC,OAAOA,CAAC,CAACyB,cAAc;MAAC,CAAC,CAAC;IACtE;EACJ,CAAC,CAAC;EAEF,IAAGR,UAAU,EAAE;IACX9B,QAAQ,CAACsB,MAAM,EAAEvB,CAAC,CAAC,CACdwB,SAAS,CAAC3B,EAAE,CAACyB,UAAU,CAAC,CACxBnB,MAAM,CAACiB,YAAY,CAACpB,CAAC,CAAC,CAAC,CACvB0B,IAAI,CAACG,mBAAmB,CAAC;EAClC;AACJ;;AAEA;AACA,SAASW,eAAeA,CAACC,KAAK,EAAEC,IAAI,EAAE;EAClC,IAAIC,SAAS,GAAGF,KAAK,CAACG,UAAU,IAAI,CAAC,CAAC;EACtC,IAAIC,GAAG,GAAGrD,GAAG,CAACsD,cAAc,CAACH,SAAS,EAAED,IAAI,CAAC,CAACK,GAAG,CAAC,CAAC;EACnD,OAAOC,KAAK,CAACC,OAAO,CAACJ,GAAG,CAAC,GAAG,KAAK,GAAGA,GAAG;AAC3C;AAEAK,MAAM,CAACC,OAAO,GAAG,SAASC,IAAIA,CAACC,EAAE,EAAEC,QAAQ,EAAE;EACzC,IAAIC,UAAU,GAAGF,EAAE,CAACG,WAAW;EAC/B,IAAIC,GAAG,GAAGF,UAAU,CAACG,MAAM;EAC3B,IAAIC,IAAI,GAAGJ,UAAU,CAACK,KAAK;;EAE3B;EACA,KAAI,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGR,EAAE,CAACS,SAAS,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;IACzC,IAAG,CAACR,EAAE,CAACS,SAAS,CAACD,CAAC,CAAC,CAACG,OAAO,EAAE;IAC7B,IAAGX,EAAE,CAACS,SAAS,CAACD,CAAC,CAAC,CAACI,IAAI,KAAKpE,EAAE,CAAC0B,MAAM,EAAE;IACvC,IAAG,CAAC8B,EAAE,CAACS,SAAS,CAACD,CAAC,CAAC,CAACK,YAAY,EAAE;MAC9B,IAAInD,IAAI,GAAGsC,EAAE,CAACS,SAAS,CAACD,CAAC,CAAC,CAAC9C,IAAI;MAC/BsC,EAAE,CAACS,SAAS,CAACD,CAAC,CAAC,CAACK,YAAY,GAAG;QAC3BnD,IAAI,EAAE;UACFoD,MAAM,EAAEpD,IAAI,CAACoD,MAAM,CAACC,KAAK,CAAC,CAAC;UAC3BC,CAAC,EAAEtD,IAAI,CAACsD,CAAC,CAACD,KAAK,CAAC,CAAC;UACjBE,CAAC,EAAEvD,IAAI,CAACuD,CAAC,CAACF,KAAK,CAAC;QACpB;MACJ,CAAC;IACL;EACJ;EAEA,IAAIG,UAAU,GAAG,SAAAA,CAAS/D,OAAO,EAAER,CAAC,EAAE;IAClC,IAAIwE,GAAG,GAAGxE,CAAC,CAACkB,IAAI;IAChBsD,GAAG,CAACC,aAAa,GAAGnF,EAAE,CAACoF,KAAK;IAC5BrB,EAAE,CAACsB,UAAU,GAAG,CAACH,GAAG,CAAC;IACrB7E,EAAE,CAACiF,KAAK,CAACvB,EAAE,EAAE;MAAEwB,MAAM,EAAE;IAAK,CAAC,CAAC;EAClC,CAAC;EAED,IAAIC,SAAS,GAAG,SAAAA,CAAStE,OAAO,EAAER,CAAC,EAAEuB,MAAM,EAAE;IACzC,IAAG8B,EAAE,CAACG,WAAW,CAACuB,SAAS,KAAK,KAAK,EAAE;IACvCzF,EAAE,CAACoB,MAAM,CAACF,OAAO,CAAC,CAACkB,IAAI,CAACC,gBAAgB,CAACC,IAAI,CAAC,CAAC,EAAE5B,CAAC,EAAEuB,MAAM,EAAE,IAAI,CAAC,CAAC;IAClE,IAAGvB,CAAC,CAACkB,IAAI,CAACuB,KAAK,CAACvB,IAAI,CAAC8D,SAAS,KAAK,MAAM,EAAE;MACvChF,CAAC,CAACkB,IAAI,CAAC+D,QAAQ,GAAGjF,CAAC,CAACkB,IAAI,CAACuB,KAAK;MAC9BY,EAAE,CAAC6B,IAAI,CAAC,cAAc,EAAE;QACpBR,KAAK,EAAEpF,EAAE,CAACoF,KAAK;QACfS,MAAM,EAAE,CAACnF,CAAC,CAACkB,IAAI;MACnB,CAAC,CAAC;IACN;EACJ,CAAC;EAED,IAAIkE,WAAW,GAAGtF,CAAC,CAACuD,EAAE,EAAE,SAAS,CAAC,GAAG,GAAG;EACxC,IAAIgC,WAAW,GAAGvF,CAAC,CAACuD,EAAE,EAAE,SAAS,CAAC,GAAG,GAAG;EACxC,IAAIiC,kBAAkB,GAAGxF,CAAC,CAACuD,EAAE,EAAE,gBAAgB,CAAC,GAAG,GAAG;EACtD,IAAIkC,aAAa,GAAGzF,CAAC,CAACuD,EAAE,EAAE,sBAAsB,CAAC,GAAG,GAAG;EACvD,IAAImC,aAAa,GAAG1F,CAAC,CAACuD,EAAE,EAAE,sBAAsB,CAAC,GAAG,GAAG;EAEvD,IAAIoC,eAAe,GAAG,SAAAA,CAASjF,OAAO,EAAER,CAAC,EAAE;IACvC,IAAGqD,EAAE,CAACG,WAAW,CAACuB,SAAS,KAAK,KAAK,EAAE;IACvC,IAAIW,GAAG,GAAG1F,CAAC,CAACkB,IAAI,CAACuB,KAAK,CAACvB,IAAI;IAC3B,IAAGwE,GAAG,CAACV,SAAS,KAAK,MAAM,IAAIU,GAAG,CAACV,SAAS,KAAK,MAAM,EAAE;IAEzD,IAAIW,UAAU,GAAG,EAAE;IAEnB,SAASC,mBAAmBA,CAAC1E,IAAI,EAAE;MAC/B,IAAI2E,YAAY,EAAEC,YAAY;MAC9B,IAAG5E,IAAI,CAAC6E,QAAQ,EAAE;QACdF,YAAY,GAAG,CAAC3E,IAAI,CAAC8E,gBAAgB,CAACC,eAAe,GAAG/E,IAAI,CAAC8E,gBAAgB,CAACE,gBAAgB,IAAI,CAAC;QACnGJ,YAAY,GAAG5E,IAAI,CAAC8E,gBAAgB,CAACG,kBAAkB;MAC3D,CAAC,MAAM;QACHN,YAAY,GAAG,CAAC3E,IAAI,CAACkF,MAAM,CAACC,EAAE,GAAGnF,IAAI,CAAC2D,MAAM,CAACyB,EAAE,IAAI,CAAC;QACpDR,YAAY,GAAG,CAAC5E,IAAI,CAACqF,EAAE,GAAGrF,IAAI,CAACsF,EAAE,IAAI,CAAC;MAC1C;MACA,IAAIC,MAAM,GAAG,CAACZ,YAAY,EAAEC,YAAY,CAAC;MACzC,IAAG5E,IAAI,CAACuB,KAAK,CAACiE,WAAW,KAAK,GAAG,EAAED,MAAM,CAACE,OAAO,CAAC,CAAC;MACnDF,MAAM,CAAC,CAAC,CAAC,IAAIzG,CAAC,CAAC4G,MAAM,CAACC,UAAU;MAChCJ,MAAM,CAAC,CAAC,CAAC,IAAIzG,CAAC,CAAC4G,MAAM,CAACE,UAAU;MAChC,OAAOL,MAAM;IACjB;;IAEA;IACA,IAAIM,WAAW,GAAG,CAAC;IACnB,KAAI,IAAIlD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG7D,CAAC,CAACgH,IAAI,CAACC,KAAK,CAAClD,MAAM,EAAEF,CAAC,EAAE,EAAE;MACzC,IAAI3C,IAAI,GAAGlB,CAAC,CAACgH,IAAI,CAACC,KAAK,CAACpD,CAAC,CAAC;MAC1B,IAAGR,EAAE,CAACG,WAAW,CAACuB,SAAS,KAAK,SAAS,IAAI/E,CAAC,CAACkB,IAAI,CAACgG,WAAW,KAAKhG,IAAI,CAACgG,WAAW,EAAE;MACtF,IAAGlH,CAAC,CAACkB,IAAI,CAACgG,WAAW,KAAKhG,IAAI,CAACgG,WAAW,EAAEH,WAAW,GAAGlD,CAAC;MAC3D3C,IAAI,CAAC+D,QAAQ,GAAG/D,IAAI,CAACuB,KAAK;MAC1BiD,GAAG,GAAG1F,CAAC,CAACkB,IAAI,CAACuB,KAAK,CAACvB,IAAI;MACvB,IAAIiG,WAAW,GAAGvB,mBAAmB,CAAC1E,IAAI,CAAC;MAC3C,IAAIkG,mBAAmB,GAAG;QAACC,UAAU,EAAE5H,YAAY,CAACO,CAAC,CAACsH,WAAW,CAAC,CAACpG,IAAI,CAACqG,KAAK,CAAC,GAAGvH,CAAC,CAACwH;MAAW,CAAC;MAE/F7B,UAAU,CAAC8B,IAAI,CAAC;QACZpD,CAAC,EAAE8C,WAAW,CAAC,CAAC,CAAC;QACjB7C,CAAC,EAAE6C,WAAW,CAAC,CAAC,CAAC;QACjBO,IAAI,EAAEN,mBAAmB,CAACC,UAAU;QACpCM,IAAI,EAAE,CACFzG,IAAI,CAACmB,KAAK,IAAI,EAAE,EAChB+C,WAAW,GAAGlE,IAAI,CAACkF,MAAM,CAAC/D,KAAK,EAC/BgD,WAAW,GAAGnE,IAAI,CAAC2D,MAAM,CAACxC,KAAK,EAC/BnB,IAAI,CAACc,kBAAkB,GAAGsD,kBAAkB,GAAG7F,YAAY,CAAC,OAAO,CAAC,CAACyB,IAAI,CAAC8F,IAAI,CAACY,kBAAkB,CAAC,GAAG,EAAE,CAC1G,CAACzH,MAAM,CAACJ,sBAAsB,CAAC,CAAC8H,IAAI,CAAC,MAAM,CAAC;QAC7CC,KAAK,EAAEtF,eAAe,CAACkD,GAAG,EAAE,SAAS,CAAC,IAAI9F,KAAK,CAACmI,UAAU,CAAC7G,IAAI,CAAC4G,KAAK,EAAE,CAAC,CAAC;QACzEE,WAAW,EAAExF,eAAe,CAACkD,GAAG,EAAE,aAAa,CAAC;QAChDuC,UAAU,EAAEzF,eAAe,CAACkD,GAAG,EAAE,aAAa,CAAC;QAC/CwC,QAAQ,EAAE1F,eAAe,CAACkD,GAAG,EAAE,WAAW,CAAC;QAC3CyC,SAAS,EAAE3F,eAAe,CAACkD,GAAG,EAAE,YAAY,CAAC;QAC7C0C,UAAU,EAAE5F,eAAe,CAACkD,GAAG,EAAE,aAAa,CAAC;QAC/C2C,SAAS,EAAE7F,eAAe,CAACkD,GAAG,EAAE,YAAY,CAAC;QAC7C4C,WAAW,EAAE9F,eAAe,CAACkD,GAAG,EAAE,cAAc,CAAC;QACjD6C,YAAY,EAAE/F,eAAe,CAACkD,GAAG,EAAE,eAAe,CAAC;QACnD8C,gBAAgB,EAAEhG,eAAe,CAACkD,GAAG,EAAE,mBAAmB,CAAC;QAC3D+C,UAAU,EAAEjG,eAAe,CAACkD,GAAG,EAAE,aAAa,CAAC;QAC/CgD,UAAU,EAAElG,eAAe,CAACkD,GAAG,EAAE,YAAY,CAAC;QAC9CiD,SAAS,EAAEnG,eAAe,CAACkD,GAAG,EAAE,OAAO,CAAC;QACxCkD,UAAU,EAAEtJ,EAAE,CAACoF,KAAK,CAACL,CAAC,GAAG8C,WAAW,CAAC,CAAC,CAAC,GAAG,OAAO,GAAG,MAAM;QAE1D0B,aAAa,EAAEnD,GAAG,CAACmD,aAAa;QAChCzB,mBAAmB,EAAEA,mBAAmB;QACxC0B,SAAS,EAAE,CAAC5H,IAAI;MACpB,CAAC,CAAC;IACN;IAEA,IAAI6H,QAAQ,GAAGpJ,EAAE,CAACqJ,SAAS,CAACrD,UAAU,EAAE;MACpCsD,SAAS,EAAE1F,UAAU,CAAC2F,WAAW,CAACnI,IAAI,CAAC,CAAC;MACxCoI,cAAc,EAAE5F,UAAU,CAACG,MAAM,CAAC3C,IAAI,CAAC,CAAC;MACxCsC,EAAE,EAAEA,EAAE;MACN0D,WAAW,EAAEA;IACjB,CAAC,CAAC;IAEFgC,QAAQ,CAAC5G,IAAI,CAAC,YAAW;MACrB,IAAIiH,OAAO,GAAG,IAAI;MAClB,IAAG,CAACpJ,CAAC,CAACkB,IAAI,CAACc,kBAAkB,EAAE;QAC3BzB,eAAe,CAAC6I,OAAO,EAAE,IAAI,CAAC;MAClC;MACAxI,iBAAiB,CAACwI,OAAO,CAAC;IAC9B,CAAC,CAAC;EACN,CAAC;EAED,IAAIC,WAAW,GAAG,SAAAA,CAAS7I,OAAO,EAAER,CAAC,EAAEuB,MAAM,EAAE;IAC3C,IAAG8B,EAAE,CAACG,WAAW,CAACuB,SAAS,KAAK,KAAK,EAAE;IACvCzF,EAAE,CAACoB,MAAM,CAACF,OAAO,CAAC,CAACkB,IAAI,CAACI,mBAAmB,CAACF,IAAI,CAAC,CAAC,EAAE5B,CAAC,EAAEuB,MAAM,EAAE,IAAI,CAAC,CAAC;IACrE,IAAGvB,CAAC,CAACkB,IAAI,CAACuB,KAAK,CAACvB,IAAI,CAAC8D,SAAS,KAAK,MAAM,EAAE;MACvChF,CAAC,CAACkB,IAAI,CAAC+D,QAAQ,GAAGjF,CAAC,CAACkB,IAAI,CAACuB,KAAK;MAC9BY,EAAE,CAAC6B,IAAI,CAAC,gBAAgB,EAAE;QACtBR,KAAK,EAAEpF,EAAE,CAACoF,KAAK;QACfS,MAAM,EAAE,CAACnF,CAAC,CAACkB,IAAI;MACnB,CAAC,CAAC;IACN;IAEAvB,EAAE,CAAC2J,WAAW,CAAC/F,UAAU,CAAC2F,WAAW,CAACnI,IAAI,CAAC,CAAC,CAAC;EACjD,CAAC;EAED,IAAIwI,UAAU,GAAG,SAAAA,CAAS/I,OAAO,EAAER,CAAC,EAAEuB,MAAM,EAAE;IAC1C,IAAIiD,GAAG,GAAGxE,CAAC,CAACe,IAAI;IAChByD,GAAG,CAACC,aAAa,GAAGnF,EAAE,CAACoF,KAAK;IAC5BrB,EAAE,CAACsB,UAAU,GAAG,CAACH,GAAG,CAAC;IACrBlF,EAAE,CAACoB,MAAM,CAACF,OAAO,CAAC,CAACkB,IAAI,CAACG,mBAAmB,EAAE7B,CAAC,EAAEuB,MAAM,CAAC;IACvD5B,EAAE,CAACiF,KAAK,CAACvB,EAAE,EAAE;MAAEwB,MAAM,EAAE;IAAK,CAAC,CAAC;EAClC,CAAC;EAED,IAAI2E,SAAS,GAAG,SAAAA,CAAShJ,OAAO,EAAER,CAAC,EAAEuB,MAAM,EAAE;IACzC,IAAG8B,EAAE,CAACG,WAAW,CAACuB,SAAS,KAAK,KAAK,EAAE;IACvCzF,EAAE,CAACoB,MAAM,CAACF,OAAO,CAAC,CAACkB,IAAI,CAACL,gBAAgB,EAAErB,CAAC,EAAEuB,MAAM,CAAC;IACpD,IAAGvB,CAAC,CAACe,IAAI,CAAC0B,KAAK,CAAC1B,IAAI,CAACiE,SAAS,KAAK,MAAM,EAAE;MACvChF,CAAC,CAACe,IAAI,CAACkE,QAAQ,GAAGjF,CAAC,CAACe,IAAI,CAAC0B,KAAK;MAC9BY,EAAE,CAAC6B,IAAI,CAAC,cAAc,EAAE;QACpBR,KAAK,EAAEpF,EAAE,CAACoF,KAAK;QACfS,MAAM,EAAE,CAACnF,CAAC,CAACe,IAAI;MACnB,CAAC,CAAC;IACN;EACJ,CAAC;EAED,IAAI0I,eAAe,GAAG,SAAAA,CAASjJ,OAAO,EAAER,CAAC,EAAE;IACvC,IAAGqD,EAAE,CAACG,WAAW,CAACuB,SAAS,KAAK,KAAK,EAAE;IAEvC,IAAIW,GAAG,GAAG1F,CAAC,CAACe,IAAI,CAAC0B,KAAK,CAAC1B,IAAI;IAC3B,IAAG2E,GAAG,CAACV,SAAS,KAAK,MAAM,IAAIU,GAAG,CAACV,SAAS,KAAK,MAAM,EAAE;IACzD,IAAI0E,QAAQ,GAAGpK,EAAE,CAACoB,MAAM,CAACF,OAAO,CAAC,CAACE,MAAM,CAAC,GAAG,GAAGb,EAAE,CAAC6J,QAAQ,CAAC;IAC3D,IAAIC,QAAQ,GAAGtG,EAAE,CAACG,WAAW,CAACoG,SAAS,CAAC7I,IAAI,CAAC,CAAC,CAAC8I,qBAAqB,CAAC,CAAC;IACtE,IAAIC,WAAW,GAAGJ,QAAQ,CAAC3I,IAAI,CAAC,CAAC,CAAC8I,qBAAqB,CAAC,CAAC;IACzD,IAAIE,aAAa,GAAGD,WAAW,CAACE,IAAI,GAAG,CAAC,GAAGL,QAAQ,CAACK,IAAI;IACxD,IAAIC,aAAa,GAAGH,WAAW,CAACI,KAAK,GAAG,CAAC,GAAGP,QAAQ,CAACK,IAAI;IACzD,IAAIlE,YAAY,GAAGgE,WAAW,CAACK,GAAG,GAAGL,WAAW,CAACM,MAAM,GAAG,CAAC,GAAGT,QAAQ,CAACQ,GAAG;IAE1E,IAAI/C,mBAAmB,GAAG;MAACC,UAAU,EAAE5H,YAAY,CAACO,CAAC,CAACsH,WAAW,CAAC,CAACtH,CAAC,CAACe,IAAI,CAACwG,KAAK,CAAC,GAAGvH,CAAC,CAACwH;IAAW,CAAC;IACjGxH,CAAC,CAACe,IAAI,CAACkE,QAAQ,GAAGjF,CAAC,CAACe,IAAI,CAAC0B,KAAK;IAE9BY,EAAE,CAACG,WAAW,CAAC6G,qBAAqB,CAAChH,EAAE,CAAC;IACxC,IAAIiH,MAAM,GAAGjH,EAAE,CAACG,WAAW,CAAC+G,UAAU;IACtC,IAAIC,MAAM,GAAGnH,EAAE,CAACG,WAAW,CAACiH,UAAU;IAEtC,IAAIrB,OAAO,GAAGzJ,EAAE,CAACqJ,SAAS,CAAC;MACvB1C,EAAE,EAAEgE,MAAM,GAAGP,aAAa;MAC1B1D,EAAE,EAAEiE,MAAM,GAAGL,aAAa;MAC1B3F,CAAC,EAAEkG,MAAM,GAAG1E,YAAY;MACxB4B,IAAI,EAAEjI,YAAY,CAACO,CAAC,CAACsH,WAAW,CAAC,CAACtH,CAAC,CAACe,IAAI,CAACwG,KAAK,CAAC,GAAGvH,CAAC,CAACwH,WAAW;MAC/DG,IAAI,EAAE,CACF3H,CAAC,CAACe,IAAI,CAACsB,KAAK,EACZkD,aAAa,GAAGvF,CAAC,CAACe,IAAI,CAACI,WAAW,CAAC4C,MAAM,EACzCyB,aAAa,GAAGxF,CAAC,CAACe,IAAI,CAACC,WAAW,CAAC+C,MAAM,CAC5C,CAAC5D,MAAM,CAACJ,sBAAsB,CAAC,CAAC8H,IAAI,CAAC,MAAM,CAAC;MAC7CC,KAAK,EAAEtF,eAAe,CAACkD,GAAG,EAAE,SAAS,CAAC,IAAI1F,CAAC,CAACsC,YAAY;MACxD0F,WAAW,EAAExF,eAAe,CAACkD,GAAG,EAAE,aAAa,CAAC;MAChDuC,UAAU,EAAEzF,eAAe,CAACkD,GAAG,EAAE,aAAa,CAAC;MAC/CwC,QAAQ,EAAE1F,eAAe,CAACkD,GAAG,EAAE,WAAW,CAAC;MAC3CyC,SAAS,EAAE3F,eAAe,CAACkD,GAAG,EAAE,YAAY,CAAC;MAC7C0C,UAAU,EAAE5F,eAAe,CAACkD,GAAG,EAAE,aAAa,CAAC;MAC/C2C,SAAS,EAAE7F,eAAe,CAACkD,GAAG,EAAE,YAAY,CAAC;MAC7C4C,WAAW,EAAE9F,eAAe,CAACkD,GAAG,EAAE,cAAc,CAAC;MACjD6C,YAAY,EAAE/F,eAAe,CAACkD,GAAG,EAAE,eAAe,CAAC;MACnD8C,gBAAgB,EAAEhG,eAAe,CAACkD,GAAG,EAAE,mBAAmB,CAAC;MAC3D+C,UAAU,EAAEjG,eAAe,CAACkD,GAAG,EAAE,aAAa,CAAC;MAC/CgD,UAAU,EAAElG,eAAe,CAACkD,GAAG,EAAE,YAAY,CAAC;MAC9CiD,SAAS,EAAEnG,eAAe,CAACkD,GAAG,EAAE,OAAO,CAAC;MACxCkD,UAAU,EAAE,MAAM;MAElBC,aAAa,EAAEnD,GAAG,CAACmD,aAAa;MAChCzB,mBAAmB,EAAEA,mBAAmB;MACxC0B,SAAS,EAAE,CAAC9I,CAAC,CAACe,IAAI;IACtB,CAAC,EAAE;MACCkI,SAAS,EAAE1F,UAAU,CAAC2F,WAAW,CAACnI,IAAI,CAAC,CAAC;MACxCoI,cAAc,EAAE5F,UAAU,CAACG,MAAM,CAAC3C,IAAI,CAAC,CAAC;MACxCsC,EAAE,EAAEA;IACR,CAAC,CAAC;IAEF9C,eAAe,CAAC6I,OAAO,EAAE,IAAI,CAAC;IAC9BxI,iBAAiB,CAACwI,OAAO,CAAC;EAC9B,CAAC;EAED,IAAIsB,WAAW,GAAG,SAAAA,CAASlK,OAAO,EAAER,CAAC,EAAEuB,MAAM,EAAE;IAC3C,IAAG8B,EAAE,CAACG,WAAW,CAACuB,SAAS,KAAK,KAAK,EAAE;IACvCzF,EAAE,CAACoB,MAAM,CAACF,OAAO,CAAC,CAACkB,IAAI,CAACG,mBAAmB,EAAE7B,CAAC,EAAEuB,MAAM,CAAC;IACvD,IAAGvB,CAAC,CAACe,IAAI,CAAC0B,KAAK,CAAC1B,IAAI,CAACiE,SAAS,KAAK,MAAM,EAAE;MACvChF,CAAC,CAACe,IAAI,CAACkE,QAAQ,GAAGjF,CAAC,CAACe,IAAI,CAAC0B,KAAK;MAC9BY,EAAE,CAAC6B,IAAI,CAAC,gBAAgB,EAAE;QACtBR,KAAK,EAAEpF,EAAE,CAACoF,KAAK;QACfS,MAAM,EAAE,CAACnF,CAAC,CAACe,IAAI;MACnB,CAAC,CAAC;IACN;IAEApB,EAAE,CAAC2J,WAAW,CAAC/F,UAAU,CAAC2F,WAAW,CAACnI,IAAI,CAAC,CAAC,CAAC;EACjD,CAAC;EAEDrB,MAAM,CACF2D,EAAE,EACFI,GAAG,EACHH,QAAQ,EACR;IACIqH,KAAK,EAAEhH,IAAI,CAACiH,CAAC;IACbR,MAAM,EAAEzG,IAAI,CAACkH,CAAC;IACdC,MAAM,EAAE;MACJC,CAAC,EAAEpH,IAAI,CAACoH,CAAC;MACTC,CAAC,EAAErH,IAAI,CAACqH,CAAC;MACTC,CAAC,EAAEtH,IAAI,CAACsH,CAAC;MACTnK,CAAC,EAAE6C,IAAI,CAAC7C;IACZ;EACJ,CAAC,EACD;IACIoK,UAAU,EAAE;MACRC,KAAK,EAAErG,SAAS;MAChBsG,MAAM,EAAE3F,eAAe;MACvB4F,OAAO,EAAEhC,WAAW;MACpB3I,MAAM,EAAE6D;IACZ,CAAC;IACD+G,UAAU,EAAE;MACRH,KAAK,EAAE3B,SAAS;MAChB4B,MAAM,EAAE3B,eAAe;MACvB4B,OAAO,EAAEX,WAAW;MACpBhK,MAAM,EAAE6I;IACZ;EACJ,CACJ,CAAC;AACL,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script"}