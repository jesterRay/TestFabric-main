{"ast":null,"code":"'use strict';\n\nvar opacity = require('../../components/color').opacity;\nvar hoverOnBars = require('../bar/hover').hoverOnBars;\nvar formatPercent = require('../../lib').formatPercent;\nmodule.exports = function hoverPoints(pointData, xval, yval, hovermode, opts) {\n  var point = hoverOnBars(pointData, xval, yval, hovermode, opts);\n  if (!point) return;\n  var cd = point.cd;\n  var trace = cd[0].trace;\n  var isHorizontal = trace.orientation === 'h';\n\n  // the closest data point\n  var index = point.index;\n  var di = cd[index];\n  var sizeLetter = isHorizontal ? 'x' : 'y';\n  point[sizeLetter + 'LabelVal'] = di.s;\n  point.percentInitial = di.begR;\n  point.percentInitialLabel = formatPercent(di.begR, 1);\n  point.percentPrevious = di.difR;\n  point.percentPreviousLabel = formatPercent(di.difR, 1);\n  point.percentTotal = di.sumR;\n  point.percentTotalLabel = formatPercent(di.sumR, 1);\n  var hoverinfo = di.hi || trace.hoverinfo;\n  var text = [];\n  if (hoverinfo && hoverinfo !== 'none' && hoverinfo !== 'skip') {\n    var isAll = hoverinfo === 'all';\n    var parts = hoverinfo.split('+');\n    var hasFlag = function (flag) {\n      return isAll || parts.indexOf(flag) !== -1;\n    };\n    if (hasFlag('percent initial')) {\n      text.push(point.percentInitialLabel + ' of initial');\n    }\n    if (hasFlag('percent previous')) {\n      text.push(point.percentPreviousLabel + ' of previous');\n    }\n    if (hasFlag('percent total')) {\n      text.push(point.percentTotalLabel + ' of total');\n    }\n  }\n  point.extraText = text.join('<br>');\n  point.color = getTraceColor(trace, di);\n  return [point];\n};\nfunction getTraceColor(trace, di) {\n  var cont = trace.marker;\n  var mc = di.mc || cont.color;\n  var mlc = di.mlc || cont.line.color;\n  var mlw = di.mlw || cont.line.width;\n  if (opacity(mc)) return mc;else if (opacity(mlc) && mlw) return mlc;\n}","map":{"version":3,"names":["opacity","require","hoverOnBars","formatPercent","module","exports","hoverPoints","pointData","xval","yval","hovermode","opts","point","cd","trace","isHorizontal","orientation","index","di","sizeLetter","s","percentInitial","begR","percentInitialLabel","percentPrevious","difR","percentPreviousLabel","percentTotal","sumR","percentTotalLabel","hoverinfo","hi","text","isAll","parts","split","hasFlag","flag","indexOf","push","extraText","join","color","getTraceColor","cont","marker","mc","mlc","line","mlw","width"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/traces/funnel/hover.js"],"sourcesContent":["'use strict';\n\nvar opacity = require('../../components/color').opacity;\nvar hoverOnBars = require('../bar/hover').hoverOnBars;\nvar formatPercent = require('../../lib').formatPercent;\n\nmodule.exports = function hoverPoints(pointData, xval, yval, hovermode, opts) {\n    var point = hoverOnBars(pointData, xval, yval, hovermode, opts);\n    if(!point) return;\n\n    var cd = point.cd;\n    var trace = cd[0].trace;\n    var isHorizontal = (trace.orientation === 'h');\n\n    // the closest data point\n    var index = point.index;\n    var di = cd[index];\n\n    var sizeLetter = isHorizontal ? 'x' : 'y';\n    point[sizeLetter + 'LabelVal'] = di.s;\n\n    point.percentInitial = di.begR;\n    point.percentInitialLabel = formatPercent(di.begR, 1);\n\n    point.percentPrevious = di.difR;\n    point.percentPreviousLabel = formatPercent(di.difR, 1);\n\n    point.percentTotal = di.sumR;\n    point.percentTotalLabel = formatPercent(di.sumR, 1);\n\n    var hoverinfo = di.hi || trace.hoverinfo;\n    var text = [];\n    if(hoverinfo && hoverinfo !== 'none' && hoverinfo !== 'skip') {\n        var isAll = (hoverinfo === 'all');\n        var parts = hoverinfo.split('+');\n\n        var hasFlag = function(flag) { return isAll || parts.indexOf(flag) !== -1; };\n\n        if(hasFlag('percent initial')) {\n            text.push(point.percentInitialLabel + ' of initial');\n        }\n        if(hasFlag('percent previous')) {\n            text.push(point.percentPreviousLabel + ' of previous');\n        }\n        if(hasFlag('percent total')) {\n            text.push(point.percentTotalLabel + ' of total');\n        }\n    }\n    point.extraText = text.join('<br>');\n\n    point.color = getTraceColor(trace, di);\n\n    return [point];\n};\n\nfunction getTraceColor(trace, di) {\n    var cont = trace.marker;\n    var mc = di.mc || cont.color;\n    var mlc = di.mlc || cont.line.color;\n    var mlw = di.mlw || cont.line.width;\n    if(opacity(mc)) return mc;\n    else if(opacity(mlc) && mlw) return mlc;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}