{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\"; // React Router v5\n\nexport function useApi(baseUrl, params) {\n  _s();\n  const history = useHistory();\n  const [data, setData] = useState(null);\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const isMounted = useRef(true); // Track mounted state\n\n  useEffect(() => {\n    isMounted.current = true; // Set to mounted\n\n    if (!baseUrl) return;\n    setIsLoading(true);\n    axios.get(`${process.env.REACT_APP_API_URL}${baseUrl}`, {\n      params\n    }).then(response => {\n      if (isMounted.current) {\n        var _response$data;\n        setData((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.data) || null);\n      }\n    }).catch(error => {\n      if (isMounted.current) {\n        var _error$response;\n        setError(error);\n        console.error(`API Error (${baseUrl}):`, error);\n\n        // Redirect to home page if 404\n        if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 404) {\n          history.push(\"/\");\n        }\n      }\n    }).finally(() => {\n      if (isMounted.current) {\n        setIsLoading(false);\n      }\n    });\n    return () => {\n      isMounted.current = false; // Mark unmounted to prevent state updates\n    };\n  }, [baseUrl, params]);\n  return {\n    data,\n    error,\n    isLoading\n  };\n}\n_s(useApi, \"a8A7rv+UJQ7+oNpsltTnqXwrOh8=\", false, function () {\n  return [useHistory];\n});","map":{"version":3,"names":["useState","useEffect","useRef","axios","useHistory","useApi","baseUrl","params","_s","history","data","setData","error","setError","isLoading","setIsLoading","isMounted","current","get","process","env","REACT_APP_API_URL","then","response","_response$data","catch","_error$response","console","status","push","finally"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/src/middleware/middleware.js"],"sourcesContent":["import { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\"; // React Router v5\n\nexport function useApi(baseUrl, params) {\n    const history = useHistory();\n    const [data, setData] = useState(null);\n    const [error, setError] = useState(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const isMounted = useRef(true); // Track mounted state\n\n    useEffect(() => {\n        isMounted.current = true; // Set to mounted\n\n        if (!baseUrl) return;\n\n        setIsLoading(true);\n\n        axios\n            .get(`${process.env.REACT_APP_API_URL}${baseUrl}`, { params })\n            .then(response => {\n                if (isMounted.current) {\n                    setData(response?.data?.data || null);\n                }\n            })\n            .catch(error => {\n                if (isMounted.current) {\n                    setError(error);\n                    console.error(`API Error (${baseUrl}):`, error);\n\n                    // Redirect to home page if 404\n                    if (error.response?.status === 404) {\n                        history.push(\"/\");\n                    }\n                }\n            })\n            .finally(() => {\n                if (isMounted.current) {\n                    setIsLoading(false);\n                }\n            });\n\n        return () => {\n            isMounted.current = false; // Mark unmounted to prevent state updates\n        };\n    }, [baseUrl, params]);\n\n    return { data, error, isLoading };\n}\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACnD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,QAAQ,kBAAkB,CAAC,CAAC;;AAE/C,OAAO,SAASC,MAAMA,CAACC,OAAO,EAAEC,MAAM,EAAE;EAAAC,EAAA;EACpC,MAAMC,OAAO,GAAGL,UAAU,CAAC,CAAC;EAC5B,MAAM,CAACM,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACc,SAAS,EAAEC,YAAY,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAMgB,SAAS,GAAGd,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;;EAEhCD,SAAS,CAAC,MAAM;IACZe,SAAS,CAACC,OAAO,GAAG,IAAI,CAAC,CAAC;;IAE1B,IAAI,CAACX,OAAO,EAAE;IAEdS,YAAY,CAAC,IAAI,CAAC;IAElBZ,KAAK,CACAe,GAAG,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,GAAGf,OAAO,EAAE,EAAE;MAAEC;IAAO,CAAC,CAAC,CAC7De,IAAI,CAACC,QAAQ,IAAI;MACd,IAAIP,SAAS,CAACC,OAAO,EAAE;QAAA,IAAAO,cAAA;QACnBb,OAAO,CAAC,CAAAY,QAAQ,aAARA,QAAQ,wBAAAC,cAAA,GAARD,QAAQ,CAAEb,IAAI,cAAAc,cAAA,uBAAdA,cAAA,CAAgBd,IAAI,KAAI,IAAI,CAAC;MACzC;IACJ,CAAC,CAAC,CACDe,KAAK,CAACb,KAAK,IAAI;MACZ,IAAII,SAAS,CAACC,OAAO,EAAE;QAAA,IAAAS,eAAA;QACnBb,QAAQ,CAACD,KAAK,CAAC;QACfe,OAAO,CAACf,KAAK,CAAC,cAAcN,OAAO,IAAI,EAAEM,KAAK,CAAC;;QAE/C;QACA,IAAI,EAAAc,eAAA,GAAAd,KAAK,CAACW,QAAQ,cAAAG,eAAA,uBAAdA,eAAA,CAAgBE,MAAM,MAAK,GAAG,EAAE;UAChCnB,OAAO,CAACoB,IAAI,CAAC,GAAG,CAAC;QACrB;MACJ;IACJ,CAAC,CAAC,CACDC,OAAO,CAAC,MAAM;MACX,IAAId,SAAS,CAACC,OAAO,EAAE;QACnBF,YAAY,CAAC,KAAK,CAAC;MACvB;IACJ,CAAC,CAAC;IAEN,OAAO,MAAM;MACTC,SAAS,CAACC,OAAO,GAAG,KAAK,CAAC,CAAC;IAC/B,CAAC;EACL,CAAC,EAAE,CAACX,OAAO,EAAEC,MAAM,CAAC,CAAC;EAErB,OAAO;IAAEG,IAAI;IAAEE,KAAK;IAAEE;EAAU,CAAC;AACrC;AAACN,EAAA,CA5CeH,MAAM;EAAA,QACFD,UAAU;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}