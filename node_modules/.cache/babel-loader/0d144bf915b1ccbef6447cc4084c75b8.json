{"ast":null,"code":"'use strict';\n\nvar Lib = require('../../lib');\nmodule.exports = function sceneUpdate(gd, trace) {\n  var fullLayout = gd._fullLayout;\n  var uid = trace.uid;\n\n  // must place ref to 'scene' in fullLayout, so that:\n  // - it can be relinked properly on updates\n  // - it can be destroyed properly when needed\n  var splomScenes = fullLayout._splomScenes;\n  if (!splomScenes) splomScenes = fullLayout._splomScenes = {};\n  var reset = {\n    dirty: true,\n    selectBatch: [],\n    unselectBatch: []\n  };\n  var first = {\n    matrix: false,\n    selectBatch: [],\n    unselectBatch: []\n  };\n  var scene = splomScenes[trace.uid];\n  if (!scene) {\n    scene = splomScenes[uid] = Lib.extendFlat({}, reset, first);\n    scene.draw = function draw() {\n      if (scene.matrix && scene.matrix.draw) {\n        if (scene.selectBatch.length || scene.unselectBatch.length) {\n          scene.matrix.draw(scene.unselectBatch, scene.selectBatch);\n        } else {\n          scene.matrix.draw();\n        }\n      }\n      scene.dirty = false;\n    };\n\n    // remove scene resources\n    scene.destroy = function destroy() {\n      if (scene.matrix && scene.matrix.destroy) {\n        scene.matrix.destroy();\n      }\n      scene.matrixOptions = null;\n      scene.selectBatch = null;\n      scene.unselectBatch = null;\n      scene = null;\n    };\n  }\n\n  // In case if we have scene from the last calc - reset data\n  if (!scene.dirty) {\n    Lib.extendFlat(scene, reset);\n  }\n  return scene;\n};","map":{"version":3,"names":["Lib","require","module","exports","sceneUpdate","gd","trace","fullLayout","_fullLayout","uid","splomScenes","_splomScenes","reset","dirty","selectBatch","unselectBatch","first","matrix","scene","extendFlat","draw","length","destroy","matrixOptions"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/traces/splom/scene_update.js"],"sourcesContent":["'use strict';\n\nvar Lib = require('../../lib');\n\nmodule.exports = function sceneUpdate(gd, trace) {\n    var fullLayout = gd._fullLayout;\n    var uid = trace.uid;\n\n    // must place ref to 'scene' in fullLayout, so that:\n    // - it can be relinked properly on updates\n    // - it can be destroyed properly when needed\n    var splomScenes = fullLayout._splomScenes;\n    if(!splomScenes) splomScenes = fullLayout._splomScenes = {};\n\n    var reset = {\n        dirty: true,\n        selectBatch: [],\n        unselectBatch: []\n    };\n\n    var first = {\n        matrix: false,\n        selectBatch: [],\n        unselectBatch: []\n    };\n\n    var scene = splomScenes[trace.uid];\n\n    if(!scene) {\n        scene = splomScenes[uid] = Lib.extendFlat({}, reset, first);\n\n        scene.draw = function draw() {\n            if(scene.matrix && scene.matrix.draw) {\n                if(scene.selectBatch.length || scene.unselectBatch.length) {\n                    scene.matrix.draw(scene.unselectBatch, scene.selectBatch);\n                } else {\n                    scene.matrix.draw();\n                }\n            }\n\n            scene.dirty = false;\n        };\n\n        // remove scene resources\n        scene.destroy = function destroy() {\n            if(scene.matrix && scene.matrix.destroy) {\n                scene.matrix.destroy();\n            }\n            scene.matrixOptions = null;\n            scene.selectBatch = null;\n            scene.unselectBatch = null;\n            scene = null;\n        };\n    }\n\n    // In case if we have scene from the last calc - reset data\n    if(!scene.dirty) {\n        Lib.extendFlat(scene, reset);\n    }\n\n    return scene;\n};\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,GAAG,GAAGC,OAAO,CAAC,WAAW,CAAC;AAE9BC,MAAM,CAACC,OAAO,GAAG,SAASC,WAAWA,CAACC,EAAE,EAAEC,KAAK,EAAE;EAC7C,IAAIC,UAAU,GAAGF,EAAE,CAACG,WAAW;EAC/B,IAAIC,GAAG,GAAGH,KAAK,CAACG,GAAG;;EAEnB;EACA;EACA;EACA,IAAIC,WAAW,GAAGH,UAAU,CAACI,YAAY;EACzC,IAAG,CAACD,WAAW,EAAEA,WAAW,GAAGH,UAAU,CAACI,YAAY,GAAG,CAAC,CAAC;EAE3D,IAAIC,KAAK,GAAG;IACRC,KAAK,EAAE,IAAI;IACXC,WAAW,EAAE,EAAE;IACfC,aAAa,EAAE;EACnB,CAAC;EAED,IAAIC,KAAK,GAAG;IACRC,MAAM,EAAE,KAAK;IACbH,WAAW,EAAE,EAAE;IACfC,aAAa,EAAE;EACnB,CAAC;EAED,IAAIG,KAAK,GAAGR,WAAW,CAACJ,KAAK,CAACG,GAAG,CAAC;EAElC,IAAG,CAACS,KAAK,EAAE;IACPA,KAAK,GAAGR,WAAW,CAACD,GAAG,CAAC,GAAGT,GAAG,CAACmB,UAAU,CAAC,CAAC,CAAC,EAAEP,KAAK,EAAEI,KAAK,CAAC;IAE3DE,KAAK,CAACE,IAAI,GAAG,SAASA,IAAIA,CAAA,EAAG;MACzB,IAAGF,KAAK,CAACD,MAAM,IAAIC,KAAK,CAACD,MAAM,CAACG,IAAI,EAAE;QAClC,IAAGF,KAAK,CAACJ,WAAW,CAACO,MAAM,IAAIH,KAAK,CAACH,aAAa,CAACM,MAAM,EAAE;UACvDH,KAAK,CAACD,MAAM,CAACG,IAAI,CAACF,KAAK,CAACH,aAAa,EAAEG,KAAK,CAACJ,WAAW,CAAC;QAC7D,CAAC,MAAM;UACHI,KAAK,CAACD,MAAM,CAACG,IAAI,CAAC,CAAC;QACvB;MACJ;MAEAF,KAAK,CAACL,KAAK,GAAG,KAAK;IACvB,CAAC;;IAED;IACAK,KAAK,CAACI,OAAO,GAAG,SAASA,OAAOA,CAAA,EAAG;MAC/B,IAAGJ,KAAK,CAACD,MAAM,IAAIC,KAAK,CAACD,MAAM,CAACK,OAAO,EAAE;QACrCJ,KAAK,CAACD,MAAM,CAACK,OAAO,CAAC,CAAC;MAC1B;MACAJ,KAAK,CAACK,aAAa,GAAG,IAAI;MAC1BL,KAAK,CAACJ,WAAW,GAAG,IAAI;MACxBI,KAAK,CAACH,aAAa,GAAG,IAAI;MAC1BG,KAAK,GAAG,IAAI;IAChB,CAAC;EACL;;EAEA;EACA,IAAG,CAACA,KAAK,CAACL,KAAK,EAAE;IACbb,GAAG,CAACmB,UAAU,CAACD,KAAK,EAAEN,KAAK,CAAC;EAChC;EAEA,OAAOM,KAAK;AAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script"}