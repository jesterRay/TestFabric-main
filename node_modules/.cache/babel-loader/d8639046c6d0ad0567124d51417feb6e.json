{"ast":null,"code":"'use strict';\n\nvar Lib = require('../../lib');\nvar Color = require('../../components/color');\nvar Template = require('../../plot_api/plot_template');\nvar handleSubplotDefaults = require('../subplot_defaults');\nvar getSubplotData = require('../get_data').getSubplotData;\nvar handlePrefixSuffixDefaults = require('../cartesian/prefix_suffix_defaults');\nvar handleTickLabelDefaults = require('../cartesian/tick_label_defaults');\nvar handleLineGridDefaults = require('../cartesian/line_grid_defaults');\nvar setConvertCartesian = require('../cartesian/set_convert');\nvar layoutAttributes = require('./layout_attributes');\nvar constants = require('./constants');\nvar axisNames = constants.axisNames;\nvar makeImagDflt = memoize(function (realTickvals) {\n  // TODO: handle this case outside supply defaults step\n  if (Lib.isTypedArray(realTickvals)) realTickvals = Array.from(realTickvals);\n  return realTickvals.slice().reverse().map(function (x) {\n    return -x;\n  }).concat([0]).concat(realTickvals);\n}, String);\nfunction handleDefaults(contIn, contOut, coerce, opts) {\n  var bgColor = coerce('bgcolor');\n  opts.bgColor = Color.combine(bgColor, opts.paper_bgcolor);\n  var subplotData = getSubplotData(opts.fullData, constants.name, opts.id);\n  var layoutOut = opts.layoutOut;\n  var axName;\n  function coerceAxis(attr, dflt) {\n    return coerce(axName + '.' + attr, dflt);\n  }\n  for (var i = 0; i < axisNames.length; i++) {\n    axName = axisNames[i];\n    if (!Lib.isPlainObject(contIn[axName])) {\n      contIn[axName] = {};\n    }\n    var axIn = contIn[axName];\n    var axOut = Template.newContainer(contOut, axName);\n    axOut._id = axOut._name = axName;\n    axOut._attr = opts.id + '.' + axName;\n    axOut._traceIndices = subplotData.map(function (t) {\n      return t._expandedIndex;\n    });\n    var visible = coerceAxis('visible');\n    axOut.type = 'linear';\n    setConvertCartesian(axOut, layoutOut);\n    handlePrefixSuffixDefaults(axIn, axOut, coerceAxis, axOut.type);\n    if (visible) {\n      var isRealAxis = axName === 'realaxis';\n      if (isRealAxis) coerceAxis('side');\n      if (isRealAxis) {\n        coerceAxis('tickvals');\n      } else {\n        var imagTickvalsDflt = makeImagDflt(contOut.realaxis.tickvals || layoutAttributes.realaxis.tickvals.dflt);\n        coerceAxis('tickvals', imagTickvalsDflt);\n      }\n\n      // TODO: handle this case outside supply defaults step\n      if (Lib.isTypedArray(axOut.tickvals)) axOut.tickvals = Array.from(axOut.tickvals);\n      var dfltColor;\n      var dfltFontColor;\n      var dfltFontSize;\n      var dfltFontFamily;\n      var font = opts.font || {};\n      if (visible) {\n        dfltColor = coerceAxis('color');\n        dfltFontColor = dfltColor === axIn.color ? dfltColor : font.color;\n        dfltFontSize = font.size;\n        dfltFontFamily = font.family;\n      }\n      handleTickLabelDefaults(axIn, axOut, coerceAxis, axOut.type, {\n        noAutotickangles: true,\n        noTicklabelshift: true,\n        noTicklabelstandoff: true,\n        noTicklabelstep: true,\n        noAng: !isRealAxis,\n        noExp: true,\n        font: {\n          color: dfltFontColor,\n          size: dfltFontSize,\n          family: dfltFontFamily\n        }\n      });\n      Lib.coerce2(contIn, contOut, layoutAttributes, axName + '.ticklen');\n      Lib.coerce2(contIn, contOut, layoutAttributes, axName + '.tickwidth');\n      Lib.coerce2(contIn, contOut, layoutAttributes, axName + '.tickcolor', contOut.color);\n      var showTicks = coerceAxis('ticks');\n      if (!showTicks) {\n        delete contOut[axName].ticklen;\n        delete contOut[axName].tickwidth;\n        delete contOut[axName].tickcolor;\n      }\n      handleLineGridDefaults(axIn, axOut, coerceAxis, {\n        dfltColor: dfltColor,\n        bgColor: opts.bgColor,\n        // default grid color is darker here (60%, vs cartesian default ~91%)\n        // because the grid is not square so the eye needs heavier cues to follow\n        blend: 60,\n        showLine: true,\n        showGrid: true,\n        noZeroLine: true,\n        attributes: layoutAttributes[axName]\n      });\n      coerceAxis('layer');\n    }\n    coerceAxis('hoverformat');\n    delete axOut.type;\n    axOut._input = axIn;\n  }\n}\nmodule.exports = function supplyLayoutDefaults(layoutIn, layoutOut, fullData) {\n  handleSubplotDefaults(layoutIn, layoutOut, fullData, {\n    noUirevision: true,\n    type: constants.name,\n    attributes: layoutAttributes,\n    handleDefaults: handleDefaults,\n    font: layoutOut.font,\n    paper_bgcolor: layoutOut.paper_bgcolor,\n    fullData: fullData,\n    layoutOut: layoutOut\n  });\n};\nfunction memoize(fn, keyFn) {\n  var cache = {};\n  return function (val) {\n    var newKey = keyFn ? keyFn(val) : val;\n    if (newKey in cache) {\n      return cache[newKey];\n    }\n    var out = fn(val);\n    cache[newKey] = out;\n    return out;\n  };\n}","map":{"version":3,"names":["Lib","require","Color","Template","handleSubplotDefaults","getSubplotData","handlePrefixSuffixDefaults","handleTickLabelDefaults","handleLineGridDefaults","setConvertCartesian","layoutAttributes","constants","axisNames","makeImagDflt","memoize","realTickvals","isTypedArray","Array","from","slice","reverse","map","x","concat","String","handleDefaults","contIn","contOut","coerce","opts","bgColor","combine","paper_bgcolor","subplotData","fullData","name","id","layoutOut","axName","coerceAxis","attr","dflt","i","length","isPlainObject","axIn","axOut","newContainer","_id","_name","_attr","_traceIndices","t","_expandedIndex","visible","type","isRealAxis","imagTickvalsDflt","realaxis","tickvals","dfltColor","dfltFontColor","dfltFontSize","dfltFontFamily","font","color","size","family","noAutotickangles","noTicklabelshift","noTicklabelstandoff","noTicklabelstep","noAng","noExp","coerce2","showTicks","ticklen","tickwidth","tickcolor","blend","showLine","showGrid","noZeroLine","attributes","_input","module","exports","supplyLayoutDefaults","layoutIn","noUirevision","fn","keyFn","cache","val","newKey","out"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/plots/smith/layout_defaults.js"],"sourcesContent":["'use strict';\n\nvar Lib = require('../../lib');\nvar Color = require('../../components/color');\nvar Template = require('../../plot_api/plot_template');\n\nvar handleSubplotDefaults = require('../subplot_defaults');\nvar getSubplotData = require('../get_data').getSubplotData;\n\nvar handlePrefixSuffixDefaults = require('../cartesian/prefix_suffix_defaults');\nvar handleTickLabelDefaults = require('../cartesian/tick_label_defaults');\nvar handleLineGridDefaults = require('../cartesian/line_grid_defaults');\nvar setConvertCartesian = require('../cartesian/set_convert');\n\nvar layoutAttributes = require('./layout_attributes');\nvar constants = require('./constants');\nvar axisNames = constants.axisNames;\n\nvar makeImagDflt = memoize(function(realTickvals) {\n    // TODO: handle this case outside supply defaults step\n    if(Lib.isTypedArray(realTickvals)) realTickvals = Array.from(realTickvals);\n\n    return realTickvals.slice().reverse().map(function(x) { return -x; })\n        .concat([0])\n        .concat(realTickvals);\n}, String);\n\nfunction handleDefaults(contIn, contOut, coerce, opts) {\n    var bgColor = coerce('bgcolor');\n    opts.bgColor = Color.combine(bgColor, opts.paper_bgcolor);\n\n    var subplotData = getSubplotData(opts.fullData, constants.name, opts.id);\n    var layoutOut = opts.layoutOut;\n    var axName;\n\n    function coerceAxis(attr, dflt) {\n        return coerce(axName + '.' + attr, dflt);\n    }\n\n    for(var i = 0; i < axisNames.length; i++) {\n        axName = axisNames[i];\n\n        if(!Lib.isPlainObject(contIn[axName])) {\n            contIn[axName] = {};\n        }\n\n        var axIn = contIn[axName];\n        var axOut = Template.newContainer(contOut, axName);\n        axOut._id = axOut._name = axName;\n        axOut._attr = opts.id + '.' + axName;\n        axOut._traceIndices = subplotData.map(function(t) { return t._expandedIndex; });\n\n        var visible = coerceAxis('visible');\n\n        axOut.type = 'linear';\n        setConvertCartesian(axOut, layoutOut);\n\n        handlePrefixSuffixDefaults(axIn, axOut, coerceAxis, axOut.type);\n\n        if(visible) {\n            var isRealAxis = axName === 'realaxis';\n            if(isRealAxis) coerceAxis('side');\n\n            if(isRealAxis) {\n                coerceAxis('tickvals');\n            } else {\n                var imagTickvalsDflt = makeImagDflt(\n                    contOut.realaxis.tickvals ||\n                    layoutAttributes.realaxis.tickvals.dflt\n                );\n\n                coerceAxis('tickvals', imagTickvalsDflt);\n            }\n\n            // TODO: handle this case outside supply defaults step\n            if(Lib.isTypedArray(axOut.tickvals)) axOut.tickvals = Array.from(axOut.tickvals);\n\n            var dfltColor;\n            var dfltFontColor;\n            var dfltFontSize;\n            var dfltFontFamily;\n            var font = opts.font || {};\n\n            if(visible) {\n                dfltColor = coerceAxis('color');\n                dfltFontColor = (dfltColor === axIn.color) ? dfltColor : font.color;\n                dfltFontSize = font.size;\n                dfltFontFamily = font.family;\n            }\n\n            handleTickLabelDefaults(axIn, axOut, coerceAxis, axOut.type, {\n                noAutotickangles: true,\n                noTicklabelshift: true,\n                noTicklabelstandoff: true,\n                noTicklabelstep: true,\n                noAng: !isRealAxis,\n                noExp: true,\n                font: {\n                    color: dfltFontColor,\n                    size: dfltFontSize,\n                    family: dfltFontFamily\n                }\n            });\n\n            Lib.coerce2(contIn, contOut, layoutAttributes, axName + '.ticklen');\n            Lib.coerce2(contIn, contOut, layoutAttributes, axName + '.tickwidth');\n            Lib.coerce2(contIn, contOut, layoutAttributes, axName + '.tickcolor', contOut.color);\n            var showTicks = coerceAxis('ticks');\n            if(!showTicks) {\n                delete contOut[axName].ticklen;\n                delete contOut[axName].tickwidth;\n                delete contOut[axName].tickcolor;\n            }\n\n            handleLineGridDefaults(axIn, axOut, coerceAxis, {\n                dfltColor: dfltColor,\n                bgColor: opts.bgColor,\n                // default grid color is darker here (60%, vs cartesian default ~91%)\n                // because the grid is not square so the eye needs heavier cues to follow\n                blend: 60,\n                showLine: true,\n                showGrid: true,\n                noZeroLine: true,\n                attributes: layoutAttributes[axName]\n            });\n\n            coerceAxis('layer');\n        }\n\n        coerceAxis('hoverformat');\n\n        delete axOut.type;\n\n        axOut._input = axIn;\n    }\n}\n\nmodule.exports = function supplyLayoutDefaults(layoutIn, layoutOut, fullData) {\n    handleSubplotDefaults(layoutIn, layoutOut, fullData, {\n        noUirevision: true,\n        type: constants.name,\n        attributes: layoutAttributes,\n        handleDefaults: handleDefaults,\n        font: layoutOut.font,\n        paper_bgcolor: layoutOut.paper_bgcolor,\n        fullData: fullData,\n        layoutOut: layoutOut\n    });\n};\n\nfunction memoize(fn, keyFn) {\n    var cache = {};\n    return function(val) {\n        var newKey = keyFn ? keyFn(val) : val;\n        if(newKey in cache) { return cache[newKey]; }\n\n        var out = fn(val);\n        cache[newKey] = out;\n        return out;\n    };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}