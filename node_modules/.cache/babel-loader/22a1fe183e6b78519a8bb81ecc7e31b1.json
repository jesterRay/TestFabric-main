{"ast":null,"code":"'use strict';\n\nvar Registry = require('../registry');\nvar Lib = require('../lib');\nvar extendFlat = Lib.extendFlat;\nvar extendDeep = Lib.extendDeep;\n\n// Put default plotTile layouts here\nfunction cloneLayoutOverride(tileClass) {\n  var override;\n  switch (tileClass) {\n    case 'themes__thumb':\n      override = {\n        autosize: true,\n        width: 150,\n        height: 150,\n        title: {\n          text: ''\n        },\n        showlegend: false,\n        margin: {\n          l: 5,\n          r: 5,\n          t: 5,\n          b: 5,\n          pad: 0\n        },\n        annotations: []\n      };\n      break;\n    case 'thumbnail':\n      override = {\n        title: {\n          text: ''\n        },\n        hidesources: true,\n        showlegend: false,\n        borderwidth: 0,\n        bordercolor: '',\n        margin: {\n          l: 1,\n          r: 1,\n          t: 1,\n          b: 1,\n          pad: 0\n        },\n        annotations: []\n      };\n      break;\n    default:\n      override = {};\n  }\n  return override;\n}\nfunction keyIsAxis(keyName) {\n  var types = ['xaxis', 'yaxis', 'zaxis'];\n  return types.indexOf(keyName.slice(0, 5)) > -1;\n}\nmodule.exports = function clonePlot(graphObj, options) {\n  var i;\n  var oldData = graphObj.data;\n  var oldLayout = graphObj.layout;\n  var newData = extendDeep([], oldData);\n  var newLayout = extendDeep({}, oldLayout, cloneLayoutOverride(options.tileClass));\n  var context = graphObj._context || {};\n  if (options.width) newLayout.width = options.width;\n  if (options.height) newLayout.height = options.height;\n  if (options.tileClass === 'thumbnail' || options.tileClass === 'themes__thumb') {\n    // kill annotations\n    newLayout.annotations = [];\n    var keys = Object.keys(newLayout);\n    for (i = 0; i < keys.length; i++) {\n      if (keyIsAxis(keys[i])) {\n        newLayout[keys[i]].title = {\n          text: ''\n        };\n      }\n    }\n\n    // kill colorbar and pie labels\n    for (i = 0; i < newData.length; i++) {\n      var trace = newData[i];\n      trace.showscale = false;\n      if (trace.marker) trace.marker.showscale = false;\n      if (Registry.traceIs(trace, 'pie-like')) trace.textposition = 'none';\n    }\n  }\n  if (Array.isArray(options.annotations)) {\n    for (i = 0; i < options.annotations.length; i++) {\n      newLayout.annotations.push(options.annotations[i]);\n    }\n  }\n\n  // TODO: does this scene modification really belong here?\n  // If we still need it, can it move into the gl3d module?\n  var sceneIds = Object.keys(newLayout).filter(function (key) {\n    return key.match(/^scene\\d*$/);\n  });\n  if (sceneIds.length) {\n    var axesImageOverride = {};\n    if (options.tileClass === 'thumbnail') {\n      axesImageOverride = {\n        title: {\n          text: ''\n        },\n        showaxeslabels: false,\n        showticklabels: false,\n        linetickenable: false\n      };\n    }\n    for (i = 0; i < sceneIds.length; i++) {\n      var scene = newLayout[sceneIds[i]];\n      if (!scene.xaxis) {\n        scene.xaxis = {};\n      }\n      if (!scene.yaxis) {\n        scene.yaxis = {};\n      }\n      if (!scene.zaxis) {\n        scene.zaxis = {};\n      }\n      extendFlat(scene.xaxis, axesImageOverride);\n      extendFlat(scene.yaxis, axesImageOverride);\n      extendFlat(scene.zaxis, axesImageOverride);\n\n      // TODO what does this do?\n      scene._scene = null;\n    }\n  }\n  var gd = document.createElement('div');\n  if (options.tileClass) gd.className = options.tileClass;\n  var plotTile = {\n    gd: gd,\n    td: gd,\n    // for external (image server) compatibility\n    layout: newLayout,\n    data: newData,\n    config: {\n      staticPlot: options.staticPlot === undefined ? true : options.staticPlot,\n      plotGlPixelRatio: options.plotGlPixelRatio === undefined ? 2 : options.plotGlPixelRatio,\n      displaylogo: options.displaylogo || false,\n      showLink: options.showLink || false,\n      showTips: options.showTips || false,\n      mapboxAccessToken: context.mapboxAccessToken\n    }\n  };\n  if (options.setBackground !== 'transparent') {\n    plotTile.config.setBackground = options.setBackground || 'opaque';\n  }\n\n  // attaching the default Layout the gd, so you can grab it later\n  plotTile.gd.defaultLayout = cloneLayoutOverride(options.tileClass);\n  return plotTile;\n};","map":{"version":3,"names":["Registry","require","Lib","extendFlat","extendDeep","cloneLayoutOverride","tileClass","override","autosize","width","height","title","text","showlegend","margin","l","r","t","b","pad","annotations","hidesources","borderwidth","bordercolor","keyIsAxis","keyName","types","indexOf","slice","module","exports","clonePlot","graphObj","options","i","oldData","data","oldLayout","layout","newData","newLayout","context","_context","keys","Object","length","trace","showscale","marker","traceIs","textposition","Array","isArray","push","sceneIds","filter","key","match","axesImageOverride","showaxeslabels","showticklabels","linetickenable","scene","xaxis","yaxis","zaxis","_scene","gd","document","createElement","className","plotTile","td","config","staticPlot","undefined","plotGlPixelRatio","displaylogo","showLink","showTips","mapboxAccessToken","setBackground","defaultLayout"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/snapshot/cloneplot.js"],"sourcesContent":["'use strict';\n\nvar Registry = require('../registry');\nvar Lib = require('../lib');\n\nvar extendFlat = Lib.extendFlat;\nvar extendDeep = Lib.extendDeep;\n\n// Put default plotTile layouts here\nfunction cloneLayoutOverride(tileClass) {\n    var override;\n\n    switch(tileClass) {\n        case 'themes__thumb':\n            override = {\n                autosize: true,\n                width: 150,\n                height: 150,\n                title: {text: ''},\n                showlegend: false,\n                margin: {l: 5, r: 5, t: 5, b: 5, pad: 0},\n                annotations: []\n            };\n            break;\n\n        case 'thumbnail':\n            override = {\n                title: {text: ''},\n                hidesources: true,\n                showlegend: false,\n                borderwidth: 0,\n                bordercolor: '',\n                margin: {l: 1, r: 1, t: 1, b: 1, pad: 0},\n                annotations: []\n            };\n            break;\n\n        default:\n            override = {};\n    }\n\n\n    return override;\n}\n\nfunction keyIsAxis(keyName) {\n    var types = ['xaxis', 'yaxis', 'zaxis'];\n    return (types.indexOf(keyName.slice(0, 5)) > -1);\n}\n\n\nmodule.exports = function clonePlot(graphObj, options) {\n    var i;\n    var oldData = graphObj.data;\n    var oldLayout = graphObj.layout;\n    var newData = extendDeep([], oldData);\n    var newLayout = extendDeep({}, oldLayout, cloneLayoutOverride(options.tileClass));\n    var context = graphObj._context || {};\n\n    if(options.width) newLayout.width = options.width;\n    if(options.height) newLayout.height = options.height;\n\n    if(options.tileClass === 'thumbnail' || options.tileClass === 'themes__thumb') {\n        // kill annotations\n        newLayout.annotations = [];\n        var keys = Object.keys(newLayout);\n\n        for(i = 0; i < keys.length; i++) {\n            if(keyIsAxis(keys[i])) {\n                newLayout[keys[i]].title = {text: ''};\n            }\n        }\n\n        // kill colorbar and pie labels\n        for(i = 0; i < newData.length; i++) {\n            var trace = newData[i];\n            trace.showscale = false;\n            if(trace.marker) trace.marker.showscale = false;\n            if(Registry.traceIs(trace, 'pie-like')) trace.textposition = 'none';\n        }\n    }\n\n    if(Array.isArray(options.annotations)) {\n        for(i = 0; i < options.annotations.length; i++) {\n            newLayout.annotations.push(options.annotations[i]);\n        }\n    }\n\n    // TODO: does this scene modification really belong here?\n    // If we still need it, can it move into the gl3d module?\n    var sceneIds = Object.keys(newLayout).filter(function(key) {\n        return key.match(/^scene\\d*$/);\n    });\n    if(sceneIds.length) {\n        var axesImageOverride = {};\n        if(options.tileClass === 'thumbnail') {\n            axesImageOverride = {\n                title: {text: ''},\n                showaxeslabels: false,\n                showticklabels: false,\n                linetickenable: false\n            };\n        }\n        for(i = 0; i < sceneIds.length; i++) {\n            var scene = newLayout[sceneIds[i]];\n\n            if(!scene.xaxis) {\n                scene.xaxis = {};\n            }\n\n            if(!scene.yaxis) {\n                scene.yaxis = {};\n            }\n\n            if(!scene.zaxis) {\n                scene.zaxis = {};\n            }\n\n            extendFlat(scene.xaxis, axesImageOverride);\n            extendFlat(scene.yaxis, axesImageOverride);\n            extendFlat(scene.zaxis, axesImageOverride);\n\n            // TODO what does this do?\n            scene._scene = null;\n        }\n    }\n\n    var gd = document.createElement('div');\n    if(options.tileClass) gd.className = options.tileClass;\n\n    var plotTile = {\n        gd: gd,\n        td: gd, // for external (image server) compatibility\n        layout: newLayout,\n        data: newData,\n        config: {\n            staticPlot: (options.staticPlot === undefined) ?\n                true :\n                options.staticPlot,\n            plotGlPixelRatio: (options.plotGlPixelRatio === undefined) ?\n                2 :\n                options.plotGlPixelRatio,\n            displaylogo: options.displaylogo || false,\n            showLink: options.showLink || false,\n            showTips: options.showTips || false,\n            mapboxAccessToken: context.mapboxAccessToken\n        }\n    };\n\n    if(options.setBackground !== 'transparent') {\n        plotTile.config.setBackground = options.setBackground || 'opaque';\n    }\n\n    // attaching the default Layout the gd, so you can grab it later\n    plotTile.gd.defaultLayout = cloneLayoutOverride(options.tileClass);\n\n    return plotTile;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}