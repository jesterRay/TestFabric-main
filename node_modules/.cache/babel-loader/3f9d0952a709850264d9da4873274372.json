{"ast":null,"code":"'use strict';\n\nvar helpers = require('./helpers');\nvar calcHover = require('../scattergl/hover').calcHover;\nvar getFromId = require('../../plots/cartesian/axes').getFromId;\nvar extendFlat = require('../../lib/extend').extendFlat;\nfunction hoverPoints(pointData, xval, yval, hovermode, opts) {\n  if (!opts) opts = {};\n  var hovermodeHasX = (hovermode || '').charAt(0) === 'x';\n  var hovermodeHasY = (hovermode || '').charAt(0) === 'y';\n  var points = _hoverPoints(pointData, xval, yval);\n  if ((hovermodeHasX || hovermodeHasY) && opts.hoversubplots === 'axis' && points[0]) {\n    var subplotsWith = (hovermodeHasX ? pointData.xa : pointData.ya)._subplotsWith;\n    var gd = opts.gd;\n    var _pointData = extendFlat({}, pointData);\n    for (var i = 0; i < subplotsWith.length; i++) {\n      var spId = subplotsWith[i];\n\n      // do not reselect on the initial subplot\n      if (spId === pointData.xa._id + pointData.ya._id) continue;\n      if (hovermodeHasY) {\n        _pointData.xa = getFromId(gd, spId, 'x');\n      } else {\n        // hovermodeHasX\n        _pointData.ya = getFromId(gd, spId, 'y');\n      }\n      var axisHoversubplots = hovermodeHasX || hovermodeHasY;\n      var newPoints = _hoverPoints(_pointData, xval, yval, axisHoversubplots);\n      points = points.concat(newPoints);\n    }\n  }\n  return points;\n}\nfunction _hoverPoints(pointData, xval, yval, axisHoversubplots) {\n  var cd = pointData.cd;\n  var trace = cd[0].trace;\n  var scene = pointData.scene;\n  var cdata = scene.matrixOptions.cdata;\n  var xa = pointData.xa;\n  var ya = pointData.ya;\n  var xpx = xa.c2p(xval);\n  var ypx = ya.c2p(yval);\n  var maxDistance = pointData.distance;\n  var xi = helpers.getDimIndex(trace, xa);\n  var yi = helpers.getDimIndex(trace, ya);\n  if (xi === false || yi === false) return [pointData];\n  var x = cdata[xi];\n  var y = cdata[yi];\n  var id, dxy;\n  var minDist = maxDistance;\n  for (var i = 0; i < x.length; i++) {\n    if (axisHoversubplots && i !== pointData.index) continue;\n    var ptx = x[i];\n    var pty = y[i];\n    var dx = xa.c2p(ptx) - xpx;\n    var dy = ya.c2p(pty) - ypx;\n    var dist = Math.sqrt(dx * dx + dy * dy);\n    if (axisHoversubplots || dist < minDist) {\n      minDist = dxy = dist;\n      id = i;\n    }\n  }\n  pointData.index = id;\n  pointData.distance = minDist;\n  pointData.dxy = dxy;\n  if (id === undefined) return [pointData];\n  return [calcHover(pointData, x, y, trace)];\n}\nmodule.exports = {\n  hoverPoints: hoverPoints\n};","map":{"version":3,"names":["helpers","require","calcHover","getFromId","extendFlat","hoverPoints","pointData","xval","yval","hovermode","opts","hovermodeHasX","charAt","hovermodeHasY","points","_hoverPoints","hoversubplots","subplotsWith","xa","ya","_subplotsWith","gd","_pointData","i","length","spId","_id","axisHoversubplots","newPoints","concat","cd","trace","scene","cdata","matrixOptions","xpx","c2p","ypx","maxDistance","distance","xi","getDimIndex","yi","x","y","id","dxy","minDist","index","ptx","pty","dx","dy","dist","Math","sqrt","undefined","module","exports"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/traces/splom/hover.js"],"sourcesContent":["'use strict';\n\nvar helpers = require('./helpers');\nvar calcHover = require('../scattergl/hover').calcHover;\nvar getFromId = require('../../plots/cartesian/axes').getFromId;\nvar extendFlat = require('../../lib/extend').extendFlat;\n\nfunction hoverPoints(pointData, xval, yval, hovermode, opts) {\n    if(!opts) opts = {};\n\n    var hovermodeHasX = (hovermode || '').charAt(0) === 'x';\n    var hovermodeHasY = (hovermode || '').charAt(0) === 'y';\n\n    var points = _hoverPoints(pointData, xval, yval);\n\n    if((hovermodeHasX || hovermodeHasY) && opts.hoversubplots === 'axis' && points[0]) {\n        var subplotsWith = (\n            hovermodeHasX ?\n            pointData.xa :\n            pointData.ya\n        )._subplotsWith;\n\n        var gd = opts.gd;\n\n        var _pointData = extendFlat({}, pointData);\n\n        for(var i = 0; i < subplotsWith.length; i++) {\n            var spId = subplotsWith[i];\n\n            // do not reselect on the initial subplot\n            if(spId === (pointData.xa._id + pointData.ya._id)) continue;\n\n            if(hovermodeHasY) {\n                _pointData.xa = getFromId(gd, spId, 'x');\n            } else { // hovermodeHasX\n                _pointData.ya = getFromId(gd, spId, 'y');\n            }\n\n            var axisHoversubplots = hovermodeHasX || hovermodeHasY;\n            var newPoints = _hoverPoints(_pointData, xval, yval, axisHoversubplots);\n\n            points = points.concat(newPoints);\n        }\n    }\n\n    return points;\n}\n\nfunction _hoverPoints(pointData, xval, yval, axisHoversubplots) {\n    var cd = pointData.cd;\n    var trace = cd[0].trace;\n    var scene = pointData.scene;\n    var cdata = scene.matrixOptions.cdata;\n    var xa = pointData.xa;\n    var ya = pointData.ya;\n    var xpx = xa.c2p(xval);\n    var ypx = ya.c2p(yval);\n    var maxDistance = pointData.distance;\n\n    var xi = helpers.getDimIndex(trace, xa);\n    var yi = helpers.getDimIndex(trace, ya);\n    if(xi === false || yi === false) return [pointData];\n\n    var x = cdata[xi];\n    var y = cdata[yi];\n\n    var id, dxy;\n    var minDist = maxDistance;\n\n    for(var i = 0; i < x.length; i++) {\n        if(axisHoversubplots && i !== pointData.index) continue;\n\n        var ptx = x[i];\n        var pty = y[i];\n        var dx = xa.c2p(ptx) - xpx;\n        var dy = ya.c2p(pty) - ypx;\n        var dist = Math.sqrt(dx * dx + dy * dy);\n\n        if(axisHoversubplots || dist < minDist) {\n            minDist = dxy = dist;\n            id = i;\n        }\n    }\n\n    pointData.index = id;\n    pointData.distance = minDist;\n    pointData.dxy = dxy;\n\n    if(id === undefined) return [pointData];\n\n    return [calcHover(pointData, x, y, trace)];\n}\n\nmodule.exports = {\n    hoverPoints: hoverPoints\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}