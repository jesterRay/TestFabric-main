{"ast":null,"code":"'use strict';\n\nvar d3 = require('@plotly/d3');\nvar Lib = require('../../lib');\nfunction resizeText(gd, gTrace, traceType) {\n  var fullLayout = gd._fullLayout;\n  var minSize = fullLayout['_' + traceType + 'Text_minsize'];\n  if (minSize) {\n    var shouldHide = fullLayout.uniformtext.mode === 'hide';\n    var selector;\n    switch (traceType) {\n      case 'funnelarea':\n      case 'pie':\n      case 'sunburst':\n        selector = 'g.slice';\n        break;\n      case 'treemap':\n      case 'icicle':\n        selector = 'g.slice, g.pathbar';\n        break;\n      default:\n        selector = 'g.points > g.point';\n    }\n    gTrace.selectAll(selector).each(function (d) {\n      var transform = d.transform;\n      if (transform) {\n        transform.scale = shouldHide && transform.hide ? 0 : minSize / transform.fontSize;\n        var el = d3.select(this).select('text');\n        Lib.setTransormAndDisplay(el, transform);\n      }\n    });\n  }\n}\nfunction recordMinTextSize(traceType,\n// in\ntransform,\n// inout\nfullLayout // inout\n) {\n  if (fullLayout.uniformtext.mode) {\n    var minKey = getMinKey(traceType);\n    var minSize = fullLayout.uniformtext.minsize;\n    var size = transform.scale * transform.fontSize;\n    transform.hide = size < minSize;\n    fullLayout[minKey] = fullLayout[minKey] || Infinity;\n    if (!transform.hide) {\n      fullLayout[minKey] = Math.min(fullLayout[minKey], Math.max(size, minSize));\n    }\n  }\n}\nfunction clearMinTextSize(traceType,\n// in\nfullLayout // inout\n) {\n  var minKey = getMinKey(traceType);\n  fullLayout[minKey] = undefined;\n}\nfunction getMinKey(traceType) {\n  return '_' + traceType + 'Text_minsize';\n}\nmodule.exports = {\n  recordMinTextSize: recordMinTextSize,\n  clearMinTextSize: clearMinTextSize,\n  resizeText: resizeText\n};","map":{"version":3,"names":["d3","require","Lib","resizeText","gd","gTrace","traceType","fullLayout","_fullLayout","minSize","shouldHide","uniformtext","mode","selector","selectAll","each","d","transform","scale","hide","fontSize","el","select","setTransormAndDisplay","recordMinTextSize","minKey","getMinKey","minsize","size","Infinity","Math","min","max","clearMinTextSize","undefined","module","exports"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/traces/bar/uniform_text.js"],"sourcesContent":["'use strict';\n\nvar d3 = require('@plotly/d3');\nvar Lib = require('../../lib');\n\nfunction resizeText(gd, gTrace, traceType) {\n    var fullLayout = gd._fullLayout;\n    var minSize = fullLayout['_' + traceType + 'Text_minsize'];\n    if(minSize) {\n        var shouldHide = fullLayout.uniformtext.mode === 'hide';\n\n        var selector;\n        switch(traceType) {\n            case 'funnelarea' :\n            case 'pie' :\n            case 'sunburst' :\n                selector = 'g.slice';\n                break;\n            case 'treemap' :\n            case 'icicle' :\n                selector = 'g.slice, g.pathbar';\n                break;\n            default :\n                selector = 'g.points > g.point';\n        }\n\n        gTrace.selectAll(selector).each(function(d) {\n            var transform = d.transform;\n            if(transform) {\n                transform.scale = (shouldHide && transform.hide) ? 0 : minSize / transform.fontSize;\n\n                var el = d3.select(this).select('text');\n                Lib.setTransormAndDisplay(el, transform);\n            }\n        });\n    }\n}\n\nfunction recordMinTextSize(\n    traceType, // in\n    transform, // inout\n    fullLayout // inout\n) {\n    if(fullLayout.uniformtext.mode) {\n        var minKey = getMinKey(traceType);\n        var minSize = fullLayout.uniformtext.minsize;\n        var size = transform.scale * transform.fontSize;\n\n        transform.hide = size < minSize;\n\n        fullLayout[minKey] = fullLayout[minKey] || Infinity;\n        if(!transform.hide) {\n            fullLayout[minKey] = Math.min(\n                fullLayout[minKey],\n                Math.max(size, minSize)\n            );\n        }\n    }\n}\n\nfunction clearMinTextSize(\n    traceType, // in\n    fullLayout // inout\n) {\n    var minKey = getMinKey(traceType);\n    fullLayout[minKey] = undefined;\n}\n\nfunction getMinKey(traceType) {\n    return '_' + traceType + 'Text_minsize';\n}\n\nmodule.exports = {\n    recordMinTextSize: recordMinTextSize,\n    clearMinTextSize: clearMinTextSize,\n    resizeText: resizeText\n};\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,EAAE,GAAGC,OAAO,CAAC,YAAY,CAAC;AAC9B,IAAIC,GAAG,GAAGD,OAAO,CAAC,WAAW,CAAC;AAE9B,SAASE,UAAUA,CAACC,EAAE,EAAEC,MAAM,EAAEC,SAAS,EAAE;EACvC,IAAIC,UAAU,GAAGH,EAAE,CAACI,WAAW;EAC/B,IAAIC,OAAO,GAAGF,UAAU,CAAC,GAAG,GAAGD,SAAS,GAAG,cAAc,CAAC;EAC1D,IAAGG,OAAO,EAAE;IACR,IAAIC,UAAU,GAAGH,UAAU,CAACI,WAAW,CAACC,IAAI,KAAK,MAAM;IAEvD,IAAIC,QAAQ;IACZ,QAAOP,SAAS;MACZ,KAAK,YAAY;MACjB,KAAK,KAAK;MACV,KAAK,UAAU;QACXO,QAAQ,GAAG,SAAS;QACpB;MACJ,KAAK,SAAS;MACd,KAAK,QAAQ;QACTA,QAAQ,GAAG,oBAAoB;QAC/B;MACJ;QACIA,QAAQ,GAAG,oBAAoB;IACvC;IAEAR,MAAM,CAACS,SAAS,CAACD,QAAQ,CAAC,CAACE,IAAI,CAAC,UAASC,CAAC,EAAE;MACxC,IAAIC,SAAS,GAAGD,CAAC,CAACC,SAAS;MAC3B,IAAGA,SAAS,EAAE;QACVA,SAAS,CAACC,KAAK,GAAIR,UAAU,IAAIO,SAAS,CAACE,IAAI,GAAI,CAAC,GAAGV,OAAO,GAAGQ,SAAS,CAACG,QAAQ;QAEnF,IAAIC,EAAE,GAAGrB,EAAE,CAACsB,MAAM,CAAC,IAAI,CAAC,CAACA,MAAM,CAAC,MAAM,CAAC;QACvCpB,GAAG,CAACqB,qBAAqB,CAACF,EAAE,EAAEJ,SAAS,CAAC;MAC5C;IACJ,CAAC,CAAC;EACN;AACJ;AAEA,SAASO,iBAAiBA,CACtBlB,SAAS;AAAE;AACXW,SAAS;AAAE;AACXV,UAAU,CAAC;AAAA,EACb;EACE,IAAGA,UAAU,CAACI,WAAW,CAACC,IAAI,EAAE;IAC5B,IAAIa,MAAM,GAAGC,SAAS,CAACpB,SAAS,CAAC;IACjC,IAAIG,OAAO,GAAGF,UAAU,CAACI,WAAW,CAACgB,OAAO;IAC5C,IAAIC,IAAI,GAAGX,SAAS,CAACC,KAAK,GAAGD,SAAS,CAACG,QAAQ;IAE/CH,SAAS,CAACE,IAAI,GAAGS,IAAI,GAAGnB,OAAO;IAE/BF,UAAU,CAACkB,MAAM,CAAC,GAAGlB,UAAU,CAACkB,MAAM,CAAC,IAAII,QAAQ;IACnD,IAAG,CAACZ,SAAS,CAACE,IAAI,EAAE;MAChBZ,UAAU,CAACkB,MAAM,CAAC,GAAGK,IAAI,CAACC,GAAG,CACzBxB,UAAU,CAACkB,MAAM,CAAC,EAClBK,IAAI,CAACE,GAAG,CAACJ,IAAI,EAAEnB,OAAO,CAC1B,CAAC;IACL;EACJ;AACJ;AAEA,SAASwB,gBAAgBA,CACrB3B,SAAS;AAAE;AACXC,UAAU,CAAC;AAAA,EACb;EACE,IAAIkB,MAAM,GAAGC,SAAS,CAACpB,SAAS,CAAC;EACjCC,UAAU,CAACkB,MAAM,CAAC,GAAGS,SAAS;AAClC;AAEA,SAASR,SAASA,CAACpB,SAAS,EAAE;EAC1B,OAAO,GAAG,GAAGA,SAAS,GAAG,cAAc;AAC3C;AAEA6B,MAAM,CAACC,OAAO,GAAG;EACbZ,iBAAiB,EAAEA,iBAAiB;EACpCS,gBAAgB,EAAEA,gBAAgB;EAClC9B,UAAU,EAAEA;AAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script"}