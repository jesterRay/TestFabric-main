{"ast":null,"code":"'use strict';\n\nvar Fx = require('../../components/fx');\nvar BADNUM = require('../../constants/numerical').BADNUM;\nvar getTraceColor = require('../scatter/get_trace_color');\nvar fillText = require('../../lib').fillText;\nvar attributes = require('./attributes');\nmodule.exports = function hoverPoints(pointData, xval, yval) {\n  var cd = pointData.cd;\n  var trace = cd[0].trace;\n  var xa = pointData.xa;\n  var ya = pointData.ya;\n  var geo = pointData.subplot;\n  var isLonLatOverEdges = geo.projection.isLonLatOverEdges;\n  var project = geo.project;\n  function distFn(d) {\n    var lonlat = d.lonlat;\n    if (lonlat[0] === BADNUM) return Infinity;\n    if (isLonLatOverEdges(lonlat)) return Infinity;\n    var pt = project(lonlat);\n    var px = project([xval, yval]);\n    var dx = Math.abs(pt[0] - px[0]);\n    var dy = Math.abs(pt[1] - px[1]);\n    var rad = Math.max(3, d.mrc || 0);\n\n    // N.B. d.mrc is the calculated marker radius\n    // which is only set for trace with 'markers' mode.\n\n    return Math.max(Math.sqrt(dx * dx + dy * dy) - rad, 1 - 3 / rad);\n  }\n  Fx.getClosest(cd, distFn, pointData);\n\n  // skip the rest (for this trace) if we didn't find a close point\n  if (pointData.index === false) return;\n  var di = cd[pointData.index];\n  var lonlat = di.lonlat;\n  var pos = [xa.c2p(lonlat), ya.c2p(lonlat)];\n  var rad = di.mrc || 1;\n  pointData.x0 = pos[0] - rad;\n  pointData.x1 = pos[0] + rad;\n  pointData.y0 = pos[1] - rad;\n  pointData.y1 = pos[1] + rad;\n  pointData.loc = di.loc;\n  pointData.lon = lonlat[0];\n  pointData.lat = lonlat[1];\n  var fullLayout = {};\n  fullLayout[trace.geo] = {\n    _subplot: geo\n  };\n  var labels = trace._module.formatLabels(di, trace, fullLayout);\n  pointData.lonLabel = labels.lonLabel;\n  pointData.latLabel = labels.latLabel;\n  pointData.color = getTraceColor(trace, di);\n  pointData.extraText = getExtraText(trace, di, pointData, cd[0].t.labels);\n  pointData.hovertemplate = trace.hovertemplate;\n  return [pointData];\n};\nfunction getExtraText(trace, pt, pointData, labels) {\n  if (trace.hovertemplate) return;\n  var hoverinfo = pt.hi || trace.hoverinfo;\n  var parts = hoverinfo === 'all' ? attributes.hoverinfo.flags : hoverinfo.split('+');\n  var hasLocation = parts.indexOf('location') !== -1 && Array.isArray(trace.locations);\n  var hasLon = parts.indexOf('lon') !== -1;\n  var hasLat = parts.indexOf('lat') !== -1;\n  var hasText = parts.indexOf('text') !== -1;\n  var text = [];\n  function format(val) {\n    return val + '\\u00B0';\n  }\n  if (hasLocation) {\n    text.push(pt.loc);\n  } else if (hasLon && hasLat) {\n    text.push('(' + format(pointData.latLabel) + ', ' + format(pointData.lonLabel) + ')');\n  } else if (hasLon) {\n    text.push(labels.lon + format(pointData.lonLabel));\n  } else if (hasLat) {\n    text.push(labels.lat + format(pointData.latLabel));\n  }\n  if (hasText) {\n    fillText(pt, trace, text);\n  }\n  return text.join('<br>');\n}","map":{"version":3,"names":["Fx","require","BADNUM","getTraceColor","fillText","attributes","module","exports","hoverPoints","pointData","xval","yval","cd","trace","xa","ya","geo","subplot","isLonLatOverEdges","projection","project","distFn","d","lonlat","Infinity","pt","px","dx","Math","abs","dy","rad","max","mrc","sqrt","getClosest","index","di","pos","c2p","x0","x1","y0","y1","loc","lon","lat","fullLayout","_subplot","labels","_module","formatLabels","lonLabel","latLabel","color","extraText","getExtraText","t","hovertemplate","hoverinfo","hi","parts","flags","split","hasLocation","indexOf","Array","isArray","locations","hasLon","hasLat","hasText","text","format","val","push","join"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/traces/scattergeo/hover.js"],"sourcesContent":["'use strict';\n\nvar Fx = require('../../components/fx');\nvar BADNUM = require('../../constants/numerical').BADNUM;\n\nvar getTraceColor = require('../scatter/get_trace_color');\nvar fillText = require('../../lib').fillText;\nvar attributes = require('./attributes');\n\nmodule.exports = function hoverPoints(pointData, xval, yval) {\n    var cd = pointData.cd;\n    var trace = cd[0].trace;\n    var xa = pointData.xa;\n    var ya = pointData.ya;\n    var geo = pointData.subplot;\n\n    var isLonLatOverEdges = geo.projection.isLonLatOverEdges;\n    var project = geo.project;\n\n    function distFn(d) {\n        var lonlat = d.lonlat;\n\n        if(lonlat[0] === BADNUM) return Infinity;\n        if(isLonLatOverEdges(lonlat)) return Infinity;\n\n        var pt = project(lonlat);\n        var px = project([xval, yval]);\n        var dx = Math.abs(pt[0] - px[0]);\n        var dy = Math.abs(pt[1] - px[1]);\n        var rad = Math.max(3, d.mrc || 0);\n\n        // N.B. d.mrc is the calculated marker radius\n        // which is only set for trace with 'markers' mode.\n\n        return Math.max(Math.sqrt(dx * dx + dy * dy) - rad, 1 - 3 / rad);\n    }\n\n    Fx.getClosest(cd, distFn, pointData);\n\n    // skip the rest (for this trace) if we didn't find a close point\n    if(pointData.index === false) return;\n\n    var di = cd[pointData.index];\n    var lonlat = di.lonlat;\n    var pos = [xa.c2p(lonlat), ya.c2p(lonlat)];\n    var rad = di.mrc || 1;\n\n    pointData.x0 = pos[0] - rad;\n    pointData.x1 = pos[0] + rad;\n    pointData.y0 = pos[1] - rad;\n    pointData.y1 = pos[1] + rad;\n\n    pointData.loc = di.loc;\n    pointData.lon = lonlat[0];\n    pointData.lat = lonlat[1];\n\n    var fullLayout = {};\n    fullLayout[trace.geo] = {_subplot: geo};\n    var labels = trace._module.formatLabels(di, trace, fullLayout);\n    pointData.lonLabel = labels.lonLabel;\n    pointData.latLabel = labels.latLabel;\n\n    pointData.color = getTraceColor(trace, di);\n    pointData.extraText = getExtraText(trace, di, pointData, cd[0].t.labels);\n    pointData.hovertemplate = trace.hovertemplate;\n\n    return [pointData];\n};\n\nfunction getExtraText(trace, pt, pointData, labels) {\n    if(trace.hovertemplate) return;\n\n    var hoverinfo = pt.hi || trace.hoverinfo;\n\n    var parts = hoverinfo === 'all' ?\n        attributes.hoverinfo.flags :\n        hoverinfo.split('+');\n\n    var hasLocation = parts.indexOf('location') !== -1 && Array.isArray(trace.locations);\n    var hasLon = (parts.indexOf('lon') !== -1);\n    var hasLat = (parts.indexOf('lat') !== -1);\n    var hasText = (parts.indexOf('text') !== -1);\n    var text = [];\n\n    function format(val) { return val + '\\u00B0'; }\n\n    if(hasLocation) {\n        text.push(pt.loc);\n    } else if(hasLon && hasLat) {\n        text.push('(' + format(pointData.latLabel) + ', ' + format(pointData.lonLabel) + ')');\n    } else if(hasLon) {\n        text.push(labels.lon + format(pointData.lonLabel));\n    } else if(hasLat) {\n        text.push(labels.lat + format(pointData.latLabel));\n    }\n\n    if(hasText) {\n        fillText(pt, trace, text);\n    }\n\n    return text.join('<br>');\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}