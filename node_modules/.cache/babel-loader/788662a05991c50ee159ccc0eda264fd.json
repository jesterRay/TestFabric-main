{"ast":null,"code":"'use strict';\n\nvar d3 = require('@plotly/d3');\nvar loggers = require('./loggers');\nvar matrix = require('./matrix');\nvar mat4X4 = require('gl-mat4');\n\n/**\n * Allow referencing a graph DOM element either directly\n * or by its id string\n *\n * @param {HTMLDivElement|string} gd: a graph element or its id\n *\n * @returns {HTMLDivElement} the DOM element of the graph\n */\nfunction getGraphDiv(gd) {\n  var gdElement;\n  if (typeof gd === 'string') {\n    gdElement = document.getElementById(gd);\n    if (gdElement === null) {\n      throw new Error('No DOM element with id \\'' + gd + '\\' exists on the page.');\n    }\n    return gdElement;\n  } else if (gd === null || gd === undefined) {\n    throw new Error('DOM element provided is null or undefined');\n  }\n\n  // otherwise assume that gd is a DOM element\n  return gd;\n}\nfunction isPlotDiv(el) {\n  var el3 = d3.select(el);\n  return el3.node() instanceof HTMLElement && el3.size() && el3.classed('js-plotly-plot');\n}\nfunction removeElement(el) {\n  var elParent = el && el.parentNode;\n  if (elParent) elParent.removeChild(el);\n}\n\n/**\n * for dynamically adding style rules\n * makes one stylesheet that contains all rules added\n * by all calls to this function\n */\nfunction addStyleRule(selector, styleString) {\n  addRelatedStyleRule('global', selector, styleString);\n}\n\n/**\n * for dynamically adding style rules\n * to a stylesheet uniquely identified by a uid\n */\nfunction addRelatedStyleRule(uid, selector, styleString) {\n  var id = 'plotly.js-style-' + uid;\n  var style = document.getElementById(id);\n  if (!style) {\n    style = document.createElement('style');\n    style.setAttribute('id', id);\n    // WebKit hack :(\n    style.appendChild(document.createTextNode(''));\n    document.head.appendChild(style);\n  }\n  var styleSheet = style.sheet;\n  if (styleSheet.insertRule) {\n    styleSheet.insertRule(selector + '{' + styleString + '}', 0);\n  } else if (styleSheet.addRule) {\n    styleSheet.addRule(selector, styleString, 0);\n  } else loggers.warn('addStyleRule failed');\n}\n\n/**\n * to remove from the page a stylesheet identified by a given uid\n */\nfunction deleteRelatedStyleRule(uid) {\n  var id = 'plotly.js-style-' + uid;\n  var style = document.getElementById(id);\n  if (style) removeElement(style);\n}\nfunction getFullTransformMatrix(element) {\n  var allElements = getElementAndAncestors(element);\n  // the identity matrix\n  var out = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n  allElements.forEach(function (e) {\n    var t = getElementTransformMatrix(e);\n    if (t) {\n      var m = matrix.convertCssMatrix(t);\n      out = mat4X4.multiply(out, out, m);\n    }\n  });\n  return out;\n}\n\n/**\n * extracts and parses the 2d css style transform matrix from some element\n */\nfunction getElementTransformMatrix(element) {\n  var style = window.getComputedStyle(element, null);\n  var transform = style.getPropertyValue('-webkit-transform') || style.getPropertyValue('-moz-transform') || style.getPropertyValue('-ms-transform') || style.getPropertyValue('-o-transform') || style.getPropertyValue('transform');\n  if (transform === 'none') return null;\n  // the transform is a string in the form of matrix(a, b, ...) or matrix3d(...)\n  return transform.replace('matrix', '').replace('3d', '').slice(1, -1).split(',').map(function (n) {\n    return +n;\n  });\n}\n/**\n * retrieve all DOM elements that are ancestors of the specified one (including itself)\n */\nfunction getElementAndAncestors(element) {\n  var allElements = [];\n  while (isTransformableElement(element)) {\n    allElements.push(element);\n    element = element.parentNode;\n    if (typeof ShadowRoot === 'function' && element instanceof ShadowRoot) {\n      element = element.host;\n    }\n  }\n  return allElements;\n}\nfunction isTransformableElement(element) {\n  return element && (element instanceof Element || element instanceof HTMLElement);\n}\nfunction equalDomRects(a, b) {\n  return a && b && a.top === b.top && a.left === b.left && a.right === b.right && a.bottom === b.bottom;\n}\nmodule.exports = {\n  getGraphDiv: getGraphDiv,\n  isPlotDiv: isPlotDiv,\n  removeElement: removeElement,\n  addStyleRule: addStyleRule,\n  addRelatedStyleRule: addRelatedStyleRule,\n  deleteRelatedStyleRule: deleteRelatedStyleRule,\n  getFullTransformMatrix: getFullTransformMatrix,\n  getElementTransformMatrix: getElementTransformMatrix,\n  getElementAndAncestors: getElementAndAncestors,\n  equalDomRects: equalDomRects\n};","map":{"version":3,"names":["d3","require","loggers","matrix","mat4X4","getGraphDiv","gd","gdElement","document","getElementById","Error","undefined","isPlotDiv","el","el3","select","node","HTMLElement","size","classed","removeElement","elParent","parentNode","removeChild","addStyleRule","selector","styleString","addRelatedStyleRule","uid","id","style","createElement","setAttribute","appendChild","createTextNode","head","styleSheet","sheet","insertRule","addRule","warn","deleteRelatedStyleRule","getFullTransformMatrix","element","allElements","getElementAndAncestors","out","forEach","e","t","getElementTransformMatrix","m","convertCssMatrix","multiply","window","getComputedStyle","transform","getPropertyValue","replace","slice","split","map","n","isTransformableElement","push","ShadowRoot","host","Element","equalDomRects","a","b","top","left","right","bottom","module","exports"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/lib/dom.js"],"sourcesContent":["'use strict';\n\nvar d3 = require('@plotly/d3');\nvar loggers = require('./loggers');\nvar matrix = require('./matrix');\nvar mat4X4 = require('gl-mat4');\n\n/**\n * Allow referencing a graph DOM element either directly\n * or by its id string\n *\n * @param {HTMLDivElement|string} gd: a graph element or its id\n *\n * @returns {HTMLDivElement} the DOM element of the graph\n */\nfunction getGraphDiv(gd) {\n    var gdElement;\n\n    if(typeof gd === 'string') {\n        gdElement = document.getElementById(gd);\n\n        if(gdElement === null) {\n            throw new Error('No DOM element with id \\'' + gd + '\\' exists on the page.');\n        }\n\n        return gdElement;\n    } else if(gd === null || gd === undefined) {\n        throw new Error('DOM element provided is null or undefined');\n    }\n\n    // otherwise assume that gd is a DOM element\n    return gd;\n}\n\nfunction isPlotDiv(el) {\n    var el3 = d3.select(el);\n    return el3.node() instanceof HTMLElement &&\n        el3.size() &&\n        el3.classed('js-plotly-plot');\n}\n\nfunction removeElement(el) {\n    var elParent = el && el.parentNode;\n    if(elParent) elParent.removeChild(el);\n}\n\n/**\n * for dynamically adding style rules\n * makes one stylesheet that contains all rules added\n * by all calls to this function\n */\nfunction addStyleRule(selector, styleString) {\n    addRelatedStyleRule('global', selector, styleString);\n}\n\n/**\n * for dynamically adding style rules\n * to a stylesheet uniquely identified by a uid\n */\nfunction addRelatedStyleRule(uid, selector, styleString) {\n    var id = 'plotly.js-style-' + uid;\n    var style = document.getElementById(id);\n    if(!style) {\n        style = document.createElement('style');\n        style.setAttribute('id', id);\n        // WebKit hack :(\n        style.appendChild(document.createTextNode(''));\n        document.head.appendChild(style);\n    }\n    var styleSheet = style.sheet;\n\n    if(styleSheet.insertRule) {\n        styleSheet.insertRule(selector + '{' + styleString + '}', 0);\n    } else if(styleSheet.addRule) {\n        styleSheet.addRule(selector, styleString, 0);\n    } else loggers.warn('addStyleRule failed');\n}\n\n/**\n * to remove from the page a stylesheet identified by a given uid\n */\nfunction deleteRelatedStyleRule(uid) {\n    var id = 'plotly.js-style-' + uid;\n    var style = document.getElementById(id);\n    if(style) removeElement(style);\n}\n\nfunction getFullTransformMatrix(element) {\n    var allElements = getElementAndAncestors(element);\n    // the identity matrix\n    var out = [\n        1, 0, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 1, 0,\n        0, 0, 0, 1\n    ];\n    allElements.forEach(function(e) {\n        var t = getElementTransformMatrix(e);\n        if(t) {\n            var m = matrix.convertCssMatrix(t);\n            out = mat4X4.multiply(out, out, m);\n        }\n    });\n    return out;\n}\n\n/**\n * extracts and parses the 2d css style transform matrix from some element\n */\nfunction getElementTransformMatrix(element) {\n    var style = window.getComputedStyle(element, null);\n    var transform = (\n      style.getPropertyValue('-webkit-transform') ||\n      style.getPropertyValue('-moz-transform') ||\n      style.getPropertyValue('-ms-transform') ||\n      style.getPropertyValue('-o-transform') ||\n      style.getPropertyValue('transform')\n    );\n\n    if(transform === 'none') return null;\n    // the transform is a string in the form of matrix(a, b, ...) or matrix3d(...)\n    return transform\n        .replace('matrix', '')\n        .replace('3d', '')\n        .slice(1, -1)\n        .split(',')\n        .map(function(n) { return +n; });\n}\n/**\n * retrieve all DOM elements that are ancestors of the specified one (including itself)\n */\nfunction getElementAndAncestors(element) {\n    var allElements = [];\n    while(isTransformableElement(element)) {\n        allElements.push(element);\n        element = element.parentNode;\n        if(typeof ShadowRoot === 'function' && element instanceof ShadowRoot) {\n            element = element.host;\n        }\n    }\n    return allElements;\n}\n\nfunction isTransformableElement(element) {\n    return element && (element instanceof Element || element instanceof HTMLElement);\n}\n\nfunction equalDomRects(a, b) {\n    return (\n        a && b &&\n        a.top === b.top &&\n        a.left === b.left &&\n        a.right === b.right &&\n        a.bottom === b.bottom\n    );\n}\n\nmodule.exports = {\n    getGraphDiv: getGraphDiv,\n    isPlotDiv: isPlotDiv,\n    removeElement: removeElement,\n    addStyleRule: addStyleRule,\n    addRelatedStyleRule: addRelatedStyleRule,\n    deleteRelatedStyleRule: deleteRelatedStyleRule,\n    getFullTransformMatrix: getFullTransformMatrix,\n    getElementTransformMatrix: getElementTransformMatrix,\n    getElementAndAncestors: getElementAndAncestors,\n    equalDomRects: equalDomRects\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}