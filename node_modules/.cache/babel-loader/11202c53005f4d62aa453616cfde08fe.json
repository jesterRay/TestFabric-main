{"ast":null,"code":"'use strict';\n\nvar isNumeric = require('fast-isnumeric');\nvar tinycolor = require('tinycolor2');\nvar rgba = require('color-normalize');\nvar Colorscale = require('../components/colorscale');\nvar colorDflt = require('../components/color/attributes').defaultLine;\nvar isArrayOrTypedArray = require('./array').isArrayOrTypedArray;\nvar colorDfltRgba = rgba(colorDflt);\nvar opacityDflt = 1;\nfunction calculateColor(colorIn, opacityIn) {\n  var colorOut = colorIn;\n  colorOut[3] *= opacityIn;\n  return colorOut;\n}\nfunction validateColor(colorIn) {\n  if (isNumeric(colorIn)) return colorDfltRgba;\n  var colorOut = rgba(colorIn);\n  return colorOut.length ? colorOut : colorDfltRgba;\n}\nfunction validateOpacity(opacityIn) {\n  return isNumeric(opacityIn) ? opacityIn : opacityDflt;\n}\nfunction formatColor(containerIn, opacityIn, len) {\n  var colorIn = containerIn.color;\n  if (colorIn && colorIn._inputArray) colorIn = colorIn._inputArray;\n  var isArrayColorIn = isArrayOrTypedArray(colorIn);\n  var isArrayOpacityIn = isArrayOrTypedArray(opacityIn);\n  var cOpts = Colorscale.extractOpts(containerIn);\n  var colorOut = [];\n  var sclFunc, getColor, getOpacity, colori, opacityi;\n  if (cOpts.colorscale !== undefined) {\n    sclFunc = Colorscale.makeColorScaleFuncFromTrace(containerIn);\n  } else {\n    sclFunc = validateColor;\n  }\n  if (isArrayColorIn) {\n    getColor = function (c, i) {\n      // FIXME: there is double work, considering that sclFunc does the opposite\n      return c[i] === undefined ? colorDfltRgba : rgba(sclFunc(c[i]));\n    };\n  } else getColor = validateColor;\n  if (isArrayOpacityIn) {\n    getOpacity = function (o, i) {\n      return o[i] === undefined ? opacityDflt : validateOpacity(o[i]);\n    };\n  } else getOpacity = validateOpacity;\n  if (isArrayColorIn || isArrayOpacityIn) {\n    for (var i = 0; i < len; i++) {\n      colori = getColor(colorIn, i);\n      opacityi = getOpacity(opacityIn, i);\n      colorOut[i] = calculateColor(colori, opacityi);\n    }\n  } else colorOut = calculateColor(rgba(colorIn), opacityIn);\n  return colorOut;\n}\nfunction parseColorScale(cont) {\n  var cOpts = Colorscale.extractOpts(cont);\n  var colorscale = cOpts.colorscale;\n  if (cOpts.reversescale) colorscale = Colorscale.flipScale(cOpts.colorscale);\n  return colorscale.map(function (elem) {\n    var index = elem[0];\n    var color = tinycolor(elem[1]);\n    var rgb = color.toRgb();\n    return {\n      index: index,\n      rgb: [rgb.r, rgb.g, rgb.b, rgb.a]\n    };\n  });\n}\nmodule.exports = {\n  formatColor: formatColor,\n  parseColorScale: parseColorScale\n};","map":{"version":3,"names":["isNumeric","require","tinycolor","rgba","Colorscale","colorDflt","defaultLine","isArrayOrTypedArray","colorDfltRgba","opacityDflt","calculateColor","colorIn","opacityIn","colorOut","validateColor","length","validateOpacity","formatColor","containerIn","len","color","_inputArray","isArrayColorIn","isArrayOpacityIn","cOpts","extractOpts","sclFunc","getColor","getOpacity","colori","opacityi","colorscale","undefined","makeColorScaleFuncFromTrace","c","i","o","parseColorScale","cont","reversescale","flipScale","map","elem","index","rgb","toRgb","r","g","b","a","module","exports"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/lib/gl_format_color.js"],"sourcesContent":["'use strict';\n\nvar isNumeric = require('fast-isnumeric');\nvar tinycolor = require('tinycolor2');\nvar rgba = require('color-normalize');\n\nvar Colorscale = require('../components/colorscale');\nvar colorDflt = require('../components/color/attributes').defaultLine;\nvar isArrayOrTypedArray = require('./array').isArrayOrTypedArray;\n\nvar colorDfltRgba = rgba(colorDflt);\nvar opacityDflt = 1;\n\nfunction calculateColor(colorIn, opacityIn) {\n    var colorOut = colorIn;\n    colorOut[3] *= opacityIn;\n    return colorOut;\n}\n\nfunction validateColor(colorIn) {\n    if(isNumeric(colorIn)) return colorDfltRgba;\n\n    var colorOut = rgba(colorIn);\n\n    return colorOut.length ? colorOut : colorDfltRgba;\n}\n\nfunction validateOpacity(opacityIn) {\n    return isNumeric(opacityIn) ? opacityIn : opacityDflt;\n}\n\nfunction formatColor(containerIn, opacityIn, len) {\n    var colorIn = containerIn.color;\n    if(colorIn && colorIn._inputArray) colorIn = colorIn._inputArray;\n\n    var isArrayColorIn = isArrayOrTypedArray(colorIn);\n    var isArrayOpacityIn = isArrayOrTypedArray(opacityIn);\n    var cOpts = Colorscale.extractOpts(containerIn);\n    var colorOut = [];\n\n    var sclFunc, getColor, getOpacity, colori, opacityi;\n\n    if(cOpts.colorscale !== undefined) {\n        sclFunc = Colorscale.makeColorScaleFuncFromTrace(containerIn);\n    } else {\n        sclFunc = validateColor;\n    }\n\n    if(isArrayColorIn) {\n        getColor = function(c, i) {\n            // FIXME: there is double work, considering that sclFunc does the opposite\n            return c[i] === undefined ? colorDfltRgba : rgba(sclFunc(c[i]));\n        };\n    } else getColor = validateColor;\n\n    if(isArrayOpacityIn) {\n        getOpacity = function(o, i) {\n            return o[i] === undefined ? opacityDflt : validateOpacity(o[i]);\n        };\n    } else getOpacity = validateOpacity;\n\n    if(isArrayColorIn || isArrayOpacityIn) {\n        for(var i = 0; i < len; i++) {\n            colori = getColor(colorIn, i);\n            opacityi = getOpacity(opacityIn, i);\n            colorOut[i] = calculateColor(colori, opacityi);\n        }\n    } else colorOut = calculateColor(rgba(colorIn), opacityIn);\n\n    return colorOut;\n}\n\nfunction parseColorScale(cont) {\n    var cOpts = Colorscale.extractOpts(cont);\n\n    var colorscale = cOpts.colorscale;\n    if(cOpts.reversescale) colorscale = Colorscale.flipScale(cOpts.colorscale);\n\n    return colorscale.map(function(elem) {\n        var index = elem[0];\n        var color = tinycolor(elem[1]);\n        var rgb = color.toRgb();\n        return {\n            index: index,\n            rgb: [rgb.r, rgb.g, rgb.b, rgb.a]\n        };\n    });\n}\n\nmodule.exports = {\n    formatColor: formatColor,\n    parseColorScale: parseColorScale\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}