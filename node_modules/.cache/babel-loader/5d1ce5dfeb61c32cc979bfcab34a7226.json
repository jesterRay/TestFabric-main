{"ast":null,"code":"'use strict';\n\nvar d3 = require('@plotly/d3');\nvar Lib = require('../../lib');\nvar isArrayOrTypedArray = Lib.isArrayOrTypedArray;\nvar numberFormat = Lib.numberFormat;\nvar rgba = require('color-rgba');\nvar Axes = require('../../plots/cartesian/axes');\nvar strRotate = Lib.strRotate;\nvar strTranslate = Lib.strTranslate;\nvar svgTextUtils = require('../../lib/svg_text_utils');\nvar Drawing = require('../../components/drawing');\nvar Colorscale = require('../../components/colorscale');\nvar gup = require('../../lib/gup');\nvar keyFun = gup.keyFun;\nvar repeat = gup.repeat;\nvar unwrap = gup.unwrap;\nvar helpers = require('./helpers');\nvar c = require('./constants');\nvar brush = require('./axisbrush');\nvar lineLayerMaker = require('./lines');\nfunction findExtreme(fn, values, len) {\n  return Lib.aggNums(fn, null, values, len);\n}\nfunction findExtremes(values, len) {\n  return fixExtremes(findExtreme(Math.min, values, len), findExtreme(Math.max, values, len));\n}\nfunction dimensionExtent(dimension) {\n  var range = dimension.range;\n  return range ? fixExtremes(range[0], range[1]) : findExtremes(dimension.values, dimension._length);\n}\nfunction fixExtremes(lo, hi) {\n  if (isNaN(lo) || !isFinite(lo)) {\n    lo = 0;\n  }\n  if (isNaN(hi) || !isFinite(hi)) {\n    hi = 0;\n  }\n\n  // avoid a degenerate (zero-width) domain\n  if (lo === hi) {\n    if (lo === 0) {\n      // no use to multiplying zero, so add/subtract in this case\n      lo -= 1;\n      hi += 1;\n    } else {\n      // this keeps the range in the order of magnitude of the data\n      lo *= 0.9;\n      hi *= 1.1;\n    }\n  }\n  return [lo, hi];\n}\nfunction toText(formatter, texts) {\n  if (texts) {\n    return function (v, i) {\n      var text = texts[i];\n      if (text === null || text === undefined) return formatter(v);\n      return text;\n    };\n  }\n  return formatter;\n}\nfunction domainScale(height, padding, dimension, tickvals, ticktext) {\n  var extent = dimensionExtent(dimension);\n  if (tickvals) {\n    return d3.scale.ordinal().domain(tickvals.map(toText(numberFormat(dimension.tickformat), ticktext))).range(tickvals.map(function (d) {\n      var unitVal = (d - extent[0]) / (extent[1] - extent[0]);\n      return height - padding + unitVal * (2 * padding - height);\n    }));\n  }\n  return d3.scale.linear().domain(extent).range([height - padding, padding]);\n}\nfunction unitToPaddedPx(height, padding) {\n  return d3.scale.linear().range([padding, height - padding]);\n}\nfunction domainToPaddedUnitScale(dimension, padFraction) {\n  return d3.scale.linear().domain(dimensionExtent(dimension)).range([padFraction, 1 - padFraction]);\n}\nfunction ordinalScale(dimension) {\n  if (!dimension.tickvals) return;\n  var extent = dimensionExtent(dimension);\n  return d3.scale.ordinal().domain(dimension.tickvals).range(dimension.tickvals.map(function (d) {\n    return (d - extent[0]) / (extent[1] - extent[0]);\n  }));\n}\nfunction unitToColorScale(cscale) {\n  var colorStops = cscale.map(function (d) {\n    return d[0];\n  });\n  var colorTuples = cscale.map(function (d) {\n    var RGBA = rgba(d[1]);\n    return d3.rgb('rgb(' + RGBA[0] + ',' + RGBA[1] + ',' + RGBA[2] + ')');\n  });\n  var prop = function (n) {\n    return function (o) {\n      return o[n];\n    };\n  };\n\n  // We can't use d3 color interpolation as we may have non-uniform color palette raster\n  // (various color stop distances).\n  var polylinearUnitScales = 'rgb'.split('').map(function (key) {\n    return d3.scale.linear().clamp(true).domain(colorStops).range(colorTuples.map(prop(key)));\n  });\n  return function (d) {\n    return polylinearUnitScales.map(function (s) {\n      return s(d);\n    });\n  };\n}\nfunction someFiltersActive(view) {\n  return view.dimensions.some(function (p) {\n    return p.brush.filterSpecified;\n  });\n}\nfunction model(layout, d, i) {\n  var cd0 = unwrap(d);\n  var trace = cd0.trace;\n  var lineColor = helpers.convertTypedArray(cd0.lineColor);\n  var line = trace.line;\n  var deselectedLines = {\n    color: rgba(trace.unselected.line.color),\n    opacity: trace.unselected.line.opacity\n  };\n  var cOpts = Colorscale.extractOpts(line);\n  var cscale = cOpts.reversescale ? Colorscale.flipScale(cd0.cscale) : cd0.cscale;\n  var domain = trace.domain;\n  var dimensions = trace.dimensions;\n  var width = layout.width;\n  var labelAngle = trace.labelangle;\n  var labelSide = trace.labelside;\n  var labelFont = trace.labelfont;\n  var tickFont = trace.tickfont;\n  var rangeFont = trace.rangefont;\n  var lines = Lib.extendDeepNoArrays({}, line, {\n    color: lineColor.map(d3.scale.linear().domain(dimensionExtent({\n      values: lineColor,\n      range: [cOpts.min, cOpts.max],\n      _length: trace._length\n    }))),\n    blockLineCount: c.blockLineCount,\n    canvasOverdrag: c.overdrag * c.canvasPixelRatio\n  });\n  var groupWidth = Math.floor(width * (domain.x[1] - domain.x[0]));\n  var groupHeight = Math.floor(layout.height * (domain.y[1] - domain.y[0]));\n  var pad = layout.margin || {\n    l: 80,\n    r: 80,\n    t: 100,\n    b: 80\n  };\n  var rowContentWidth = groupWidth;\n  var rowHeight = groupHeight;\n  return {\n    key: i,\n    colCount: dimensions.filter(helpers.isVisible).length,\n    dimensions: dimensions,\n    tickDistance: c.tickDistance,\n    unitToColor: unitToColorScale(cscale),\n    lines: lines,\n    deselectedLines: deselectedLines,\n    labelAngle: labelAngle,\n    labelSide: labelSide,\n    labelFont: labelFont,\n    tickFont: tickFont,\n    rangeFont: rangeFont,\n    layoutWidth: width,\n    layoutHeight: layout.height,\n    domain: domain,\n    translateX: domain.x[0] * width,\n    translateY: layout.height - domain.y[1] * layout.height,\n    pad: pad,\n    canvasWidth: rowContentWidth * c.canvasPixelRatio + 2 * lines.canvasOverdrag,\n    canvasHeight: rowHeight * c.canvasPixelRatio,\n    width: rowContentWidth,\n    height: rowHeight,\n    canvasPixelRatio: c.canvasPixelRatio\n  };\n}\nfunction viewModel(state, callbacks, model) {\n  var width = model.width;\n  var height = model.height;\n  var dimensions = model.dimensions;\n  var canvasPixelRatio = model.canvasPixelRatio;\n  var xScale = function (d) {\n    return width * d / Math.max(1, model.colCount - 1);\n  };\n  var unitPad = c.verticalPadding / height;\n  var _unitToPaddedPx = unitToPaddedPx(height, c.verticalPadding);\n  var vm = {\n    key: model.key,\n    xScale: xScale,\n    model: model,\n    inBrushDrag: false // consider factoring it out and putting it in a centralized global-ish gesture state object\n  };\n  var uniqueKeys = {};\n  vm.dimensions = dimensions.filter(helpers.isVisible).map(function (dimension, i) {\n    var domainToPaddedUnit = domainToPaddedUnitScale(dimension, unitPad);\n    var foundKey = uniqueKeys[dimension.label];\n    uniqueKeys[dimension.label] = (foundKey || 0) + 1;\n    var key = dimension.label + (foundKey ? '__' + foundKey : '');\n    var specifiedConstraint = dimension.constraintrange;\n    var filterRangeSpecified = specifiedConstraint && specifiedConstraint.length;\n    if (filterRangeSpecified && !isArrayOrTypedArray(specifiedConstraint[0])) {\n      specifiedConstraint = [specifiedConstraint];\n    }\n    var filterRange = filterRangeSpecified ? specifiedConstraint.map(function (d) {\n      return d.map(domainToPaddedUnit);\n    }) : [[-Infinity, Infinity]];\n    var brushMove = function () {\n      var p = vm;\n      p.focusLayer && p.focusLayer.render(p.panels, true);\n      var filtersActive = someFiltersActive(p);\n      if (!state.contextShown() && filtersActive) {\n        p.contextLayer && p.contextLayer.render(p.panels, true);\n        state.contextShown(true);\n      } else if (state.contextShown() && !filtersActive) {\n        p.contextLayer && p.contextLayer.render(p.panels, true, true);\n        state.contextShown(false);\n      }\n    };\n    var truncatedValues = dimension.values;\n    if (truncatedValues.length > dimension._length) {\n      truncatedValues = truncatedValues.slice(0, dimension._length);\n    }\n    var tickvals = dimension.tickvals;\n    var ticktext;\n    function makeTickItem(v, i) {\n      return {\n        val: v,\n        text: ticktext[i]\n      };\n    }\n    function sortTickItem(a, b) {\n      return a.val - b.val;\n    }\n    if (isArrayOrTypedArray(tickvals) && tickvals.length) {\n      if (Lib.isTypedArray(tickvals)) tickvals = Array.from(tickvals);\n      ticktext = dimension.ticktext;\n\n      // ensure ticktext and tickvals have same length\n      if (!isArrayOrTypedArray(ticktext) || !ticktext.length) {\n        ticktext = tickvals.map(numberFormat(dimension.tickformat));\n      } else if (ticktext.length > tickvals.length) {\n        ticktext = ticktext.slice(0, tickvals.length);\n      } else if (tickvals.length > ticktext.length) {\n        tickvals = tickvals.slice(0, ticktext.length);\n      }\n\n      // check if we need to sort tickvals/ticktext\n      for (var j = 1; j < tickvals.length; j++) {\n        if (tickvals[j] < tickvals[j - 1]) {\n          var tickItems = tickvals.map(makeTickItem).sort(sortTickItem);\n          for (var k = 0; k < tickvals.length; k++) {\n            tickvals[k] = tickItems[k].val;\n            ticktext[k] = tickItems[k].text;\n          }\n          break;\n        }\n      }\n    } else tickvals = undefined;\n    truncatedValues = helpers.convertTypedArray(truncatedValues);\n    return {\n      key: key,\n      label: dimension.label,\n      tickFormat: dimension.tickformat,\n      tickvals: tickvals,\n      ticktext: ticktext,\n      ordinal: helpers.isOrdinal(dimension),\n      multiselect: dimension.multiselect,\n      xIndex: i,\n      crossfilterDimensionIndex: i,\n      visibleIndex: dimension._index,\n      height: height,\n      values: truncatedValues,\n      paddedUnitValues: truncatedValues.map(domainToPaddedUnit),\n      unitTickvals: tickvals && tickvals.map(domainToPaddedUnit),\n      xScale: xScale,\n      x: xScale(i),\n      canvasX: xScale(i) * canvasPixelRatio,\n      unitToPaddedPx: _unitToPaddedPx,\n      domainScale: domainScale(height, c.verticalPadding, dimension, tickvals, ticktext),\n      ordinalScale: ordinalScale(dimension),\n      parent: vm,\n      model: model,\n      brush: brush.makeBrush(state, filterRangeSpecified, filterRange, function () {\n        state.linePickActive(false);\n      }, brushMove, function (f) {\n        vm.focusLayer.render(vm.panels, true);\n        vm.pickLayer && vm.pickLayer.render(vm.panels, true);\n        state.linePickActive(true);\n        if (callbacks && callbacks.filterChanged) {\n          var invScale = domainToPaddedUnit.invert;\n\n          // update gd.data as if a Plotly.restyle were fired\n          var newRanges = f.map(function (r) {\n            return r.map(invScale).sort(Lib.sorterAsc);\n          }).sort(function (a, b) {\n            return a[0] - b[0];\n          });\n          callbacks.filterChanged(vm.key, dimension._index, newRanges);\n        }\n      })\n    };\n  });\n  return vm;\n}\nfunction styleExtentTexts(selection) {\n  selection.classed(c.cn.axisExtentText, true).attr('text-anchor', 'middle').style('cursor', 'default');\n}\nfunction parcoordsInteractionState() {\n  var linePickActive = true;\n  var contextShown = false;\n  return {\n    linePickActive: function (val) {\n      return arguments.length ? linePickActive = !!val : linePickActive;\n    },\n    contextShown: function (val) {\n      return arguments.length ? contextShown = !!val : contextShown;\n    }\n  };\n}\nfunction calcTilt(angle, position) {\n  var dir = position === 'top' ? 1 : -1;\n  var radians = angle * Math.PI / 180;\n  var dx = Math.sin(radians);\n  var dy = Math.cos(radians);\n  return {\n    dir: dir,\n    dx: dx,\n    dy: dy,\n    degrees: angle\n  };\n}\nfunction updatePanelLayout(yAxis, vm, plotGlPixelRatio) {\n  var panels = vm.panels || (vm.panels = []);\n  var data = yAxis.data();\n  for (var i = 0; i < data.length - 1; i++) {\n    var p = panels[i] || (panels[i] = {});\n    var dim0 = data[i];\n    var dim1 = data[i + 1];\n    p.dim0 = dim0;\n    p.dim1 = dim1;\n    p.canvasX = dim0.canvasX;\n    p.panelSizeX = dim1.canvasX - dim0.canvasX;\n    p.panelSizeY = vm.model.canvasHeight;\n    p.y = 0;\n    p.canvasY = 0;\n    p.plotGlPixelRatio = plotGlPixelRatio;\n  }\n}\nfunction calcAllTicks(cd) {\n  for (var i = 0; i < cd.length; i++) {\n    for (var j = 0; j < cd[i].length; j++) {\n      var trace = cd[i][j].trace;\n      var dimensions = trace.dimensions;\n      for (var k = 0; k < dimensions.length; k++) {\n        var values = dimensions[k].values;\n        var dim = dimensions[k]._ax;\n        if (dim) {\n          if (!dim.range) {\n            dim.range = findExtremes(values, trace._length);\n          } else {\n            dim.range = fixExtremes(dim.range[0], dim.range[1]);\n          }\n          if (!dim.dtick) {\n            dim.dtick = 0.01 * (Math.abs(dim.range[1] - dim.range[0]) || 1);\n          }\n          dim.tickformat = dimensions[k].tickformat;\n          Axes.calcTicks(dim);\n          dim.cleanRange();\n        }\n      }\n    }\n  }\n}\nfunction linearFormat(dim, v) {\n  return Axes.tickText(dim._ax, v, false).text;\n}\nfunction extremeText(d, isTop) {\n  if (d.ordinal) return '';\n  var domain = d.domainScale.domain();\n  var v = domain[isTop ? domain.length - 1 : 0];\n  return linearFormat(d.model.dimensions[d.visibleIndex], v);\n}\nmodule.exports = function parcoords(gd, cdModule, layout, callbacks) {\n  var isStatic = gd._context.staticPlot;\n  var fullLayout = gd._fullLayout;\n  var svg = fullLayout._toppaper;\n  var glContainer = fullLayout._glcontainer;\n  var plotGlPixelRatio = gd._context.plotGlPixelRatio;\n  var paperColor = gd._fullLayout.paper_bgcolor;\n  calcAllTicks(cdModule);\n  var state = parcoordsInteractionState();\n  var vm = cdModule.filter(function (d) {\n    return unwrap(d).trace.visible;\n  }).map(model.bind(0, layout)).map(viewModel.bind(0, state, callbacks));\n  glContainer.each(function (d, i) {\n    return Lib.extendFlat(d, vm[i]);\n  });\n  var glLayers = glContainer.selectAll('.gl-canvas').each(function (d) {\n    // FIXME: figure out how to handle multiple instances\n    d.viewModel = vm[0];\n    d.viewModel.plotGlPixelRatio = plotGlPixelRatio;\n    d.viewModel.paperColor = paperColor;\n    d.model = d.viewModel ? d.viewModel.model : null;\n  });\n  var lastHovered = null;\n  var pickLayer = glLayers.filter(function (d) {\n    return d.pick;\n  });\n\n  // emit hover / unhover event\n  pickLayer.style('pointer-events', isStatic ? 'none' : 'auto').on('mousemove', function (d) {\n    if (state.linePickActive() && d.lineLayer && callbacks && callbacks.hover) {\n      var event = d3.event;\n      var cw = this.width;\n      var ch = this.height;\n      var pointer = d3.mouse(this);\n      var x = pointer[0];\n      var y = pointer[1];\n      if (x < 0 || y < 0 || x >= cw || y >= ch) {\n        return;\n      }\n      var pixel = d.lineLayer.readPixel(x, ch - 1 - y);\n      var found = pixel[3] !== 0;\n      // inverse of the calcPickColor in `lines.js`; detailed comment there\n      var curveNumber = found ? pixel[2] + 256 * (pixel[1] + 256 * pixel[0]) : null;\n      var eventData = {\n        x: x,\n        y: y,\n        clientX: event.clientX,\n        clientY: event.clientY,\n        dataIndex: d.model.key,\n        curveNumber: curveNumber\n      };\n      if (curveNumber !== lastHovered) {\n        // don't unnecessarily repeat the same hit (or miss)\n        if (found) {\n          callbacks.hover(eventData);\n        } else if (callbacks.unhover) {\n          callbacks.unhover(eventData);\n        }\n        lastHovered = curveNumber;\n      }\n    }\n  });\n  glLayers.style('opacity', function (d) {\n    return d.pick ? 0 : 1;\n  });\n  svg.style('background', 'rgba(255, 255, 255, 0)');\n  var controlOverlay = svg.selectAll('.' + c.cn.parcoords).data(vm, keyFun);\n  controlOverlay.exit().remove();\n  controlOverlay.enter().append('g').classed(c.cn.parcoords, true).style('shape-rendering', 'crispEdges').style('pointer-events', 'none');\n  controlOverlay.attr('transform', function (d) {\n    return strTranslate(d.model.translateX, d.model.translateY);\n  });\n  var parcoordsControlView = controlOverlay.selectAll('.' + c.cn.parcoordsControlView).data(repeat, keyFun);\n  parcoordsControlView.enter().append('g').classed(c.cn.parcoordsControlView, true);\n  parcoordsControlView.attr('transform', function (d) {\n    return strTranslate(d.model.pad.l, d.model.pad.t);\n  });\n  var yAxis = parcoordsControlView.selectAll('.' + c.cn.yAxis).data(function (p) {\n    return p.dimensions;\n  }, keyFun);\n  yAxis.enter().append('g').classed(c.cn.yAxis, true);\n  parcoordsControlView.each(function (p) {\n    updatePanelLayout(yAxis, p, plotGlPixelRatio);\n  });\n  glLayers.each(function (d) {\n    if (d.viewModel) {\n      if (!d.lineLayer || callbacks) {\n        // recreate in case of having callbacks e.g. restyle. Should we test for callback to be a restyle?\n        d.lineLayer = lineLayerMaker(this, d);\n      } else d.lineLayer.update(d);\n      if (d.key || d.key === 0) d.viewModel[d.key] = d.lineLayer;\n      var setChanged = !d.context ||\n      // don't update background\n      callbacks; // unless there is a callback on the context layer. Should we test the callback?\n\n      d.lineLayer.render(d.viewModel.panels, setChanged);\n    }\n  });\n  yAxis.attr('transform', function (d) {\n    return strTranslate(d.xScale(d.xIndex), 0);\n  });\n\n  // drag column for reordering columns\n  yAxis.call(d3.behavior.drag().origin(function (d) {\n    return d;\n  }).on('drag', function (d) {\n    var p = d.parent;\n    state.linePickActive(false);\n    d.x = Math.max(-c.overdrag, Math.min(d.model.width + c.overdrag, d3.event.x));\n    d.canvasX = d.x * d.model.canvasPixelRatio;\n    yAxis.sort(function (a, b) {\n      return a.x - b.x;\n    }).each(function (e, i) {\n      e.xIndex = i;\n      e.x = d === e ? e.x : e.xScale(e.xIndex);\n      e.canvasX = e.x * e.model.canvasPixelRatio;\n    });\n    updatePanelLayout(yAxis, p, plotGlPixelRatio);\n    yAxis.filter(function (e) {\n      return Math.abs(d.xIndex - e.xIndex) !== 0;\n    }).attr('transform', function (d) {\n      return strTranslate(d.xScale(d.xIndex), 0);\n    });\n    d3.select(this).attr('transform', strTranslate(d.x, 0));\n    yAxis.each(function (e, i0, i1) {\n      if (i1 === d.parent.key) p.dimensions[i0] = e;\n    });\n    p.contextLayer && p.contextLayer.render(p.panels, false, !someFiltersActive(p));\n    p.focusLayer.render && p.focusLayer.render(p.panels);\n  }).on('dragend', function (d) {\n    var p = d.parent;\n    d.x = d.xScale(d.xIndex);\n    d.canvasX = d.x * d.model.canvasPixelRatio;\n    updatePanelLayout(yAxis, p, plotGlPixelRatio);\n    d3.select(this).attr('transform', function (d) {\n      return strTranslate(d.x, 0);\n    });\n    p.contextLayer && p.contextLayer.render(p.panels, false, !someFiltersActive(p));\n    p.focusLayer && p.focusLayer.render(p.panels);\n    p.pickLayer && p.pickLayer.render(p.panels, true);\n    state.linePickActive(true);\n    if (callbacks && callbacks.axesMoved) {\n      callbacks.axesMoved(p.key, p.dimensions.map(function (e) {\n        return e.crossfilterDimensionIndex;\n      }));\n    }\n  }));\n  yAxis.exit().remove();\n  var axisOverlays = yAxis.selectAll('.' + c.cn.axisOverlays).data(repeat, keyFun);\n  axisOverlays.enter().append('g').classed(c.cn.axisOverlays, true);\n  axisOverlays.selectAll('.' + c.cn.axis).remove();\n  var axis = axisOverlays.selectAll('.' + c.cn.axis).data(repeat, keyFun);\n  axis.enter().append('g').classed(c.cn.axis, true);\n  axis.each(function (d) {\n    var wantedTickCount = d.model.height / d.model.tickDistance;\n    var scale = d.domainScale;\n    var sdom = scale.domain();\n    d3.select(this).call(d3.svg.axis().orient('left').tickSize(4).outerTickSize(2).ticks(wantedTickCount, d.tickFormat) // works for continuous scales only...\n    .tickValues(d.ordinal ?\n    // and this works for ordinal scales\n    sdom : null).tickFormat(function (v) {\n      return helpers.isOrdinal(d) ? v : linearFormat(d.model.dimensions[d.visibleIndex], v);\n    }).scale(scale));\n    Drawing.font(axis.selectAll('text'), d.model.tickFont);\n  });\n  axis.selectAll('.domain, .tick>line').attr('fill', 'none').attr('stroke', 'black').attr('stroke-opacity', 0.25).attr('stroke-width', '1px');\n  axis.selectAll('text').style('cursor', 'default');\n  var axisHeading = axisOverlays.selectAll('.' + c.cn.axisHeading).data(repeat, keyFun);\n  axisHeading.enter().append('g').classed(c.cn.axisHeading, true);\n  var axisTitle = axisHeading.selectAll('.' + c.cn.axisTitle).data(repeat, keyFun);\n  axisTitle.enter().append('text').classed(c.cn.axisTitle, true).attr('text-anchor', 'middle').style('cursor', 'ew-resize').style('pointer-events', isStatic ? 'none' : 'auto');\n  axisTitle.text(function (d) {\n    return d.label;\n  }).each(function (d) {\n    var e = d3.select(this);\n    Drawing.font(e, d.model.labelFont);\n    svgTextUtils.convertToTspans(e, gd);\n  }).attr('transform', function (d) {\n    var tilt = calcTilt(d.model.labelAngle, d.model.labelSide);\n    var r = c.axisTitleOffset;\n    return (tilt.dir > 0 ? '' : strTranslate(0, 2 * r + d.model.height)) + strRotate(tilt.degrees) + strTranslate(-r * tilt.dx, -r * tilt.dy);\n  }).attr('text-anchor', function (d) {\n    var tilt = calcTilt(d.model.labelAngle, d.model.labelSide);\n    var adx = Math.abs(tilt.dx);\n    var ady = Math.abs(tilt.dy);\n    if (2 * adx > ady) {\n      return tilt.dir * tilt.dx < 0 ? 'start' : 'end';\n    } else {\n      return 'middle';\n    }\n  });\n  var axisExtent = axisOverlays.selectAll('.' + c.cn.axisExtent).data(repeat, keyFun);\n  axisExtent.enter().append('g').classed(c.cn.axisExtent, true);\n  var axisExtentTop = axisExtent.selectAll('.' + c.cn.axisExtentTop).data(repeat, keyFun);\n  axisExtentTop.enter().append('g').classed(c.cn.axisExtentTop, true);\n  axisExtentTop.attr('transform', strTranslate(0, -c.axisExtentOffset));\n  var axisExtentTopText = axisExtentTop.selectAll('.' + c.cn.axisExtentTopText).data(repeat, keyFun);\n  axisExtentTopText.enter().append('text').classed(c.cn.axisExtentTopText, true).call(styleExtentTexts);\n  axisExtentTopText.text(function (d) {\n    return extremeText(d, true);\n  }).each(function (d) {\n    Drawing.font(d3.select(this), d.model.rangeFont);\n  });\n  var axisExtentBottom = axisExtent.selectAll('.' + c.cn.axisExtentBottom).data(repeat, keyFun);\n  axisExtentBottom.enter().append('g').classed(c.cn.axisExtentBottom, true);\n  axisExtentBottom.attr('transform', function (d) {\n    return strTranslate(0, d.model.height + c.axisExtentOffset);\n  });\n  var axisExtentBottomText = axisExtentBottom.selectAll('.' + c.cn.axisExtentBottomText).data(repeat, keyFun);\n  axisExtentBottomText.enter().append('text').classed(c.cn.axisExtentBottomText, true).attr('dy', '0.75em').call(styleExtentTexts);\n  axisExtentBottomText.text(function (d) {\n    return extremeText(d, false);\n  }).each(function (d) {\n    Drawing.font(d3.select(this), d.model.rangeFont);\n  });\n  brush.ensureAxisBrush(axisOverlays, paperColor, gd);\n};","map":{"version":3,"names":["d3","require","Lib","isArrayOrTypedArray","numberFormat","rgba","Axes","strRotate","strTranslate","svgTextUtils","Drawing","Colorscale","gup","keyFun","repeat","unwrap","helpers","c","brush","lineLayerMaker","findExtreme","fn","values","len","aggNums","findExtremes","fixExtremes","Math","min","max","dimensionExtent","dimension","range","_length","lo","hi","isNaN","isFinite","toText","formatter","texts","v","i","text","undefined","domainScale","height","padding","tickvals","ticktext","extent","scale","ordinal","domain","map","tickformat","d","unitVal","linear","unitToPaddedPx","domainToPaddedUnitScale","padFraction","ordinalScale","unitToColorScale","cscale","colorStops","colorTuples","RGBA","rgb","prop","n","o","polylinearUnitScales","split","key","clamp","s","someFiltersActive","view","dimensions","some","p","filterSpecified","model","layout","cd0","trace","lineColor","convertTypedArray","line","deselectedLines","color","unselected","opacity","cOpts","extractOpts","reversescale","flipScale","width","labelAngle","labelangle","labelSide","labelside","labelFont","labelfont","tickFont","tickfont","rangeFont","rangefont","lines","extendDeepNoArrays","blockLineCount","canvasOverdrag","overdrag","canvasPixelRatio","groupWidth","floor","x","groupHeight","y","pad","margin","l","r","t","b","rowContentWidth","rowHeight","colCount","filter","isVisible","length","tickDistance","unitToColor","layoutWidth","layoutHeight","translateX","translateY","canvasWidth","canvasHeight","viewModel","state","callbacks","xScale","unitPad","verticalPadding","_unitToPaddedPx","vm","inBrushDrag","uniqueKeys","domainToPaddedUnit","foundKey","label","specifiedConstraint","constraintrange","filterRangeSpecified","filterRange","Infinity","brushMove","focusLayer","render","panels","filtersActive","contextShown","contextLayer","truncatedValues","slice","makeTickItem","val","sortTickItem","a","isTypedArray","Array","from","j","tickItems","sort","k","tickFormat","isOrdinal","multiselect","xIndex","crossfilterDimensionIndex","visibleIndex","_index","paddedUnitValues","unitTickvals","canvasX","parent","makeBrush","linePickActive","f","pickLayer","filterChanged","invScale","invert","newRanges","sorterAsc","styleExtentTexts","selection","classed","cn","axisExtentText","attr","style","parcoordsInteractionState","arguments","calcTilt","angle","position","dir","radians","PI","dx","sin","dy","cos","degrees","updatePanelLayout","yAxis","plotGlPixelRatio","data","dim0","dim1","panelSizeX","panelSizeY","canvasY","calcAllTicks","cd","dim","_ax","dtick","abs","calcTicks","cleanRange","linearFormat","tickText","extremeText","isTop","module","exports","parcoords","gd","cdModule","isStatic","_context","staticPlot","fullLayout","_fullLayout","svg","_toppaper","glContainer","_glcontainer","paperColor","paper_bgcolor","visible","bind","each","extendFlat","glLayers","selectAll","lastHovered","pick","on","lineLayer","hover","event","cw","ch","pointer","mouse","pixel","readPixel","found","curveNumber","eventData","clientX","clientY","dataIndex","unhover","controlOverlay","exit","remove","enter","append","parcoordsControlView","update","setChanged","context","call","behavior","drag","origin","e","select","i0","i1","axesMoved","axisOverlays","axis","wantedTickCount","sdom","orient","tickSize","outerTickSize","ticks","tickValues","font","axisHeading","axisTitle","convertToTspans","tilt","axisTitleOffset","adx","ady","axisExtent","axisExtentTop","axisExtentOffset","axisExtentTopText","axisExtentBottom","axisExtentBottomText","ensureAxisBrush"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/traces/parcoords/parcoords.js"],"sourcesContent":["'use strict';\n\nvar d3 = require('@plotly/d3');\nvar Lib = require('../../lib');\nvar isArrayOrTypedArray = Lib.isArrayOrTypedArray;\nvar numberFormat = Lib.numberFormat;\nvar rgba = require('color-rgba');\n\nvar Axes = require('../../plots/cartesian/axes');\nvar strRotate = Lib.strRotate;\nvar strTranslate = Lib.strTranslate;\nvar svgTextUtils = require('../../lib/svg_text_utils');\nvar Drawing = require('../../components/drawing');\nvar Colorscale = require('../../components/colorscale');\n\nvar gup = require('../../lib/gup');\nvar keyFun = gup.keyFun;\nvar repeat = gup.repeat;\nvar unwrap = gup.unwrap;\n\nvar helpers = require('./helpers');\nvar c = require('./constants');\nvar brush = require('./axisbrush');\nvar lineLayerMaker = require('./lines');\n\nfunction findExtreme(fn, values, len) {\n    return Lib.aggNums(fn, null, values, len);\n}\n\nfunction findExtremes(values, len) {\n    return fixExtremes(\n        findExtreme(Math.min, values, len),\n        findExtreme(Math.max, values, len)\n    );\n}\n\nfunction dimensionExtent(dimension) {\n    var range = dimension.range;\n    return range ?\n        fixExtremes(range[0], range[1]) :\n        findExtremes(dimension.values, dimension._length);\n}\n\nfunction fixExtremes(lo, hi) {\n    if(isNaN(lo) || !isFinite(lo)) {\n        lo = 0;\n    }\n\n    if(isNaN(hi) || !isFinite(hi)) {\n        hi = 0;\n    }\n\n    // avoid a degenerate (zero-width) domain\n    if(lo === hi) {\n        if(lo === 0) {\n            // no use to multiplying zero, so add/subtract in this case\n            lo -= 1;\n            hi += 1;\n        } else {\n            // this keeps the range in the order of magnitude of the data\n            lo *= 0.9;\n            hi *= 1.1;\n        }\n    }\n\n    return [lo, hi];\n}\n\nfunction toText(formatter, texts) {\n    if(texts) {\n        return function(v, i) {\n            var text = texts[i];\n            if(text === null || text === undefined) return formatter(v);\n            return text;\n        };\n    }\n    return formatter;\n}\n\nfunction domainScale(height, padding, dimension, tickvals, ticktext) {\n    var extent = dimensionExtent(dimension);\n    if(tickvals) {\n        return d3.scale.ordinal()\n            .domain(tickvals.map(toText(numberFormat(dimension.tickformat), ticktext)))\n            .range(tickvals\n                .map(function(d) {\n                    var unitVal = (d - extent[0]) / (extent[1] - extent[0]);\n                    return (height - padding + unitVal * (2 * padding - height));\n                })\n            );\n    }\n    return d3.scale.linear()\n        .domain(extent)\n        .range([height - padding, padding]);\n}\n\nfunction unitToPaddedPx(height, padding) {\n    return d3.scale.linear().range([padding, height - padding]);\n}\n\nfunction domainToPaddedUnitScale(dimension, padFraction) {\n    return d3.scale.linear()\n        .domain(dimensionExtent(dimension))\n        .range([padFraction, 1 - padFraction]);\n}\n\nfunction ordinalScale(dimension) {\n    if(!dimension.tickvals) return;\n\n    var extent = dimensionExtent(dimension);\n    return d3.scale.ordinal()\n        .domain(dimension.tickvals)\n        .range(dimension.tickvals.map(function(d) {\n            return (d - extent[0]) / (extent[1] - extent[0]);\n        }));\n}\n\nfunction unitToColorScale(cscale) {\n    var colorStops = cscale.map(function(d) { return d[0]; });\n    var colorTuples = cscale.map(function(d) {\n        var RGBA = rgba(d[1]);\n        return d3.rgb('rgb(' + RGBA[0] + ',' + RGBA[1] + ',' + RGBA[2] + ')');\n    });\n    var prop = function(n) { return function(o) { return o[n]; }; };\n\n    // We can't use d3 color interpolation as we may have non-uniform color palette raster\n    // (various color stop distances).\n    var polylinearUnitScales = 'rgb'.split('').map(function(key) {\n        return d3.scale.linear()\n            .clamp(true)\n            .domain(colorStops)\n            .range(colorTuples.map(prop(key)));\n    });\n\n    return function(d) {\n        return polylinearUnitScales.map(function(s) {\n            return s(d);\n        });\n    };\n}\n\nfunction someFiltersActive(view) {\n    return view.dimensions.some(function(p) {\n        return p.brush.filterSpecified;\n    });\n}\n\nfunction model(layout, d, i) {\n    var cd0 = unwrap(d);\n    var trace = cd0.trace;\n    var lineColor = helpers.convertTypedArray(cd0.lineColor);\n    var line = trace.line;\n    var deselectedLines = {\n        color: rgba(trace.unselected.line.color),\n        opacity: trace.unselected.line.opacity\n    };\n    var cOpts = Colorscale.extractOpts(line);\n    var cscale = cOpts.reversescale ? Colorscale.flipScale(cd0.cscale) : cd0.cscale;\n    var domain = trace.domain;\n    var dimensions = trace.dimensions;\n    var width = layout.width;\n    var labelAngle = trace.labelangle;\n    var labelSide = trace.labelside;\n    var labelFont = trace.labelfont;\n    var tickFont = trace.tickfont;\n    var rangeFont = trace.rangefont;\n\n    var lines = Lib.extendDeepNoArrays({}, line, {\n        color: lineColor.map(d3.scale.linear().domain(\n            dimensionExtent({\n                values: lineColor,\n                range: [cOpts.min, cOpts.max],\n                _length: trace._length\n            })\n        )),\n        blockLineCount: c.blockLineCount,\n        canvasOverdrag: c.overdrag * c.canvasPixelRatio\n    });\n\n    var groupWidth = Math.floor(width * (domain.x[1] - domain.x[0]));\n    var groupHeight = Math.floor(layout.height * (domain.y[1] - domain.y[0]));\n\n    var pad = layout.margin || {l: 80, r: 80, t: 100, b: 80};\n    var rowContentWidth = groupWidth;\n    var rowHeight = groupHeight;\n\n    return {\n        key: i,\n        colCount: dimensions.filter(helpers.isVisible).length,\n        dimensions: dimensions,\n        tickDistance: c.tickDistance,\n        unitToColor: unitToColorScale(cscale),\n        lines: lines,\n        deselectedLines: deselectedLines,\n        labelAngle: labelAngle,\n        labelSide: labelSide,\n        labelFont: labelFont,\n        tickFont: tickFont,\n        rangeFont: rangeFont,\n        layoutWidth: width,\n        layoutHeight: layout.height,\n        domain: domain,\n        translateX: domain.x[0] * width,\n        translateY: layout.height - domain.y[1] * layout.height,\n        pad: pad,\n        canvasWidth: rowContentWidth * c.canvasPixelRatio + 2 * lines.canvasOverdrag,\n        canvasHeight: rowHeight * c.canvasPixelRatio,\n        width: rowContentWidth,\n        height: rowHeight,\n        canvasPixelRatio: c.canvasPixelRatio\n    };\n}\n\nfunction viewModel(state, callbacks, model) {\n    var width = model.width;\n    var height = model.height;\n    var dimensions = model.dimensions;\n    var canvasPixelRatio = model.canvasPixelRatio;\n\n    var xScale = function(d) {return width * d / Math.max(1, model.colCount - 1);};\n\n    var unitPad = c.verticalPadding / height;\n    var _unitToPaddedPx = unitToPaddedPx(height, c.verticalPadding);\n\n    var vm = {\n        key: model.key,\n        xScale: xScale,\n        model: model,\n        inBrushDrag: false // consider factoring it out and putting it in a centralized global-ish gesture state object\n    };\n\n    var uniqueKeys = {};\n\n    vm.dimensions = dimensions.filter(helpers.isVisible).map(function(dimension, i) {\n        var domainToPaddedUnit = domainToPaddedUnitScale(dimension, unitPad);\n        var foundKey = uniqueKeys[dimension.label];\n        uniqueKeys[dimension.label] = (foundKey || 0) + 1;\n        var key = dimension.label + (foundKey ? '__' + foundKey : '');\n        var specifiedConstraint = dimension.constraintrange;\n        var filterRangeSpecified = specifiedConstraint && specifiedConstraint.length;\n        if(filterRangeSpecified && !isArrayOrTypedArray(specifiedConstraint[0])) {\n            specifiedConstraint = [specifiedConstraint];\n        }\n        var filterRange = filterRangeSpecified ?\n            specifiedConstraint.map(function(d) { return d.map(domainToPaddedUnit); }) :\n            [[-Infinity, Infinity]];\n        var brushMove = function() {\n            var p = vm;\n            p.focusLayer && p.focusLayer.render(p.panels, true);\n            var filtersActive = someFiltersActive(p);\n            if(!state.contextShown() && filtersActive) {\n                p.contextLayer && p.contextLayer.render(p.panels, true);\n                state.contextShown(true);\n            } else if(state.contextShown() && !filtersActive) {\n                p.contextLayer && p.contextLayer.render(p.panels, true, true);\n                state.contextShown(false);\n            }\n        };\n\n        var truncatedValues = dimension.values;\n        if(truncatedValues.length > dimension._length) {\n            truncatedValues = truncatedValues.slice(0, dimension._length);\n        }\n\n        var tickvals = dimension.tickvals;\n        var ticktext;\n        function makeTickItem(v, i) { return {val: v, text: ticktext[i]}; }\n        function sortTickItem(a, b) { return a.val - b.val; }\n        if(isArrayOrTypedArray(tickvals) && tickvals.length) {\n            if(Lib.isTypedArray(tickvals)) tickvals = Array.from(tickvals);\n\n            ticktext = dimension.ticktext;\n\n            // ensure ticktext and tickvals have same length\n            if(!isArrayOrTypedArray(ticktext) || !ticktext.length) {\n                ticktext = tickvals.map(numberFormat(dimension.tickformat));\n            } else if(ticktext.length > tickvals.length) {\n                ticktext = ticktext.slice(0, tickvals.length);\n            } else if(tickvals.length > ticktext.length) {\n                tickvals = tickvals.slice(0, ticktext.length);\n            }\n\n            // check if we need to sort tickvals/ticktext\n            for(var j = 1; j < tickvals.length; j++) {\n                if(tickvals[j] < tickvals[j - 1]) {\n                    var tickItems = tickvals.map(makeTickItem).sort(sortTickItem);\n                    for(var k = 0; k < tickvals.length; k++) {\n                        tickvals[k] = tickItems[k].val;\n                        ticktext[k] = tickItems[k].text;\n                    }\n                    break;\n                }\n            }\n        } else tickvals = undefined;\n\n        truncatedValues = helpers.convertTypedArray(truncatedValues);\n\n        return {\n            key: key,\n            label: dimension.label,\n            tickFormat: dimension.tickformat,\n            tickvals: tickvals,\n            ticktext: ticktext,\n            ordinal: helpers.isOrdinal(dimension),\n            multiselect: dimension.multiselect,\n            xIndex: i,\n            crossfilterDimensionIndex: i,\n            visibleIndex: dimension._index,\n            height: height,\n            values: truncatedValues,\n            paddedUnitValues: truncatedValues.map(domainToPaddedUnit),\n            unitTickvals: tickvals && tickvals.map(domainToPaddedUnit),\n            xScale: xScale,\n            x: xScale(i),\n            canvasX: xScale(i) * canvasPixelRatio,\n            unitToPaddedPx: _unitToPaddedPx,\n            domainScale: domainScale(height, c.verticalPadding, dimension, tickvals, ticktext),\n            ordinalScale: ordinalScale(dimension),\n            parent: vm,\n            model: model,\n            brush: brush.makeBrush(\n                state,\n                filterRangeSpecified,\n                filterRange,\n                function() {\n                    state.linePickActive(false);\n                },\n                brushMove,\n                function(f) {\n                    vm.focusLayer.render(vm.panels, true);\n                    vm.pickLayer && vm.pickLayer.render(vm.panels, true);\n                    state.linePickActive(true);\n                    if(callbacks && callbacks.filterChanged) {\n                        var invScale = domainToPaddedUnit.invert;\n\n                        // update gd.data as if a Plotly.restyle were fired\n                        var newRanges = f.map(function(r) {\n                            return r.map(invScale).sort(Lib.sorterAsc);\n                        }).sort(function(a, b) { return a[0] - b[0]; });\n                        callbacks.filterChanged(vm.key, dimension._index, newRanges);\n                    }\n                }\n            )\n        };\n    });\n\n    return vm;\n}\n\nfunction styleExtentTexts(selection) {\n    selection\n        .classed(c.cn.axisExtentText, true)\n        .attr('text-anchor', 'middle')\n        .style('cursor', 'default');\n}\n\nfunction parcoordsInteractionState() {\n    var linePickActive = true;\n    var contextShown = false;\n    return {\n        linePickActive: function(val) {return arguments.length ? linePickActive = !!val : linePickActive;},\n        contextShown: function(val) {return arguments.length ? contextShown = !!val : contextShown;}\n    };\n}\n\nfunction calcTilt(angle, position) {\n    var dir = (position === 'top') ? 1 : -1;\n    var radians = angle * Math.PI / 180;\n    var dx = Math.sin(radians);\n    var dy = Math.cos(radians);\n    return {\n        dir: dir,\n        dx: dx,\n        dy: dy,\n        degrees: angle\n    };\n}\n\nfunction updatePanelLayout(yAxis, vm, plotGlPixelRatio) {\n    var panels = vm.panels || (vm.panels = []);\n    var data = yAxis.data();\n    for(var i = 0; i < data.length - 1; i++) {\n        var p = panels[i] || (panels[i] = {});\n        var dim0 = data[i];\n        var dim1 = data[i + 1];\n        p.dim0 = dim0;\n        p.dim1 = dim1;\n        p.canvasX = dim0.canvasX;\n        p.panelSizeX = dim1.canvasX - dim0.canvasX;\n        p.panelSizeY = vm.model.canvasHeight;\n        p.y = 0;\n        p.canvasY = 0;\n        p.plotGlPixelRatio = plotGlPixelRatio;\n    }\n}\n\nfunction calcAllTicks(cd) {\n    for(var i = 0; i < cd.length; i++) {\n        for(var j = 0; j < cd[i].length; j++) {\n            var trace = cd[i][j].trace;\n            var dimensions = trace.dimensions;\n\n            for(var k = 0; k < dimensions.length; k++) {\n                var values = dimensions[k].values;\n                var dim = dimensions[k]._ax;\n\n                if(dim) {\n                    if(!dim.range) {\n                        dim.range = findExtremes(values, trace._length);\n                    } else {\n                        dim.range = fixExtremes(dim.range[0], dim.range[1]);\n                    }\n\n                    if(!dim.dtick) {\n                        dim.dtick = 0.01 * (Math.abs(dim.range[1] - dim.range[0]) || 1);\n                    }\n\n                    dim.tickformat = dimensions[k].tickformat;\n                    Axes.calcTicks(dim);\n                    dim.cleanRange();\n                }\n            }\n        }\n    }\n}\n\nfunction linearFormat(dim, v) {\n    return Axes.tickText(dim._ax, v, false).text;\n}\n\nfunction extremeText(d, isTop) {\n    if(d.ordinal) return '';\n    var domain = d.domainScale.domain();\n    var v = (domain[isTop ? domain.length - 1 : 0]);\n\n    return linearFormat(d.model.dimensions[d.visibleIndex], v);\n}\n\n\nmodule.exports = function parcoords(gd, cdModule, layout, callbacks) {\n    var isStatic = gd._context.staticPlot;\n\n    var fullLayout = gd._fullLayout;\n    var svg = fullLayout._toppaper;\n    var glContainer = fullLayout._glcontainer;\n    var plotGlPixelRatio = gd._context.plotGlPixelRatio;\n    var paperColor = gd._fullLayout.paper_bgcolor;\n\n    calcAllTicks(cdModule);\n\n    var state = parcoordsInteractionState();\n\n    var vm = cdModule\n        .filter(function(d) { return unwrap(d).trace.visible; })\n        .map(model.bind(0, layout))\n        .map(viewModel.bind(0, state, callbacks));\n\n    glContainer.each(function(d, i) {\n        return Lib.extendFlat(d, vm[i]);\n    });\n\n    var glLayers = glContainer.selectAll('.gl-canvas')\n        .each(function(d) {\n            // FIXME: figure out how to handle multiple instances\n            d.viewModel = vm[0];\n            d.viewModel.plotGlPixelRatio = plotGlPixelRatio;\n            d.viewModel.paperColor = paperColor;\n            d.model = d.viewModel ? d.viewModel.model : null;\n        });\n\n    var lastHovered = null;\n\n    var pickLayer = glLayers.filter(function(d) {return d.pick;});\n\n    // emit hover / unhover event\n    pickLayer\n        .style('pointer-events', isStatic ? 'none' : 'auto')\n        .on('mousemove', function(d) {\n            if(state.linePickActive() && d.lineLayer && callbacks && callbacks.hover) {\n                var event = d3.event;\n                var cw = this.width;\n                var ch = this.height;\n                var pointer = d3.mouse(this);\n                var x = pointer[0];\n                var y = pointer[1];\n\n                if(x < 0 || y < 0 || x >= cw || y >= ch) {\n                    return;\n                }\n                var pixel = d.lineLayer.readPixel(x, ch - 1 - y);\n                var found = pixel[3] !== 0;\n                // inverse of the calcPickColor in `lines.js`; detailed comment there\n                var curveNumber = found ? pixel[2] + 256 * (pixel[1] + 256 * pixel[0]) : null;\n                var eventData = {\n                    x: x,\n                    y: y,\n                    clientX: event.clientX,\n                    clientY: event.clientY,\n                    dataIndex: d.model.key,\n                    curveNumber: curveNumber\n                };\n                if(curveNumber !== lastHovered) { // don't unnecessarily repeat the same hit (or miss)\n                    if(found) {\n                        callbacks.hover(eventData);\n                    } else if(callbacks.unhover) {\n                        callbacks.unhover(eventData);\n                    }\n                    lastHovered = curveNumber;\n                }\n            }\n        });\n\n    glLayers\n        .style('opacity', function(d) {return d.pick ? 0 : 1;});\n\n    svg.style('background', 'rgba(255, 255, 255, 0)');\n    var controlOverlay = svg.selectAll('.' + c.cn.parcoords)\n        .data(vm, keyFun);\n\n    controlOverlay.exit().remove();\n\n    controlOverlay.enter()\n        .append('g')\n        .classed(c.cn.parcoords, true)\n        .style('shape-rendering', 'crispEdges')\n        .style('pointer-events', 'none');\n\n    controlOverlay.attr('transform', function(d) {\n        return strTranslate(d.model.translateX, d.model.translateY);\n    });\n\n    var parcoordsControlView = controlOverlay.selectAll('.' + c.cn.parcoordsControlView)\n        .data(repeat, keyFun);\n\n    parcoordsControlView.enter()\n        .append('g')\n        .classed(c.cn.parcoordsControlView, true);\n\n    parcoordsControlView.attr('transform', function(d) {\n        return strTranslate(d.model.pad.l, d.model.pad.t);\n    });\n\n    var yAxis = parcoordsControlView.selectAll('.' + c.cn.yAxis)\n        .data(function(p) { return p.dimensions; }, keyFun);\n\n    yAxis.enter()\n        .append('g')\n        .classed(c.cn.yAxis, true);\n\n    parcoordsControlView.each(function(p) {\n        updatePanelLayout(yAxis, p, plotGlPixelRatio);\n    });\n\n    glLayers\n        .each(function(d) {\n            if(d.viewModel) {\n                if(!d.lineLayer || callbacks) { // recreate in case of having callbacks e.g. restyle. Should we test for callback to be a restyle?\n                    d.lineLayer = lineLayerMaker(this, d);\n                } else d.lineLayer.update(d);\n\n                if(d.key || d.key === 0) d.viewModel[d.key] = d.lineLayer;\n\n                var setChanged = (!d.context || // don't update background\n                                  callbacks);   // unless there is a callback on the context layer. Should we test the callback?\n\n                d.lineLayer.render(d.viewModel.panels, setChanged);\n            }\n        });\n\n    yAxis.attr('transform', function(d) {\n        return strTranslate(d.xScale(d.xIndex), 0);\n    });\n\n    // drag column for reordering columns\n    yAxis.call(d3.behavior.drag()\n        .origin(function(d) { return d; })\n        .on('drag', function(d) {\n            var p = d.parent;\n            state.linePickActive(false);\n            d.x = Math.max(-c.overdrag, Math.min(d.model.width + c.overdrag, d3.event.x));\n            d.canvasX = d.x * d.model.canvasPixelRatio;\n            yAxis\n                .sort(function(a, b) { return a.x - b.x; })\n                .each(function(e, i) {\n                    e.xIndex = i;\n                    e.x = d === e ? e.x : e.xScale(e.xIndex);\n                    e.canvasX = e.x * e.model.canvasPixelRatio;\n                });\n\n            updatePanelLayout(yAxis, p, plotGlPixelRatio);\n\n            yAxis.filter(function(e) { return Math.abs(d.xIndex - e.xIndex) !== 0; })\n                .attr('transform', function(d) { return strTranslate(d.xScale(d.xIndex), 0); });\n            d3.select(this).attr('transform', strTranslate(d.x, 0));\n            yAxis.each(function(e, i0, i1) { if(i1 === d.parent.key) p.dimensions[i0] = e; });\n            p.contextLayer && p.contextLayer.render(p.panels, false, !someFiltersActive(p));\n            p.focusLayer.render && p.focusLayer.render(p.panels);\n        })\n        .on('dragend', function(d) {\n            var p = d.parent;\n            d.x = d.xScale(d.xIndex);\n            d.canvasX = d.x * d.model.canvasPixelRatio;\n            updatePanelLayout(yAxis, p, plotGlPixelRatio);\n            d3.select(this)\n                .attr('transform', function(d) { return strTranslate(d.x, 0); });\n            p.contextLayer && p.contextLayer.render(p.panels, false, !someFiltersActive(p));\n            p.focusLayer && p.focusLayer.render(p.panels);\n            p.pickLayer && p.pickLayer.render(p.panels, true);\n            state.linePickActive(true);\n\n            if(callbacks && callbacks.axesMoved) {\n                callbacks.axesMoved(p.key, p.dimensions.map(function(e) {return e.crossfilterDimensionIndex;}));\n            }\n        })\n    );\n\n    yAxis.exit()\n        .remove();\n\n    var axisOverlays = yAxis.selectAll('.' + c.cn.axisOverlays)\n        .data(repeat, keyFun);\n\n    axisOverlays.enter()\n        .append('g')\n        .classed(c.cn.axisOverlays, true);\n\n    axisOverlays.selectAll('.' + c.cn.axis).remove();\n\n    var axis = axisOverlays.selectAll('.' + c.cn.axis)\n        .data(repeat, keyFun);\n\n    axis.enter()\n        .append('g')\n        .classed(c.cn.axis, true);\n\n    axis\n        .each(function(d) {\n            var wantedTickCount = d.model.height / d.model.tickDistance;\n            var scale = d.domainScale;\n            var sdom = scale.domain();\n            d3.select(this)\n                .call(d3.svg.axis()\n                    .orient('left')\n                    .tickSize(4)\n                    .outerTickSize(2)\n                    .ticks(wantedTickCount, d.tickFormat) // works for continuous scales only...\n                    .tickValues(d.ordinal ? // and this works for ordinal scales\n                        sdom :\n                        null)\n                    .tickFormat(function(v) {\n                        return helpers.isOrdinal(d) ? v : linearFormat(d.model.dimensions[d.visibleIndex], v);\n                    })\n                    .scale(scale));\n            Drawing.font(axis.selectAll('text'), d.model.tickFont);\n        });\n\n    axis.selectAll('.domain, .tick>line')\n        .attr('fill', 'none')\n        .attr('stroke', 'black')\n        .attr('stroke-opacity', 0.25)\n        .attr('stroke-width', '1px');\n\n    axis.selectAll('text')\n        .style('cursor', 'default');\n\n    var axisHeading = axisOverlays.selectAll('.' + c.cn.axisHeading)\n        .data(repeat, keyFun);\n\n    axisHeading.enter()\n        .append('g')\n        .classed(c.cn.axisHeading, true);\n\n    var axisTitle = axisHeading.selectAll('.' + c.cn.axisTitle)\n        .data(repeat, keyFun);\n\n    axisTitle.enter()\n        .append('text')\n        .classed(c.cn.axisTitle, true)\n        .attr('text-anchor', 'middle')\n        .style('cursor', 'ew-resize')\n        .style('pointer-events', isStatic ? 'none' : 'auto');\n\n    axisTitle\n        .text(function(d) { return d.label; })\n        .each(function(d) {\n            var e = d3.select(this);\n            Drawing.font(e, d.model.labelFont);\n            svgTextUtils.convertToTspans(e, gd);\n        })\n        .attr('transform', function(d) {\n            var tilt = calcTilt(d.model.labelAngle, d.model.labelSide);\n            var r = c.axisTitleOffset;\n            return (\n                (tilt.dir > 0 ? '' : strTranslate(0, 2 * r + d.model.height)) +\n                strRotate(tilt.degrees) +\n                strTranslate(-r * tilt.dx, -r * tilt.dy)\n            );\n        })\n        .attr('text-anchor', function(d) {\n            var tilt = calcTilt(d.model.labelAngle, d.model.labelSide);\n            var adx = Math.abs(tilt.dx);\n            var ady = Math.abs(tilt.dy);\n\n            if(2 * adx > ady) {\n                return (tilt.dir * tilt.dx < 0) ? 'start' : 'end';\n            } else {\n                return 'middle';\n            }\n        });\n\n    var axisExtent = axisOverlays.selectAll('.' + c.cn.axisExtent)\n        .data(repeat, keyFun);\n\n    axisExtent.enter()\n        .append('g')\n        .classed(c.cn.axisExtent, true);\n\n    var axisExtentTop = axisExtent.selectAll('.' + c.cn.axisExtentTop)\n        .data(repeat, keyFun);\n\n    axisExtentTop.enter()\n        .append('g')\n        .classed(c.cn.axisExtentTop, true);\n\n    axisExtentTop\n        .attr('transform', strTranslate(0, -c.axisExtentOffset));\n\n    var axisExtentTopText = axisExtentTop.selectAll('.' + c.cn.axisExtentTopText)\n        .data(repeat, keyFun);\n\n    axisExtentTopText.enter()\n        .append('text')\n        .classed(c.cn.axisExtentTopText, true)\n        .call(styleExtentTexts);\n\n    axisExtentTopText\n        .text(function(d) { return extremeText(d, true); })\n        .each(function(d) { Drawing.font(d3.select(this), d.model.rangeFont); });\n\n    var axisExtentBottom = axisExtent.selectAll('.' + c.cn.axisExtentBottom)\n        .data(repeat, keyFun);\n\n    axisExtentBottom.enter()\n        .append('g')\n        .classed(c.cn.axisExtentBottom, true);\n\n    axisExtentBottom\n        .attr('transform', function(d) {\n            return strTranslate(0, d.model.height + c.axisExtentOffset);\n        });\n\n    var axisExtentBottomText = axisExtentBottom.selectAll('.' + c.cn.axisExtentBottomText)\n        .data(repeat, keyFun);\n\n    axisExtentBottomText.enter()\n        .append('text')\n        .classed(c.cn.axisExtentBottomText, true)\n        .attr('dy', '0.75em')\n        .call(styleExtentTexts);\n\n    axisExtentBottomText\n        .text(function(d) { return extremeText(d, false); })\n        .each(function(d) { Drawing.font(d3.select(this), d.model.rangeFont); });\n\n    brush.ensureAxisBrush(axisOverlays, paperColor, gd);\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}