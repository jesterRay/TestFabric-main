{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\"; // Keeping useHistory for v5\n\nexport function useApi(baseUrl, params) {\n  _s();\n  const history = useHistory();\n  const [data, setData] = useState(null);\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(() => {\n    if (!baseUrl) return; // Prevents API calls with undefined baseUrl\n\n    setIsLoading(true);\n    axios.get(`${process.env.REACT_APP_API_URL}${baseUrl}`, {\n      params\n    }).then(response => {\n      var _response$data;\n      setData((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.data) || null);\n      setIsLoading(false);\n    }).catch(error => {\n      var _error$response;\n      setError(error);\n      setIsLoading(false);\n      console.error(`API Error (${baseUrl}):`, error);\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 404) {\n        history.push(\"/\"); // Redirect only if 404\n      }\n    });\n  }, [baseUrl, params]); // Re-fetches only when baseUrl or params change\n\n  return {\n    data,\n    error,\n    isLoading\n  };\n}\n_s(useApi, \"QdjLPQgsD52d5HsrPwWXYJ8nd6g=\", false, function () {\n  return [useHistory];\n});","map":{"version":3,"names":["useState","useEffect","axios","useHistory","useApi","baseUrl","params","_s","history","data","setData","error","setError","isLoading","setIsLoading","get","process","env","REACT_APP_API_URL","then","response","_response$data","catch","_error$response","console","status","push"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/src/middleware/middleware.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\"; // Keeping useHistory for v5\n\nexport function useApi(baseUrl, params) {\n    const history = useHistory();\n    const [data, setData] = useState(null);\n    const [error, setError] = useState(null);\n    const [isLoading, setIsLoading] = useState(false);\n\n    useEffect(() => {\n        if (!baseUrl) return; // Prevents API calls with undefined baseUrl\n\n        setIsLoading(true);\n\n        axios\n            .get(`${process.env.REACT_APP_API_URL}${baseUrl}`, { params })\n            .then(response => {\n                setData(response?.data?.data || null);\n                setIsLoading(false);\n            })\n            .catch(error => {\n                setError(error);\n                setIsLoading(false);\n                console.error(`API Error (${baseUrl}):`, error);\n\n                if (error.response?.status === 404) {\n                    history.push(\"/\"); // Redirect only if 404\n                }\n            });\n\n    }, [baseUrl, params]); // Re-fetches only when baseUrl or params change\n\n    return { data, error, isLoading };\n}\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,QAAQ,kBAAkB,CAAC,CAAC;;AAE/C,OAAO,SAASC,MAAMA,CAACC,OAAO,EAAEC,MAAM,EAAE;EAAAC,EAAA;EACpC,MAAMC,OAAO,GAAGL,UAAU,CAAC,CAAC;EAC5B,MAAM,CAACM,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACW,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACa,SAAS,EAAEC,YAAY,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EAEjDC,SAAS,CAAC,MAAM;IACZ,IAAI,CAACI,OAAO,EAAE,OAAO,CAAC;;IAEtBS,YAAY,CAAC,IAAI,CAAC;IAElBZ,KAAK,CACAa,GAAG,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,GAAGb,OAAO,EAAE,EAAE;MAAEC;IAAO,CAAC,CAAC,CAC7Da,IAAI,CAACC,QAAQ,IAAI;MAAA,IAAAC,cAAA;MACdX,OAAO,CAAC,CAAAU,QAAQ,aAARA,QAAQ,wBAAAC,cAAA,GAARD,QAAQ,CAAEX,IAAI,cAAAY,cAAA,uBAAdA,cAAA,CAAgBZ,IAAI,KAAI,IAAI,CAAC;MACrCK,YAAY,CAAC,KAAK,CAAC;IACvB,CAAC,CAAC,CACDQ,KAAK,CAACX,KAAK,IAAI;MAAA,IAAAY,eAAA;MACZX,QAAQ,CAACD,KAAK,CAAC;MACfG,YAAY,CAAC,KAAK,CAAC;MACnBU,OAAO,CAACb,KAAK,CAAC,cAAcN,OAAO,IAAI,EAAEM,KAAK,CAAC;MAE/C,IAAI,EAAAY,eAAA,GAAAZ,KAAK,CAACS,QAAQ,cAAAG,eAAA,uBAAdA,eAAA,CAAgBE,MAAM,MAAK,GAAG,EAAE;QAChCjB,OAAO,CAACkB,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;MACvB;IACJ,CAAC,CAAC;EAEV,CAAC,EAAE,CAACrB,OAAO,EAAEC,MAAM,CAAC,CAAC,CAAC,CAAC;;EAEvB,OAAO;IAAEG,IAAI;IAAEE,KAAK;IAAEE;EAAU,CAAC;AACrC;AAACN,EAAA,CA9BeH,MAAM;EAAA,QACFD,UAAU;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}