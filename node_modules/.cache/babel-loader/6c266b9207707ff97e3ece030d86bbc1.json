{"ast":null,"code":"'use strict';\n\nvar isNumeric = require('fast-isnumeric');\nvar Lib = require('../../lib');\nvar extractOpts = require('./helpers').extractOpts;\nmodule.exports = function calc(gd, trace, opts) {\n  var fullLayout = gd._fullLayout;\n  var vals = opts.vals;\n  var containerStr = opts.containerStr;\n  var container = containerStr ? Lib.nestedProperty(trace, containerStr).get() : trace;\n  var cOpts = extractOpts(container);\n  var auto = cOpts.auto !== false;\n  var min = cOpts.min;\n  var max = cOpts.max;\n  var mid = cOpts.mid;\n  var minVal = function () {\n    return Lib.aggNums(Math.min, null, vals);\n  };\n  var maxVal = function () {\n    return Lib.aggNums(Math.max, null, vals);\n  };\n  if (min === undefined) {\n    min = minVal();\n  } else if (auto) {\n    if (container._colorAx && isNumeric(min)) {\n      min = Math.min(min, minVal());\n    } else {\n      min = minVal();\n    }\n  }\n  if (max === undefined) {\n    max = maxVal();\n  } else if (auto) {\n    if (container._colorAx && isNumeric(max)) {\n      max = Math.max(max, maxVal());\n    } else {\n      max = maxVal();\n    }\n  }\n  if (auto && mid !== undefined) {\n    if (max - mid > mid - min) {\n      min = mid - (max - mid);\n    } else if (max - mid < mid - min) {\n      max = mid + (mid - min);\n    }\n  }\n  if (min === max) {\n    min -= 0.5;\n    max += 0.5;\n  }\n  cOpts._sync('min', min);\n  cOpts._sync('max', max);\n  if (cOpts.autocolorscale) {\n    var scl;\n    if (min * max < 0) scl = fullLayout.colorscale.diverging;else if (min >= 0) scl = fullLayout.colorscale.sequential;else scl = fullLayout.colorscale.sequentialminus;\n    cOpts._sync('colorscale', scl);\n  }\n};","map":{"version":3,"names":["isNumeric","require","Lib","extractOpts","module","exports","calc","gd","trace","opts","fullLayout","_fullLayout","vals","containerStr","container","nestedProperty","get","cOpts","auto","min","max","mid","minVal","aggNums","Math","maxVal","undefined","_colorAx","_sync","autocolorscale","scl","colorscale","diverging","sequential","sequentialminus"],"sources":["E:/tog_workspace/TestFabric_main/TestFabric-main/node_modules/plotly.js/src/components/colorscale/calc.js"],"sourcesContent":["'use strict';\n\nvar isNumeric = require('fast-isnumeric');\n\nvar Lib = require('../../lib');\nvar extractOpts = require('./helpers').extractOpts;\n\nmodule.exports = function calc(gd, trace, opts) {\n    var fullLayout = gd._fullLayout;\n    var vals = opts.vals;\n    var containerStr = opts.containerStr;\n\n    var container = containerStr ?\n        Lib.nestedProperty(trace, containerStr).get() :\n        trace;\n\n    var cOpts = extractOpts(container);\n    var auto = cOpts.auto !== false;\n    var min = cOpts.min;\n    var max = cOpts.max;\n    var mid = cOpts.mid;\n\n    var minVal = function() { return Lib.aggNums(Math.min, null, vals); };\n    var maxVal = function() { return Lib.aggNums(Math.max, null, vals); };\n\n    if(min === undefined) {\n        min = minVal();\n    } else if(auto) {\n        if(container._colorAx && isNumeric(min)) {\n            min = Math.min(min, minVal());\n        } else {\n            min = minVal();\n        }\n    }\n\n    if(max === undefined) {\n        max = maxVal();\n    } else if(auto) {\n        if(container._colorAx && isNumeric(max)) {\n            max = Math.max(max, maxVal());\n        } else {\n            max = maxVal();\n        }\n    }\n\n    if(auto && mid !== undefined) {\n        if(max - mid > mid - min) {\n            min = mid - (max - mid);\n        } else if(max - mid < mid - min) {\n            max = mid + (mid - min);\n        }\n    }\n\n    if(min === max) {\n        min -= 0.5;\n        max += 0.5;\n    }\n\n    cOpts._sync('min', min);\n    cOpts._sync('max', max);\n\n    if(cOpts.autocolorscale) {\n        var scl;\n        if(min * max < 0) scl = fullLayout.colorscale.diverging;\n        else if(min >= 0) scl = fullLayout.colorscale.sequential;\n        else scl = fullLayout.colorscale.sequentialminus;\n        cOpts._sync('colorscale', scl);\n    }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}